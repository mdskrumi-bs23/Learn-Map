var yw=Object.defineProperty,_w=Object.defineProperties;var vw=Object.getOwnPropertyDescriptors;var pp=Object.getOwnPropertySymbols;var Ew=Object.prototype.hasOwnProperty,ww=Object.prototype.propertyIsEnumerable;var gp=(t,e,n)=>e in t?yw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,A=(t,e)=>{for(var n in e||(e={}))Ew.call(e,n)&&gp(t,n,e[n]);if(pp)for(var n of pp(e))ww.call(e,n)&&gp(t,n,e[n]);return t},K=(t,e)=>_w(t,vw(e));var vD=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function bw(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),e}var L={exports:{}},ue={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var mp=Object.getOwnPropertySymbols,Tw=Object.prototype.hasOwnProperty,Sw=Object.prototype.propertyIsEnumerable;function xw(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function Aw(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var hy=Aw()?Object.assign:function(t,e){for(var n,r=xw(t),i,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)Tw.call(n,o)&&(r[o]=n[o]);if(mp){i=mp(n);for(var a=0;a<i.length;a++)Sw.call(n,i[a])&&(r[i[a]]=n[i[a]])}}return r};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hh=hy,Hi=60103,dy=60106;ue.Fragment=60107;ue.StrictMode=60108;ue.Profiler=60114;var py=60109,gy=60110,my=60112;ue.Suspense=60113;var yy=60115,_y=60116;if(typeof Symbol=="function"&&Symbol.for){var $t=Symbol.for;Hi=$t("react.element"),dy=$t("react.portal"),ue.Fragment=$t("react.fragment"),ue.StrictMode=$t("react.strict_mode"),ue.Profiler=$t("react.profiler"),py=$t("react.provider"),gy=$t("react.context"),my=$t("react.forward_ref"),ue.Suspense=$t("react.suspense"),yy=$t("react.memo"),_y=$t("react.lazy")}var yp=typeof Symbol=="function"&&Symbol.iterator;function Pw(t){return t===null||typeof t!="object"?null:(t=yp&&t[yp]||t["@@iterator"],typeof t=="function"?t:null)}function xo(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ey={};function Wi(t,e,n){this.props=t,this.context=e,this.refs=Ey,this.updater=n||vy}Wi.prototype.isReactComponent={};Wi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(xo(85));this.updater.enqueueSetState(this,t,e,"setState")};Wi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wy(){}wy.prototype=Wi.prototype;function dh(t,e,n){this.props=t,this.context=e,this.refs=Ey,this.updater=n||vy}var ph=dh.prototype=new wy;ph.constructor=dh;hh(ph,Wi.prototype);ph.isPureReactComponent=!0;var gh={current:null},by=Object.prototype.hasOwnProperty,Ty={key:!0,ref:!0,__self:!0,__source:!0};function Sy(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)by.call(e,r)&&!Ty.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Hi,type:t,key:s,ref:o,props:i,_owner:gh.current}}function Cw(t,e){return{$$typeof:Hi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hi}function Ow(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _p=/\/+/g;function Vu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ow(""+t.key):e.toString(36)}function La(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Hi:case dy:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Vu(o,0):r,Array.isArray(i)?(n="",t!=null&&(n=t.replace(_p,"$&/")+"/"),La(i,e,n,"",function(u){return u})):i!=null&&(mh(i)&&(i=Cw(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_p,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Array.isArray(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Vu(s,a);o+=La(s,e,n,l,i)}else if(l=Pw(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Vu(s,a++),o+=La(s,e,n,l,i);else if(s==="object")throw e=""+t,Error(xo(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return o}function ua(t,e,n){if(t==null)return t;var r=[],i=0;return La(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Rw(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(n){t._status===0&&(n=n.default,t._status=1,t._result=n)},function(n){t._status===0&&(t._status=2,t._result=n)})}if(t._status===1)return t._result;throw t._result}var xy={current:null};function Cn(){var t=xy.current;if(t===null)throw Error(xo(321));return t}var Mw={ReactCurrentDispatcher:xy,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:gh,IsSomeRendererActing:{current:!1},assign:hh};ue.Children={map:ua,forEach:function(t,e,n){ua(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ua(t,function(){e++}),e},toArray:function(t){return ua(t,function(e){return e})||[]},only:function(t){if(!mh(t))throw Error(xo(143));return t}};ue.Component=Wi;ue.PureComponent=dh;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mw;ue.cloneElement=function(t,e,n){if(t==null)throw Error(xo(267,t));var r=hh({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=gh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)by.call(e,l)&&!Ty.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Hi,type:t.type,key:i,ref:s,props:r,_owner:o}};ue.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:gy,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:py,_context:t},t.Consumer=t};ue.createElement=Sy;ue.createFactory=function(t){var e=Sy.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:my,render:t}};ue.isValidElement=mh;ue.lazy=function(t){return{$$typeof:_y,_payload:{_status:-1,_result:t},_init:Rw}};ue.memo=function(t,e){return{$$typeof:yy,type:t,compare:e===void 0?null:e}};ue.useCallback=function(t,e){return Cn().useCallback(t,e)};ue.useContext=function(t,e){return Cn().useContext(t,e)};ue.useDebugValue=function(){};ue.useEffect=function(t,e){return Cn().useEffect(t,e)};ue.useImperativeHandle=function(t,e,n){return Cn().useImperativeHandle(t,e,n)};ue.useLayoutEffect=function(t,e){return Cn().useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Cn().useMemo(t,e)};ue.useReducer=function(t,e,n){return Cn().useReducer(t,e,n)};ue.useRef=function(t){return Cn().useRef(t)};ue.useState=function(t){return Cn().useState(t)};ue.version="17.0.2";L.exports=ue;var hr=L.exports,Ao={exports:{}},Bt={},Ay={exports:{}},Py={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){var e,n,r,i;if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var l=null,u=null,c=function(){if(l!==null)try{var B=t.unstable_now();l(!0,B),l=null}catch(k){throw setTimeout(c,0),k}};e=function(B){l!==null?setTimeout(e,0,B):(l=B,setTimeout(c,0))},n=function(B,k){u=setTimeout(B,k)},r=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,h=window.clearTimeout;if(typeof console!="undefined"){var g=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof g!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var _=!1,v=null,d=-1,p=5,m=0;t.unstable_shouldYield=function(){return t.unstable_now()>=m},i=function(){},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):p=0<B?Math.floor(1e3/B):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(v!==null){var B=t.unstable_now();m=B+p;try{v(!0,B)?b.postMessage(null):(_=!1,v=null)}catch(k){throw b.postMessage(null),k}}else _=!1},e=function(B){v=B,_||(_=!0,b.postMessage(null))},n=function(B,k){d=f(function(){B(t.unstable_now())},k)},r=function(){h(d),d=-1}}function x(B,k){var N=B.length;B.push(k);e:for(;;){var j=N-1>>>1,X=B[j];if(X!==void 0&&0<R(X,k))B[j]=k,B[N]=X,N=j;else break e}}function S(B){return B=B[0],B===void 0?null:B}function O(B){var k=B[0];if(k!==void 0){var N=B.pop();if(N!==k){B[0]=N;e:for(var j=0,X=B.length;j<X;){var C=2*(j+1)-1,Z=B[C],F=C+1,J=B[F];if(Z!==void 0&&0>R(Z,N))J!==void 0&&0>R(J,Z)?(B[j]=J,B[F]=N,j=F):(B[j]=Z,B[C]=N,j=C);else if(J!==void 0&&0>R(J,N))B[j]=J,B[F]=N,j=F;else break e}}return k}return null}function R(B,k){var N=B.sortIndex-k.sortIndex;return N!==0?N:B.id-k.id}var M=[],z=[],Q=1,W=null,q=3,$=!1,ce=!1,mt=!1;function je(B){for(var k=S(z);k!==null;){if(k.callback===null)O(z);else if(k.startTime<=B)O(z),k.sortIndex=k.expirationTime,x(M,k);else break;k=S(z)}}function Be(B){if(mt=!1,je(B),!ce)if(S(M)!==null)ce=!0,e(Mt);else{var k=S(z);k!==null&&n(Be,k.startTime-B)}}function Mt(B,k){ce=!1,mt&&(mt=!1,r()),$=!0;var N=q;try{for(je(k),W=S(M);W!==null&&(!(W.expirationTime>k)||B&&!t.unstable_shouldYield());){var j=W.callback;if(typeof j=="function"){W.callback=null,q=W.priorityLevel;var X=j(W.expirationTime<=k);k=t.unstable_now(),typeof X=="function"?W.callback=X:W===S(M)&&O(M),je(k)}else O(M);W=S(M)}if(W!==null)var C=!0;else{var Z=S(z);Z!==null&&n(Be,Z.startTime-k),C=!1}return C}finally{W=null,q=N,$=!1}}var Kt=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){ce||$||(ce=!0,e(Mt))},t.unstable_getCurrentPriorityLevel=function(){return q},t.unstable_getFirstCallbackNode=function(){return S(M)},t.unstable_next=function(B){switch(q){case 1:case 2:case 3:var k=3;break;default:k=q}var N=q;q=k;try{return B()}finally{q=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=Kt,t.unstable_runWithPriority=function(B,k){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var N=q;q=B;try{return k()}finally{q=N}},t.unstable_scheduleCallback=function(B,k,N){var j=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?j+N:j):N=j,B){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=N+X,B={id:Q++,callback:k,priorityLevel:B,startTime:N,expirationTime:X,sortIndex:-1},N>j?(B.sortIndex=N,x(z,B),S(M)===null&&B===S(z)&&(mt?r():mt=!0,n(Be,N-j))):(B.sortIndex=X,x(M,B),ce||$||(ce=!0,e(Mt))),B},t.unstable_wrapCallback=function(B){var k=q;return function(){var N=q;q=k;try{return B.apply(this,arguments)}finally{q=N}}}})(Py);Ay.exports=Py;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yl=L.exports,Se=hy,$e=Ay.exports;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Yl)throw Error(U(227));var Cy=new Set,Ks={};function Vr(t,e){Mi(t,e),Mi(t+"Capture",e)}function Mi(t,e){for(Ks[t]=e,t=0;t<e.length;t++)Cy.add(e[t])}var Sn=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Iw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vp=Object.prototype.hasOwnProperty,Ep={},wp={};function Lw(t){return vp.call(wp,t)?!0:vp.call(Ep,t)?!1:Iw.test(t)?wp[t]=!0:(Ep[t]=!0,!1)}function kw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Nw(t,e,n,r){if(e===null||typeof e=="undefined"||kw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ut(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ke={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ke[t]=new ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ke[e]=new ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ke[t]=new ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ke[t]=new ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ke[t]=new ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ke[t]=new ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ke[t]=new ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ke[t]=new ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ke[t]=new ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var yh=/[\-:]([a-z])/g;function _h(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yh,_h);Ke[e]=new ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yh,_h);Ke[e]=new ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yh,_h);Ke[e]=new ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ke[t]=new ut(t,1,!1,t.toLowerCase(),null,!1,!1)});Ke.xlinkHref=new ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ke[t]=new ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function vh(t,e,n,r){var i=Ke.hasOwnProperty(e)?Ke[e]:null,s=i!==null?i.type===0:r?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");s||(Nw(e,n,i,r)&&(n=null),r||i===null?Lw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $r=Yl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ts=60103,Tr=60106,Fn=60107,Eh=60108,Is=60114,wh=60109,bh=60110,Zl=60112,Ls=60113,Ja=60120,ql=60115,Th=60116,Sh=60121,xh=60128,Oy=60129,Ah=60130,Hc=60131;if(typeof Symbol=="function"&&Symbol.for){var Ve=Symbol.for;Ts=Ve("react.element"),Tr=Ve("react.portal"),Fn=Ve("react.fragment"),Eh=Ve("react.strict_mode"),Is=Ve("react.profiler"),wh=Ve("react.provider"),bh=Ve("react.context"),Zl=Ve("react.forward_ref"),Ls=Ve("react.suspense"),Ja=Ve("react.suspense_list"),ql=Ve("react.memo"),Th=Ve("react.lazy"),Sh=Ve("react.block"),Ve("react.scope"),xh=Ve("react.opaque.id"),Oy=Ve("react.debug_trace_mode"),Ah=Ve("react.offscreen"),Hc=Ve("react.legacy_hidden")}var bp=typeof Symbol=="function"&&Symbol.iterator;function os(t){return t===null||typeof t!="object"?null:(t=bp&&t[bp]||t["@@iterator"],typeof t=="function"?t:null)}var $u;function Ss(t){if($u===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$u=e&&e[1]||""}return`
`+$u+t}var Gu=!1;function ca(t,e){if(!t||Gu)return"";Gu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a])return`
`+i[o].replace(" at new "," at ");while(1<=o&&0<=a);break}}}finally{Gu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ss(t):""}function Dw(t){switch(t.tag){case 5:return Ss(t.type);case 16:return Ss("Lazy");case 13:return Ss("Suspense");case 19:return Ss("SuspenseList");case 0:case 2:case 15:return t=ca(t.type,!1),t;case 11:return t=ca(t.type.render,!1),t;case 22:return t=ca(t.type._render,!1),t;case 1:return t=ca(t.type,!0),t;default:return""}}function yi(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fn:return"Fragment";case Tr:return"Portal";case Is:return"Profiler";case Eh:return"StrictMode";case Ls:return"Suspense";case Ja:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case bh:return(t.displayName||"Context")+".Consumer";case wh:return(t._context.displayName||"Context")+".Provider";case Zl:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case ql:return yi(t.type);case Sh:return yi(t._render);case Th:e=t._payload,t=t._init;try{return yi(t(e))}catch{}}return null}function tr(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Ry(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Fw(t){var e=Ry(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fa(t){t._valueTracker||(t._valueTracker=Fw(t))}function My(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ry(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function el(t){if(t=t||(typeof document!="undefined"?document:void 0),typeof t=="undefined")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wc(t,e){var n=e.checked;return Se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function Tp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=tr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Iy(t,e){e=e.checked,e!=null&&vh(t,"checked",e,!1)}function Xc(t,e){Iy(t,e);var n=tr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yc(t,e.type,tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yc(t,e,n){(e!=="number"||el(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function Uw(t){var e="";return Yl.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function Zc(t,e){return t=Se({children:void 0},e),(e=Uw(e.children))&&(t.children=e),t}function _i(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+tr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function qc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Se({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:tr(n)}}function Ly(t,e){var n=tr(e.value),r=tr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ap(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var Kc={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function ky(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ky(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ha,Ny=function(t){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!==Kc.svg||"innerHTML"in t)t.innerHTML=e;else{for(ha=ha||document.createElement("div"),ha.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ha.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ks={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jw=["Webkit","ms","Moz","O"];Object.keys(ks).forEach(function(t){jw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ks[e]=ks[t]})});function Dy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ks.hasOwnProperty(t)&&ks[t]?(""+e).trim():e+"px"}function Fy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Dy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Bw=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jc(t,e){if(e){if(Bw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function ef(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ph(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tf=null,vi=null,Ei=null;function Pp(t){if(t=Co(t)){if(typeof tf!="function")throw Error(U(280));var e=t.stateNode;e&&(e=nu(e),tf(t.stateNode,t.type,e))}}function Uy(t){vi?Ei?Ei.push(t):Ei=[t]:vi=t}function jy(){if(vi){var t=vi,e=Ei;if(Ei=vi=null,Pp(t),e)for(t=0;t<e.length;t++)Pp(e[t])}}function Ch(t,e){return t(e)}function By(t,e,n,r,i){return t(e,n,r,i)}function Oh(){}var zy=Ch,Sr=!1,Hu=!1;function Rh(){(vi!==null||Ei!==null)&&(Oh(),jy())}function zw(t,e,n){if(Hu)return t(e,n);Hu=!0;try{return zy(t,e,n)}finally{Hu=!1,Rh()}}function Js(t,e){var n=t.stateNode;if(n===null)return null;var r=nu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var nf=!1;if(Sn)try{var as={};Object.defineProperty(as,"passive",{get:function(){nf=!0}}),window.addEventListener("test",as,as),window.removeEventListener("test",as,as)}catch{nf=!1}function Vw(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Ns=!1,tl=null,nl=!1,rf=null,$w={onError:function(t){Ns=!0,tl=t}};function Gw(t,e,n,r,i,s,o,a,l){Ns=!1,tl=null,Vw.apply($w,arguments)}function Hw(t,e,n,r,i,s,o,a,l){if(Gw.apply(this,arguments),Ns){if(Ns){var u=tl;Ns=!1,tl=null}else throw Error(U(198));nl||(nl=!0,rf=u)}}function Gr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&1026)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cp(t){if(Gr(t)!==t)throw Error(U(188))}function Ww(t){var e=t.alternate;if(!e){if(e=Gr(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Cp(i),t;if(s===r)return Cp(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function $y(t){if(t=Ww(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function Op(t,e){for(var n=t.alternate;e!==null;){if(e===t||e===n)return!0;e=e.return}return!1}var Gy,Mh,Hy,Wy,sf=!1,rn=[],Gn=null,Hn=null,Wn=null,eo=new Map,to=new Map,ls=[],Rp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function of(t,e,n,r,i){return{blockedOn:t,domEventName:e,eventSystemFlags:n|16,nativeEvent:i,targetContainers:[r]}}function Mp(t,e){switch(t){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Hn=null;break;case"mouseover":case"mouseout":Wn=null;break;case"pointerover":case"pointerout":eo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":to.delete(e.pointerId)}}function us(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t=of(e,n,r,i,s),e!==null&&(e=Co(e),e!==null&&Mh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Xw(t,e,n,r,i){switch(e){case"focusin":return Gn=us(Gn,t,e,n,r,i),!0;case"dragenter":return Hn=us(Hn,t,e,n,r,i),!0;case"mouseover":return Wn=us(Wn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return eo.set(s,us(eo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,to.set(s,us(to.get(s)||null,t,e,n,r,i)),!0}return!1}function Yw(t){var e=xr(t.target);if(e!==null){var n=Gr(e);if(n!==null){if(e=n.tag,e===13){if(e=Vy(n),e!==null){t.blockedOn=e,Wy(t.lanePriority,function(){$e.unstable_runWithPriority(t.priority,function(){Hy(n)})});return}}else if(e===3&&n.stateNode.hydrate){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ka(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Nh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n!==null)return e=Co(n),e!==null&&Mh(e),t.blockedOn=n,!1;e.shift()}return!0}function Ip(t,e,n){ka(t)&&n.delete(e)}function Zw(){for(sf=!1;0<rn.length;){var t=rn[0];if(t.blockedOn!==null){t=Co(t.blockedOn),t!==null&&Gy(t);break}for(var e=t.targetContainers;0<e.length;){var n=Nh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n!==null){t.blockedOn=n;break}e.shift()}t.blockedOn===null&&rn.shift()}Gn!==null&&ka(Gn)&&(Gn=null),Hn!==null&&ka(Hn)&&(Hn=null),Wn!==null&&ka(Wn)&&(Wn=null),eo.forEach(Ip),to.forEach(Ip)}function cs(t,e){t.blockedOn===e&&(t.blockedOn=null,sf||(sf=!0,$e.unstable_scheduleCallback($e.unstable_NormalPriority,Zw)))}function Xy(t){function e(i){return cs(i,t)}if(0<rn.length){cs(rn[0],t);for(var n=1;n<rn.length;n++){var r=rn[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gn!==null&&cs(Gn,t),Hn!==null&&cs(Hn,t),Wn!==null&&cs(Wn,t),eo.forEach(e),to.forEach(e),n=0;n<ls.length;n++)r=ls[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ls.length&&(n=ls[0],n.blockedOn===null);)Yw(n),n.blockedOn===null&&ls.shift()}function da(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var li={animationend:da("Animation","AnimationEnd"),animationiteration:da("Animation","AnimationIteration"),animationstart:da("Animation","AnimationStart"),transitionend:da("Transition","TransitionEnd")},Wu={},Yy={};Sn&&(Yy=document.createElement("div").style,"AnimationEvent"in window||(delete li.animationend.animation,delete li.animationiteration.animation,delete li.animationstart.animation),"TransitionEvent"in window||delete li.transitionend.transition);function Kl(t){if(Wu[t])return Wu[t];if(!li[t])return t;var e=li[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Yy)return Wu[t]=e[n];return t}var Zy=Kl("animationend"),qy=Kl("animationiteration"),Ky=Kl("animationstart"),Qy=Kl("transitionend"),Jy=new Map,Ih=new Map,qw=["abort","abort",Zy,"animationEnd",qy,"animationIteration",Ky,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Qy,"transitionEnd","waiting","waiting"];function Lh(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ih.set(r,e),Jy.set(r,i),Vr(i,[r])}}var Kw=$e.unstable_now;Kw();var ye=8;function ii(t){if((1&t)!==0)return ye=15,1;if((2&t)!==0)return ye=14,2;if((4&t)!==0)return ye=13,4;var e=24&t;return e!==0?(ye=12,e):(t&32)!==0?(ye=11,32):(e=192&t,e!==0?(ye=10,e):(t&256)!==0?(ye=9,256):(e=3584&t,e!==0?(ye=8,e):(t&4096)!==0?(ye=7,4096):(e=4186112&t,e!==0?(ye=6,e):(e=62914560&t,e!==0?(ye=5,e):t&67108864?(ye=4,67108864):(t&134217728)!==0?(ye=3,134217728):(e=805306368&t,e!==0?(ye=2,e):(1073741824&t)!==0?(ye=1,1073741824):(ye=8,t))))))}function Qw(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Jw(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(U(358,t))}}function no(t,e){var n=t.pendingLanes;if(n===0)return ye=0;var r=0,i=0,s=t.expiredLanes,o=t.suspendedLanes,a=t.pingedLanes;if(s!==0)r=s,i=ye=15;else if(s=n&134217727,s!==0){var l=s&~o;l!==0?(r=ii(l),i=ye):(a&=s,a!==0&&(r=ii(a),i=ye))}else s=n&~o,s!==0?(r=ii(s),i=ye):a!==0&&(r=ii(a),i=ye);if(r===0)return 0;if(r=31-nr(r),r=n&((0>r?0:1<<r)<<1)-1,e!==0&&e!==r&&(e&o)===0){if(ii(e),i<=ye)return e;ye=i}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-nr(e),i=1<<n,r|=t[n],e&=~i;return r}function e_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function rl(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=si(24&~e),t===0?rl(10,e):t;case 10:return t=si(192&~e),t===0?rl(8,e):t;case 8:return t=si(3584&~e),t===0&&(t=si(4186112&~e),t===0&&(t=512)),t;case 2:return e=si(805306368&~e),e===0&&(e=268435456),e}throw Error(U(358,t))}function si(t){return t&-t}function Xu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ql(t,e,n){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,t=t.eventTimes,e=31-nr(e),t[e]=n}var nr=Math.clz32?Math.clz32:nb,eb=Math.log,tb=Math.LN2;function nb(t){return t===0?32:31-(eb(t)/tb|0)|0}var rb=$e.unstable_UserBlockingPriority,ib=$e.unstable_runWithPriority,Na=!0;function sb(t,e,n,r){Sr||Oh();var i=kh,s=Sr;Sr=!0;try{By(i,t,e,n,r)}finally{(Sr=s)||Rh()}}function ob(t,e,n,r){ib(rb,kh.bind(null,t,e,n,r))}function kh(t,e,n,r){if(Na){var i;if((i=(e&4)===0)&&0<rn.length&&-1<Rp.indexOf(t))t=of(null,t,e,n,r),rn.push(t);else{var s=Nh(t,e,n,r);if(s===null)i&&Mp(t,r);else{if(i){if(-1<Rp.indexOf(t)){t=of(s,t,e,n,r),rn.push(t);return}if(Xw(s,t,e,n,r))return;Mp(t,r)}d_(t,e,r,null,n)}}}}function Nh(t,e,n,r){var i=Ph(r);if(i=xr(i),i!==null){var s=Gr(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=Vy(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.hydrate)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return d_(t,e,r,i,n),null}var Bn=null,Dh=null,Da=null;function t_(){if(Da)return Da;var t,e=Dh,n=e.length,r,i="value"in Bn?Bn.value:Bn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Da=i.slice(t,1<r?1-r:void 0)}function Fa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pa(){return!0}function Lp(){return!1}function Ot(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pa:Lp,this.isPropagationStopped=Lp,this}return Se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pa)},persist:function(){},isPersistent:pa}),e}var Xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fh=Ot(Xi),Po=Se({},Xi,{view:0,detail:0}),ab=Ot(Po),Yu,Zu,fs,Jl=Se({},Po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fs&&(fs&&t.type==="mousemove"?(Yu=t.screenX-fs.screenX,Zu=t.screenY-fs.screenY):Zu=Yu=0,fs=t),Yu)},movementY:function(t){return"movementY"in t?t.movementY:Zu}}),kp=Ot(Jl),lb=Se({},Jl,{dataTransfer:0}),ub=Ot(lb),cb=Se({},Po,{relatedTarget:0}),qu=Ot(cb),fb=Se({},Xi,{animationName:0,elapsedTime:0,pseudoElement:0}),hb=Ot(fb),db=Se({},Xi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pb=Ot(db),gb=Se({},Xi,{data:0}),Np=Ot(gb),mb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_b={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_b[t])?!!e[t]:!1}function Uh(){return vb}var Eb=Se({},Po,{key:function(t){if(t.key){var e=mb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uh,charCode:function(t){return t.type==="keypress"?Fa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wb=Ot(Eb),bb=Se({},Jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dp=Ot(bb),Tb=Se({},Po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uh}),Sb=Ot(Tb),xb=Se({},Xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ab=Ot(xb),Pb=Se({},Jl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cb=Ot(Pb),Ob=[9,13,27,32],jh=Sn&&"CompositionEvent"in window,Ds=null;Sn&&"documentMode"in document&&(Ds=document.documentMode);var Rb=Sn&&"TextEvent"in window&&!Ds,n_=Sn&&(!jh||Ds&&8<Ds&&11>=Ds),Fp=String.fromCharCode(32),Up=!1;function r_(t,e){switch(t){case"keyup":return Ob.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function i_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ui=!1;function Mb(t,e){switch(t){case"compositionend":return i_(e);case"keypress":return e.which!==32?null:(Up=!0,Fp);case"textInput":return t=e.data,t===Fp&&Up?null:t;default:return null}}function Ib(t,e){if(ui)return t==="compositionend"||!jh&&r_(t,e)?(t=t_(),Da=Dh=Bn=null,ui=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return n_&&e.locale!=="ko"?null:e.data;default:return null}}var Lb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Lb[t.type]:e==="textarea"}function s_(t,e,n,r){Uy(r),e=il(e,"onChange"),0<e.length&&(n=new Fh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fs=null,ro=null;function kb(t){c_(t,0)}function eu(t){var e=fi(t);if(My(e))return t}function Nb(t,e){if(t==="change")return e}var o_=!1;if(Sn){var Ku;if(Sn){var Qu="oninput"in document;if(!Qu){var Bp=document.createElement("div");Bp.setAttribute("oninput","return;"),Qu=typeof Bp.oninput=="function"}Ku=Qu}else Ku=!1;o_=Ku&&(!document.documentMode||9<document.documentMode)}function zp(){Fs&&(Fs.detachEvent("onpropertychange",a_),ro=Fs=null)}function a_(t){if(t.propertyName==="value"&&eu(ro)){var e=[];if(s_(e,ro,t,Ph(t)),t=kb,Sr)t(e);else{Sr=!0;try{Ch(t,e)}finally{Sr=!1,Rh()}}}}function Db(t,e,n){t==="focusin"?(zp(),Fs=e,ro=n,Fs.attachEvent("onpropertychange",a_)):t==="focusout"&&zp()}function Fb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eu(ro)}function Ub(t,e){if(t==="click")return eu(e)}function jb(t,e){if(t==="input"||t==="change")return eu(e)}function Bb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kt=typeof Object.is=="function"?Object.is:Bb,zb=Object.prototype.hasOwnProperty;function io(t,e){if(kt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!zb.call(e,n[r])||!kt(t[n[r]],e[n[r]]))return!1;return!0}function Vp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $p(t,e){var n=Vp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vp(n)}}function l_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?l_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Gp(){for(var t=window,e=el();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=el(t.document)}return e}function af(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Vb=Sn&&"documentMode"in document&&11>=document.documentMode,ci=null,lf=null,Us=null,uf=!1;function Hp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uf||ci==null||ci!==el(r)||(r=ci,"selectionStart"in r&&af(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Us&&io(Us,r)||(Us=r,r=il(lf,"onSelect"),0<r.length&&(e=new Fh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ci)))}Lh("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Lh("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Lh(qw,2);for(var Wp="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ju=0;Ju<Wp.length;Ju++)Ih.set(Wp[Ju],0);Mi("onMouseEnter",["mouseout","mouseover"]);Mi("onMouseLeave",["mouseout","mouseover"]);Mi("onPointerEnter",["pointerout","pointerover"]);Mi("onPointerLeave",["pointerout","pointerover"]);Vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u_=new Set("cancel close invalid load scroll toggle".split(" ").concat(xs));function Xp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Hw(r,e,void 0,t),t.currentTarget=null}function c_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Xp(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Xp(i,a,u),s=l}}}if(nl)throw t=rf,nl=!1,rf=null,t}function Ee(t,e){var n=g_(e),r=t+"__bubble";n.has(r)||(h_(e,t,2,!1),n.add(r))}var Yp="_reactListening"+Math.random().toString(36).slice(2);function f_(t){t[Yp]||(t[Yp]=!0,Cy.forEach(function(e){u_.has(e)||Zp(e,!1,t,null),Zp(e,!0,t,null)}))}function Zp(t,e,n,r){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=n;if(t==="selectionchange"&&n.nodeType!==9&&(s=n.ownerDocument),r!==null&&!e&&u_.has(t)){if(t!=="scroll")return;i|=2,s=r}var o=g_(s),a=t+"__"+(e?"capture":"bubble");o.has(a)||(e&&(i|=4),h_(s,t,i,e),o.add(a))}function h_(t,e,n,r){var i=Ih.get(e);switch(i===void 0?2:i){case 0:i=sb;break;case 1:i=ob;break;default:i=kh}n=i.bind(null,e,n,t),i=void 0,!nf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function d_(t,e,n,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=xr(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}zw(function(){var u=s,c=Ph(n),f=[];e:{var h=Jy.get(t);if(h!==void 0){var g=Fh,_=t;switch(t){case"keypress":if(Fa(n)===0)break e;case"keydown":case"keyup":g=wb;break;case"focusin":_="focus",g=qu;break;case"focusout":_="blur",g=qu;break;case"beforeblur":case"afterblur":g=qu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=kp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=ub;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Sb;break;case Zy:case qy:case Ky:g=hb;break;case Qy:g=Ab;break;case"scroll":g=ab;break;case"wheel":g=Cb;break;case"copy":case"cut":case"paste":g=pb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Dp}var v=(e&4)!==0,d=!v&&t==="scroll",p=v?h!==null?h+"Capture":null:h;v=[];for(var m=u,w;m!==null;){w=m;var b=w.stateNode;if(w.tag===5&&b!==null&&(w=b,p!==null&&(b=Js(m,p),b!=null&&v.push(so(m,b,w)))),d)break;m=m.return}0<v.length&&(h=new g(h,_,null,n,c),f.push({event:h,listeners:v}))}}if((e&7)===0){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&(e&16)===0&&(_=n.relatedTarget||n.fromElement)&&(xr(_)||_[Yi]))break e;if((g||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=u,_=_?xr(_):null,_!==null&&(d=Gr(_),_!==d||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=u),g!==_)){if(v=kp,b="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(v=Dp,b="onPointerLeave",p="onPointerEnter",m="pointer"),d=g==null?h:fi(g),w=_==null?h:fi(_),h=new v(b,m+"leave",g,n,c),h.target=d,h.relatedTarget=w,b=null,xr(c)===u&&(v=new v(p,m+"enter",_,n,c),v.target=w,v.relatedTarget=d,b=v),d=b,g&&_)t:{for(v=g,p=_,m=0,w=v;w;w=qr(w))m++;for(w=0,b=p;b;b=qr(b))w++;for(;0<m-w;)v=qr(v),m--;for(;0<w-m;)p=qr(p),w--;for(;m--;){if(v===p||p!==null&&v===p.alternate)break t;v=qr(v),p=qr(p)}v=null}else v=null;g!==null&&qp(f,h,g,v,!1),_!==null&&d!==null&&qp(f,d,_,v,!0)}}e:{if(h=u?fi(u):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var x=Nb;else if(jp(h))if(o_)x=jb;else{x=Fb;var S=Db}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=Ub);if(x&&(x=x(t,u))){s_(f,x,n,c);break e}S&&S(t,h,u),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Yc(h,"number",h.value)}switch(S=u?fi(u):window,t){case"focusin":(jp(S)||S.contentEditable==="true")&&(ci=S,lf=u,Us=null);break;case"focusout":Us=lf=ci=null;break;case"mousedown":uf=!0;break;case"contextmenu":case"mouseup":case"dragend":uf=!1,Hp(f,n,c);break;case"selectionchange":if(Vb)break;case"keydown":case"keyup":Hp(f,n,c)}var O;if(jh)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else ui?r_(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(n_&&n.locale!=="ko"&&(ui||R!=="onCompositionStart"?R==="onCompositionEnd"&&ui&&(O=t_()):(Bn=c,Dh="value"in Bn?Bn.value:Bn.textContent,ui=!0)),S=il(u,R),0<S.length&&(R=new Np(R,t,null,n,c),f.push({event:R,listeners:S}),O?R.data=O:(O=i_(n),O!==null&&(R.data=O)))),(O=Rb?Mb(t,n):Ib(t,n))&&(u=il(u,"onBeforeInput"),0<u.length&&(c=new Np("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=O))}c_(f,e)})}function so(t,e,n){return{instance:t,listener:e,currentTarget:n}}function il(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Js(t,n),s!=null&&r.unshift(so(t,s,i)),s=Js(t,e),s!=null&&r.push(so(t,s,i))),t=t.return}return r}function qr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qp(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Js(n,s),l!=null&&o.unshift(so(n,l,a))):i||(l=Js(n,s),l!=null&&o.push(so(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}function sl(){}var ec=null,tc=null;function p_(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function cf(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kp=typeof setTimeout=="function"?setTimeout:void 0,$b=typeof clearTimeout=="function"?clearTimeout:void 0;function Bh(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function wi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function Qp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var nc=0;function Gb(t){return{$$typeof:xh,toString:t,valueOf:t}}var tu=Math.random().toString(36).slice(2),zn="__reactFiber$"+tu,ol="__reactProps$"+tu,Yi="__reactContainer$"+tu,Jp="__reactEvents$"+tu;function xr(t){var e=t[zn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yi]||n[zn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Qp(t);t!==null;){if(n=t[zn])return n;t=Qp(t)}return e}t=n,n=t.parentNode}return null}function Co(t){return t=t[zn]||t[Yi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function nu(t){return t[ol]||null}function g_(t){var e=t[Jp];return e===void 0&&(e=t[Jp]=new Set),e}var ff=[],hi=-1;function dr(t){return{current:t}}function we(t){0>hi||(t.current=ff[hi],ff[hi]=null,hi--)}function Re(t,e){hi++,ff[hi]=t.current,t.current=e}var rr={},it=dr(rr),dt=dr(!1),Lr=rr;function Ii(t,e){var n=t.type.contextTypes;if(!n)return rr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function pt(t){return t=t.childContextTypes,t!=null}function al(){we(dt),we(it)}function eg(t,e,n){if(it.current!==rr)throw Error(U(168));Re(it,e),Re(dt,n)}function m_(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(U(108,yi(e)||"Unknown",i));return Se({},n,r)}function Ua(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rr,Lr=it.current,Re(it,t),Re(dt,dt.current),!0}function tg(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=m_(t,e,Lr),r.__reactInternalMemoizedMergedChildContext=t,we(dt),we(it),Re(it,t)):we(dt),Re(dt,n)}var zh=null,Mr=null,Hb=$e.unstable_runWithPriority,Vh=$e.unstable_scheduleCallback,hf=$e.unstable_cancelCallback,Wb=$e.unstable_shouldYield,ng=$e.unstable_requestPaint,df=$e.unstable_now,Xb=$e.unstable_getCurrentPriorityLevel,ru=$e.unstable_ImmediatePriority,y_=$e.unstable_UserBlockingPriority,__=$e.unstable_NormalPriority,v_=$e.unstable_LowPriority,E_=$e.unstable_IdlePriority,rc={},Yb=ng!==void 0?ng:function(){},yn=null,ja=null,ic=!1,rg=df(),nt=1e4>rg?df:function(){return df()-rg};function Li(){switch(Xb()){case ru:return 99;case y_:return 98;case __:return 97;case v_:return 96;case E_:return 95;default:throw Error(U(332))}}function w_(t){switch(t){case 99:return ru;case 98:return y_;case 97:return __;case 96:return v_;case 95:return E_;default:throw Error(U(332))}}function kr(t,e){return t=w_(t),Hb(t,e)}function oo(t,e,n){return t=w_(t),Vh(t,e,n)}function hn(){if(ja!==null){var t=ja;ja=null,hf(t)}b_()}function b_(){if(!ic&&yn!==null){ic=!0;var t=0;try{var e=yn;kr(99,function(){for(;t<e.length;t++){var n=e[t];do n=n(!0);while(n!==null)}}),yn=null}catch(n){throw yn!==null&&(yn=yn.slice(t+1)),Vh(ru,hn),n}finally{ic=!1}}}var Zb=$r.ReactCurrentBatchConfig;function Gt(t,e){if(t&&t.defaultProps){e=Se({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ll=dr(null),ul=null,di=null,cl=null;function $h(){cl=di=ul=null}function Gh(t){var e=ll.current;we(ll),t.type._context._currentValue=e}function T_(t,e){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)===e){if(n===null||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,n!==null&&(n.childLanes|=e);t=t.return}}function bi(t,e){ul=t,cl=di=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(Wt=!0),t.firstContext=null)}function Ut(t,e){if(cl!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(cl=t,e=1073741823),e={context:t,observedBits:e,next:null},di===null){if(ul===null)throw Error(U(308));di=e,ul.dependencies={lanes:0,firstContext:e,responders:null}}else di=di.next=e;return t._currentValue}var Dn=!1;function Hh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function S_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yn(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function ig(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ao(t,e,n,r){var i=t.updateQueue;Dn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;if(c!==null){c=c.updateQueue;var f=c.lastBaseUpdate;f!==o&&(f===null?c.firstBaseUpdate=u:f.next=u,c.lastBaseUpdate=l)}}if(s!==null){f=i.baseState,o=0,c=u=l=null;do{a=s.lane;var h=s.eventTime;if((r&a)===a){c!==null&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=t,_=s;switch(a=e,h=n,_.tag){case 1:if(g=_.payload,typeof g=="function"){f=g.call(h,f,a);break e}f=g;break e;case 3:g.flags=g.flags&-4097|64;case 0:if(g=_.payload,a=typeof g=="function"?g.call(h,f,a):g,a==null)break e;f=Se({},f,a);break e;case 2:Dn=!0}}s.callback!==null&&(t.flags|=32,a=i.effects,a===null?i.effects=[s]:a.push(s))}else h={eventTime:h,lane:a,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=h,l=f):c=c.next=h,o|=a;if(s=s.next,s===null){if(a=i.shared.pending,a===null)break;s=a.next,a.next=null,i.lastBaseUpdate=a,i.shared.pending=null}}while(1);c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,Ro|=o,t.lanes=o,t.memoizedState=f}}function sg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var x_=new Yl.Component().refs;function fl(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Se({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var iu={isMounted:function(t){return(t=t._reactInternals)?Gr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=At(),i=Zn(t),s=Xn(r,i);s.payload=e,n!=null&&(s.callback=n),Yn(t,s),qn(t,i,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=At(),i=Zn(t),s=Xn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),Yn(t,s),qn(t,i,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=At(),r=Zn(t),i=Xn(n,r);i.tag=2,e!=null&&(i.callback=e),Yn(t,i),qn(t,r,n)}};function og(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!io(n,r)||!io(i,s):!0}function A_(t,e,n){var r=!1,i=rr,s=e.contextType;return typeof s=="object"&&s!==null?s=Ut(s):(i=pt(e)?Lr:it.current,r=e.contextTypes,s=(r=r!=null)?Ii(t,i):rr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=iu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ag(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&iu.enqueueReplaceState(e,e.state,null)}function pf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=x_,Hh(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ut(s):(s=pt(e)?Lr:it.current,i.context=Ii(t,s)),ao(t,n,i,r),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(fl(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&iu.enqueueReplaceState(i,i.state,null),ao(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4)}var ga=Array.isArray;function hs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var o=r.refs;o===x_&&(o=r.refs={}),s===null?delete o[i]:o[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function ma(t,e){if(t.type!=="textarea")throw Error(U(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function P_(t){function e(d,p){if(t){var m=d.lastEffect;m!==null?(m.nextEffect=p,d.lastEffect=p):d.firstEffect=d.lastEffect=p,p.nextEffect=null,p.flags=8}}function n(d,p){if(!t)return null;for(;p!==null;)e(d,p),p=p.sibling;return null}function r(d,p){for(d=new Map;p!==null;)p.key!==null?d.set(p.key,p):d.set(p.index,p),p=p.sibling;return d}function i(d,p){return d=sr(d,p),d.index=0,d.sibling=null,d}function s(d,p,m){return d.index=m,t?(m=d.alternate,m!==null?(m=m.index,m<p?(d.flags=2,p):m):(d.flags=2,p)):p}function o(d){return t&&d.alternate===null&&(d.flags=2),d}function a(d,p,m,w){return p===null||p.tag!==6?(p=uc(m,d.mode,w),p.return=d,p):(p=i(p,m),p.return=d,p)}function l(d,p,m,w){return p!==null&&p.elementType===m.type?(w=i(p,m.props),w.ref=hs(d,p,m),w.return=d,w):(w=$a(m.type,m.key,m.props,null,d.mode,w),w.ref=hs(d,p,m),w.return=d,w)}function u(d,p,m,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=cc(m,d.mode,w),p.return=d,p):(p=i(p,m.children||[]),p.return=d,p)}function c(d,p,m,w,b){return p===null||p.tag!==7?(p=Ai(m,d.mode,w,b),p.return=d,p):(p=i(p,m),p.return=d,p)}function f(d,p,m){if(typeof p=="string"||typeof p=="number")return p=uc(""+p,d.mode,m),p.return=d,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ts:return m=$a(p.type,p.key,p.props,null,d.mode,m),m.ref=hs(d,null,p),m.return=d,m;case Tr:return p=cc(p,d.mode,m),p.return=d,p}if(ga(p)||os(p))return p=Ai(p,d.mode,m,null),p.return=d,p;ma(d,p)}return null}function h(d,p,m,w){var b=p!==null?p.key:null;if(typeof m=="string"||typeof m=="number")return b!==null?null:a(d,p,""+m,w);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ts:return m.key===b?m.type===Fn?c(d,p,m.props.children,w,b):l(d,p,m,w):null;case Tr:return m.key===b?u(d,p,m,w):null}if(ga(m)||os(m))return b!==null?null:c(d,p,m,w,null);ma(d,m)}return null}function g(d,p,m,w,b){if(typeof w=="string"||typeof w=="number")return d=d.get(m)||null,a(p,d,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ts:return d=d.get(w.key===null?m:w.key)||null,w.type===Fn?c(p,d,w.props.children,b,w.key):l(p,d,w,b);case Tr:return d=d.get(w.key===null?m:w.key)||null,u(p,d,w,b)}if(ga(w)||os(w))return d=d.get(m)||null,c(p,d,w,b,null);ma(p,w)}return null}function _(d,p,m,w){for(var b=null,x=null,S=p,O=p=0,R=null;S!==null&&O<m.length;O++){S.index>O?(R=S,S=null):R=S.sibling;var M=h(d,S,m[O],w);if(M===null){S===null&&(S=R);break}t&&S&&M.alternate===null&&e(d,S),p=s(M,p,O),x===null?b=M:x.sibling=M,x=M,S=R}if(O===m.length)return n(d,S),b;if(S===null){for(;O<m.length;O++)S=f(d,m[O],w),S!==null&&(p=s(S,p,O),x===null?b=S:x.sibling=S,x=S);return b}for(S=r(d,S);O<m.length;O++)R=g(S,d,O,m[O],w),R!==null&&(t&&R.alternate!==null&&S.delete(R.key===null?O:R.key),p=s(R,p,O),x===null?b=R:x.sibling=R,x=R);return t&&S.forEach(function(z){return e(d,z)}),b}function v(d,p,m,w){var b=os(m);if(typeof b!="function")throw Error(U(150));if(m=b.call(m),m==null)throw Error(U(151));for(var x=b=null,S=p,O=p=0,R=null,M=m.next();S!==null&&!M.done;O++,M=m.next()){S.index>O?(R=S,S=null):R=S.sibling;var z=h(d,S,M.value,w);if(z===null){S===null&&(S=R);break}t&&S&&z.alternate===null&&e(d,S),p=s(z,p,O),x===null?b=z:x.sibling=z,x=z,S=R}if(M.done)return n(d,S),b;if(S===null){for(;!M.done;O++,M=m.next())M=f(d,M.value,w),M!==null&&(p=s(M,p,O),x===null?b=M:x.sibling=M,x=M);return b}for(S=r(d,S);!M.done;O++,M=m.next())M=g(S,d,O,M.value,w),M!==null&&(t&&M.alternate!==null&&S.delete(M.key===null?O:M.key),p=s(M,p,O),x===null?b=M:x.sibling=M,x=M);return t&&S.forEach(function(Q){return e(d,Q)}),b}return function(d,p,m,w){var b=typeof m=="object"&&m!==null&&m.type===Fn&&m.key===null;b&&(m=m.props.children);var x=typeof m=="object"&&m!==null;if(x)switch(m.$$typeof){case Ts:e:{for(x=m.key,b=p;b!==null;){if(b.key===x){switch(b.tag){case 7:if(m.type===Fn){n(d,b.sibling),p=i(b,m.props.children),p.return=d,d=p;break e}break;default:if(b.elementType===m.type){n(d,b.sibling),p=i(b,m.props),p.ref=hs(d,b,m),p.return=d,d=p;break e}}n(d,b);break}else e(d,b);b=b.sibling}m.type===Fn?(p=Ai(m.props.children,d.mode,w,m.key),p.return=d,d=p):(w=$a(m.type,m.key,m.props,null,d.mode,w),w.ref=hs(d,p,m),w.return=d,d=w)}return o(d);case Tr:e:{for(b=m.key;p!==null;){if(p.key===b)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(d,p.sibling),p=i(p,m.children||[]),p.return=d,d=p;break e}else{n(d,p);break}else e(d,p);p=p.sibling}p=cc(m,d.mode,w),p.return=d,d=p}return o(d)}if(typeof m=="string"||typeof m=="number")return m=""+m,p!==null&&p.tag===6?(n(d,p.sibling),p=i(p,m),p.return=d,d=p):(n(d,p),p=uc(m,d.mode,w),p.return=d,d=p),o(d);if(ga(m))return _(d,p,m,w);if(os(m))return v(d,p,m,w);if(x&&ma(d,m),typeof m=="undefined"&&!b)switch(d.tag){case 1:case 22:case 0:case 11:case 15:throw Error(U(152,yi(d.type)||"Component"))}return n(d,p)}}var hl=P_(!0),C_=P_(!1),Oo={},un=dr(Oo),lo=dr(Oo),uo=dr(Oo);function Ar(t){if(t===Oo)throw Error(U(174));return t}function gf(t,e){switch(Re(uo,e),Re(lo,t),Re(un,Oo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Qc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Qc(e,t)}we(un),Re(un,e)}function ki(){we(un),we(lo),we(uo)}function lg(t){Ar(uo.current);var e=Ar(un.current),n=Qc(e,t.type);e!==n&&(Re(lo,t),Re(un,n))}function Wh(t){lo.current===t&&(we(un),we(lo))}var Oe=dr(0);function dl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&64)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var En=null,Vn=null,cn=!1;function O_(t,e){var n=Nt(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function ug(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function mf(t){if(cn){var e=Vn;if(e){var n=e;if(!ug(t,e)){if(e=wi(n.nextSibling),!e||!ug(t,e)){t.flags=t.flags&-1025|2,cn=!1,En=t;return}O_(En,n)}En=t,Vn=wi(e.firstChild)}else t.flags=t.flags&-1025|2,cn=!1,En=t}}function cg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;En=t}function ya(t){if(t!==En)return!1;if(!cn)return cg(t),cn=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!cf(e,t.memoizedProps))for(e=Vn;e;)O_(t,e),e=wi(e.nextSibling);if(cg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vn=wi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vn=null}}else Vn=En?wi(t.stateNode.nextSibling):null;return!0}function sc(){Vn=En=null,cn=!1}var Ti=[];function Xh(){for(var t=0;t<Ti.length;t++)Ti[t]._workInProgressVersionPrimary=null;Ti.length=0}var js=$r.ReactCurrentDispatcher,Dt=$r.ReactCurrentBatchConfig,co=0,Me=null,et=null,Ze=null,pl=!1,Bs=!1;function ct(){throw Error(U(321))}function Yh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!kt(t[n],e[n]))return!1;return!0}function Zh(t,e,n,r,i,s){if(co=s,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,js.current=t===null||t.memoizedState===null?Kb:Qb,t=n(r,i),Bs){s=0;do{if(Bs=!1,!(25>s))throw Error(U(301));s+=1,Ze=et=null,e.updateQueue=null,js.current=Jb,t=n(r,i)}while(Bs)}if(js.current=_l,e=et!==null&&et.next!==null,co=0,Ze=et=Me=null,pl=!1,e)throw Error(U(300));return t}function Pr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Me.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function Hr(){if(et===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var e=Ze===null?Me.memoizedState:Ze.next;if(e!==null)Ze=e,et=t;else{if(t===null)throw Error(U(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Ze===null?Me.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function sn(t,e){return typeof e=="function"?e(t):e}function ds(t){var e=Hr(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=et,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){i=i.next,r=r.baseState;var a=o=s=null,l=i;do{var u=l.lane;if((co&u)===u)a!==null&&(a=a.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===t?l.eagerState:t(r,l.action);else{var c={lane:u,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};a===null?(o=a=c,s=r):a=a.next=c,Me.lanes|=u,Ro|=u}l=l.next}while(l!==null&&l!==i);a===null?s=r:a.next=o,kt(r,e.memoizedState)||(Wt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function ps(t){var e=Hr(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);kt(s,e.memoizedState)||(Wt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function fg(t,e,n){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?t=i===r:(t=t.mutableReadLanes,(t=(co&t)===t)&&(e._workInProgressVersionPrimary=r,Ti.push(e))),t)return n(e._source);throw Ti.push(e),Error(U(350))}function R_(t,e,n,r){var i=lt;if(i===null)throw Error(U(349));var s=e._getVersion,o=s(e._source),a=js.current,l=a.useState(function(){return fg(i,e,n)}),u=l[1],c=l[0];l=Ze;var f=t.memoizedState,h=f.refs,g=h.getSnapshot,_=f.source;f=f.subscribe;var v=Me;return t.memoizedState={refs:h,source:e,subscribe:r},a.useEffect(function(){h.getSnapshot=n,h.setSnapshot=u;var d=s(e._source);if(!kt(o,d)){d=n(e._source),kt(c,d)||(u(d),d=Zn(v),i.mutableReadLanes|=d&i.pendingLanes),d=i.mutableReadLanes,i.entangledLanes|=d;for(var p=i.entanglements,m=d;0<m;){var w=31-nr(m),b=1<<w;p[w]|=d,m&=~b}}},[n,e,r]),a.useEffect(function(){return r(e._source,function(){var d=h.getSnapshot,p=h.setSnapshot;try{p(d(e._source));var m=Zn(v);i.mutableReadLanes|=m&i.pendingLanes}catch(w){p(function(){throw w})}})},[e,r]),kt(g,n)&&kt(_,e)&&kt(f,r)||(t={pending:null,dispatch:null,lastRenderedReducer:sn,lastRenderedState:c},t.dispatch=u=Qh.bind(null,Me,t),l.queue=t,l.baseQueue=null,c=fg(i,e,n),l.memoizedState=l.baseState=c),c}function M_(t,e,n){var r=Hr();return R_(r,t,e,n)}function gs(t){var e=Pr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:sn,lastRenderedState:t},t=t.dispatch=Qh.bind(null,Me,t),[e.memoizedState,t]}function gl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function hg(t){var e=Pr();return t={current:t},e.memoizedState=t}function ml(){return Hr().memoizedState}function yf(t,e,n,r){var i=Pr();Me.flags|=t,i.memoizedState=gl(1|e,n,void 0,r===void 0?null:r)}function qh(t,e,n,r){var i=Hr();r=r===void 0?null:r;var s=void 0;if(et!==null){var o=et.memoizedState;if(s=o.destroy,r!==null&&Yh(r,o.deps)){gl(e,n,s,r);return}}Me.flags|=t,i.memoizedState=gl(1|e,n,s,r)}function dg(t,e){return yf(516,4,t,e)}function yl(t,e){return qh(516,4,t,e)}function I_(t,e){return qh(4,2,t,e)}function L_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function k_(t,e,n){return n=n!=null?n.concat([t]):null,qh(4,2,L_.bind(null,e,t),n)}function Kh(){}function N_(t,e){var n=Hr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function D_(t,e){var n=Hr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qb(t,e){var n=Li();kr(98>n?98:n,function(){t(!0)}),kr(97<n?97:n,function(){var r=Dt.transition;Dt.transition=1;try{t(!1),e()}finally{Dt.transition=r}})}function Qh(t,e,n){var r=At(),i=Zn(t),s={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=e.pending;if(o===null?s.next=s:(s.next=o.next,o.next=s),e.pending=s,o=t.alternate,t===Me||o!==null&&o===Me)Bs=pl=!0;else{if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,n);if(s.eagerReducer=o,s.eagerState=l,kt(l,a))return}catch{}finally{}qn(t,i,r)}}var _l={readContext:Ut,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useOpaqueIdentifier:ct,unstable_isNewReconciler:!1},Kb={readContext:Ut,useCallback:function(t,e){return Pr().memoizedState=[t,e===void 0?null:e],t},useContext:Ut,useEffect:dg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yf(4,2,L_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yf(4,2,t,e)},useMemo:function(t,e){var n=Pr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Pr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=Qh.bind(null,Me,t),[r.memoizedState,t]},useRef:hg,useState:gs,useDebugValue:Kh,useDeferredValue:function(t){var e=gs(t),n=e[0],r=e[1];return dg(function(){var i=Dt.transition;Dt.transition=1;try{r(t)}finally{Dt.transition=i}},[t]),n},useTransition:function(){var t=gs(!1),e=t[0];return t=qb.bind(null,t[1]),hg(t),[t,e]},useMutableSource:function(t,e,n){var r=Pr();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},R_(r,t,e,n)},useOpaqueIdentifier:function(){if(cn){var t=!1,e=Gb(function(){throw t||(t=!0,n("r:"+(nc++).toString(36))),Error(U(355))}),n=gs(e)[1];return(Me.mode&2)===0&&(Me.flags|=516,gl(5,function(){n("r:"+(nc++).toString(36))},void 0,null)),e}return e="r:"+(nc++).toString(36),gs(e),e},unstable_isNewReconciler:!1},Qb={readContext:Ut,useCallback:N_,useContext:Ut,useEffect:yl,useImperativeHandle:k_,useLayoutEffect:I_,useMemo:D_,useReducer:ds,useRef:ml,useState:function(){return ds(sn)},useDebugValue:Kh,useDeferredValue:function(t){var e=ds(sn),n=e[0],r=e[1];return yl(function(){var i=Dt.transition;Dt.transition=1;try{r(t)}finally{Dt.transition=i}},[t]),n},useTransition:function(){var t=ds(sn)[0];return[ml().current,t]},useMutableSource:M_,useOpaqueIdentifier:function(){return ds(sn)[0]},unstable_isNewReconciler:!1},Jb={readContext:Ut,useCallback:N_,useContext:Ut,useEffect:yl,useImperativeHandle:k_,useLayoutEffect:I_,useMemo:D_,useReducer:ps,useRef:ml,useState:function(){return ps(sn)},useDebugValue:Kh,useDeferredValue:function(t){var e=ps(sn),n=e[0],r=e[1];return yl(function(){var i=Dt.transition;Dt.transition=1;try{r(t)}finally{Dt.transition=i}},[t]),n},useTransition:function(){var t=ps(sn)[0];return[ml().current,t]},useMutableSource:M_,useOpaqueIdentifier:function(){return ps(sn)[0]},unstable_isNewReconciler:!1},eT=$r.ReactCurrentOwner,Wt=!1;function ft(t,e,n,r){e.child=t===null?C_(e,null,n,r):hl(e,t.child,n,r)}function pg(t,e,n,r,i){n=n.render;var s=e.ref;return bi(e,i),r=Zh(t,e,n,r,s,i),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,wn(t,e,i)):(e.flags|=1,ft(t,e,r,i),e.child)}function gg(t,e,n,r,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!id(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,F_(t,e,o,r,i,s)):(t=$a(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}return o=t.child,(i&s)===0&&(i=o.memoizedProps,n=n.compare,n=n!==null?n:io,n(i,r)&&t.ref===e.ref)?wn(t,e,s):(e.flags|=1,t=sr(o,r),t.ref=e.ref,t.return=e,e.child=t)}function F_(t,e,n,r,i,s){if(t!==null&&io(t.memoizedProps,r)&&t.ref===e.ref)if(Wt=!1,(s&i)!==0)(t.flags&16384)!==0&&(Wt=!0);else return e.lanes=t.lanes,wn(t,e,s);return _f(t,e,n,r,s)}function oc(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden"||r.mode==="unstable-defer-without-hiding")if((e.mode&4)===0)e.memoizedState={baseLanes:0},va(e,n);else if((n&1073741824)!==0)e.memoizedState={baseLanes:0},va(e,s!==null?s.baseLanes:n);else return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},va(e,t),null;else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,va(e,r);return ft(t,e,i,n),e.child}function U_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=128)}function _f(t,e,n,r,i){var s=pt(n)?Lr:it.current;return s=Ii(e,s),bi(e,i),n=Zh(t,e,n,r,s,i),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,wn(t,e,i)):(e.flags|=1,ft(t,e,n,i),e.child)}function mg(t,e,n,r,i){if(pt(n)){var s=!0;Ua(e)}else s=!1;if(bi(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),A_(e,n,r),pf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ut(u):(u=pt(n)?Lr:it.current,u=Ii(e,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&ag(e,o,r,u),Dn=!1;var h=e.memoizedState;o.state=h,ao(e,r,o,i),l=e.memoizedState,a!==r||h!==l||dt.current||Dn?(typeof c=="function"&&(fl(e,n,c,r),l=e.memoizedState),(a=Dn||og(e,n,a,r,h,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4)):(typeof o.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4),r=!1)}else{o=e.stateNode,S_(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Gt(e.type,a),o.props=u,f=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ut(l):(l=pt(n)?Lr:it.current,l=Ii(e,l));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==l)&&ag(e,o,r,l),Dn=!1,h=e.memoizedState,o.state=h,ao(e,r,o,i);var _=e.memoizedState;a!==f||h!==_||dt.current||Dn?(typeof g=="function"&&(fl(e,n,g,r),_=e.memoizedState),(u=Dn||og(e,n,u,r,h,_,l))?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=256),r=!1)}return vf(t,e,n,r,s,i)}function vf(t,e,n,r,i,s){U_(t,e);var o=(e.flags&64)!==0;if(!r&&!o)return i&&tg(e,n,!1),wn(t,e,s);r=e.stateNode,eT.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=hl(e,t.child,null,s),e.child=hl(e,null,a,s)):ft(t,e,a,s),e.memoizedState=r.state,i&&tg(e,n,!0),e.child}function yg(t){var e=t.stateNode;e.pendingContext?eg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&eg(t,e.context,!1),gf(t,e.containerInfo)}var _a={dehydrated:null,retryLane:0};function _g(t,e,n){var r=e.pendingProps,i=Oe.current,s=!1,o;return(o=(e.flags&64)!==0)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-65):t!==null&&t.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(i|=1),Re(Oe,i&1),t===null?(r.fallback!==void 0&&mf(e),t=r.children,i=r.fallback,s?(t=vg(e,t,i,n),e.child.memoizedState={baseLanes:n},e.memoizedState=_a,t):typeof r.unstable_expectedLoadTime=="number"?(t=vg(e,t,i,n),e.child.memoizedState={baseLanes:n},e.memoizedState=_a,e.lanes=33554432,t):(n=sd({mode:"visible",children:t},e.mode,n,null),n.return=e,e.child=n)):t.memoizedState!==null?s?(r=wg(t,e,r.children,r.fallback,n),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?{baseLanes:n}:{baseLanes:i.baseLanes|n},s.childLanes=t.childLanes&~n,e.memoizedState=_a,r):(n=Eg(t,e,r.children,n),e.memoizedState=null,n):s?(r=wg(t,e,r.children,r.fallback,n),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?{baseLanes:n}:{baseLanes:i.baseLanes|n},s.childLanes=t.childLanes&~n,e.memoizedState=_a,r):(n=Eg(t,e,r.children,n),e.memoizedState=null,n)}function vg(t,e,n,r){var i=t.mode,s=t.child;return e={mode:"hidden",children:e},(i&2)===0&&s!==null?(s.childLanes=0,s.pendingProps=e):s=sd(e,i,0,null),n=Ai(n,i,r,null),s.return=t,n.return=t,s.sibling=n,t.child=s,n}function Eg(t,e,n,r){var i=t.child;return t=i.sibling,n=sr(i,{mode:"visible",children:n}),(e.mode&2)===0&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function wg(t,e,n,r,i){var s=e.mode,o=t.child;t=o.sibling;var a={mode:"hidden",children:n};return(s&2)===0&&e.child!==o?(n=e.child,n.childLanes=0,n.pendingProps=a,o=n.lastEffect,o!==null?(e.firstEffect=n.firstEffect,e.lastEffect=o,o.nextEffect=null):e.firstEffect=e.lastEffect=null):n=sr(o,a),t!==null?r=sr(t,r):(r=Ai(r,s,i,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,r}function bg(t,e){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),T_(t.return,e)}function ac(t,e,n,r,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=s)}function Tg(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ft(t,e,r.children,n),r=Oe.current,(r&2)!==0)r=r&1|2,e.flags|=64;else{if(t!==null&&(t.flags&64)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bg(t,n);else if(t.tag===19)bg(t,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Re(Oe,r),(e.mode&2)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&dl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ac(e,!1,i,n,s,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&dl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ac(e,!0,n,null,s,e.lastEffect);break;case"together":ac(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ro|=e.lanes,(n&e.childLanes)!==0){if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=sr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=sr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}return null}var j_,Ef,B_,z_;j_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ef=function(){};B_=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ar(un.current);var s=null;switch(n){case"input":i=Wc(t,i),r=Wc(t,r),s=[];break;case"option":i=Zc(t,i),r=Zc(t,r),s=[];break;case"select":i=Se({},i,{value:void 0}),r=Se({},r,{value:void 0}),s=[];break;case"textarea":i=qc(t,i),r=qc(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sl)}Jc(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ks.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ks.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ee("scroll",t),s||a===l||(s=[])):typeof l=="object"&&l!==null&&l.$$typeof===xh?l.toString():(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};z_=function(t,e,n,r){n!==r&&(e.flags|=4)};function ms(t,e){if(!cn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tT(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return pt(e.type)&&al(),null;case 3:return ki(),we(dt),we(it),Xh(),r=e.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ya(e)?e.flags|=4:r.hydrate||(e.flags|=256)),Ef(e),null;case 5:Wh(e);var i=Ar(uo.current);if(n=e.type,t!==null&&e.stateNode!=null)B_(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(e.stateNode===null)throw Error(U(166));return null}if(t=Ar(un.current),ya(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[zn]=e,r[ol]=s,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(t=0;t<xs.length;t++)Ee(xs[t],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":Tp(r,s),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ee("invalid",r);break;case"textarea":xp(r,s),Ee("invalid",r)}Jc(n,s),t=null;for(var o in s)s.hasOwnProperty(o)&&(i=s[o],o==="children"?typeof i=="string"?r.textContent!==i&&(t=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(t=["children",""+i]):Ks.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&Ee("scroll",r));switch(n){case"input":fa(r),Sp(r,s,!0);break;case"textarea":fa(r),Ap(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=sl)}r=t,e.updateQueue=r,r!==null&&(e.flags|=4)}else{switch(o=i.nodeType===9?i:i.ownerDocument,t===Kc.html&&(t=ky(n)),t===Kc.html?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[zn]=e,t[ol]=r,j_(t,e,!1,!1),e.stateNode=t,o=ef(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),i=r;break;case"iframe":case"object":case"embed":Ee("load",t),i=r;break;case"video":case"audio":for(i=0;i<xs.length;i++)Ee(xs[i],t);i=r;break;case"source":Ee("error",t),i=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),i=r;break;case"details":Ee("toggle",t),i=r;break;case"input":Tp(t,r),i=Wc(t,r),Ee("invalid",t);break;case"option":i=Zc(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Se({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":xp(t,r),i=qc(t,r),Ee("invalid",t);break;default:i=r}Jc(n,i);var a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Fy(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ny(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Qs(t,l):typeof l=="number"&&Qs(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ks.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ee("scroll",t):l!=null&&vh(t,s,l,o))}switch(n){case"input":fa(t),Sp(t,r,!1);break;case"textarea":fa(t),Ap(t);break;case"option":r.value!=null&&t.setAttribute("value",""+tr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?_i(t,!!r.multiple,s,!1):r.defaultValue!=null&&_i(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=sl)}p_(n,r)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)z_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));n=Ar(uo.current),Ar(un.current),ya(e)?(r=e.stateNode,n=e.memoizedProps,r[zn]=e,r.nodeValue!==n&&(e.flags|=4)):(r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zn]=e,e.stateNode=r)}return null;case 13:return we(Oe),r=e.memoizedState,(e.flags&64)!==0?(e.lanes=n,e):(r=r!==null,n=!1,t===null?e.memoizedProps.fallback!==void 0&&ya(e):n=t.memoizedState!==null,r&&!n&&(e.mode&2)!==0&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||(Oe.current&1)!==0?qe===0&&(qe=3):((qe===0||qe===3)&&(qe=4),lt===null||(Ro&134217727)===0&&(qi&134217727)===0||Si(lt,rt))),(r||n)&&(e.flags|=4),null);case 4:return ki(),Ef(e),t===null&&f_(e.stateNode.containerInfo),null;case 10:return Gh(e),null;case 17:return pt(e.type)&&al(),null;case 19:if(we(Oe),r=e.memoizedState,r===null)return null;if(s=(e.flags&64)!==0,o=r.rendering,o===null)if(s)ms(r,!1);else{if(qe!==0||t!==null&&(t.flags&64)!==0)for(t=e.child;t!==null;){if(o=dl(t),o!==null){for(e.flags|=64,ms(r,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),r.lastEffect===null&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Re(Oe,Oe.current&1|2),e.child}t=t.sibling}r.tail!==null&&nt()>Af&&(e.flags|=64,s=!0,ms(r,!1),e.lanes=33554432)}else{if(!s)if(t=dl(o),t!==null){if(e.flags|=64,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ms(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!cn)return e=e.lastEffect=r.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*nt()-r.renderingStartTime>Af&&n!==1073741824&&(e.flags|=64,s=!0,ms(r,!1),e.lanes=33554432);r.isBackwards?(o.sibling=e.child,e.child=o):(n=r.last,n!==null?n.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=nt(),n.sibling=null,e=Oe.current,Re(Oe,s?e&1|2:e&1),n):null;case 23:case 24:return rd(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&r.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(U(156,e.tag))}function nT(t){switch(t.tag){case 1:pt(t.type)&&al();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(ki(),we(dt),we(it),Xh(),e=t.flags,(e&64)!==0)throw Error(U(285));return t.flags=e&-4097|64,t;case 5:return Wh(t),null;case 13:return we(Oe),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return we(Oe),null;case 4:return ki(),null;case 10:return Gh(t),null;case 23:case 24:return rd(),null;default:return null}}function Jh(t,e){try{var n="",r=e;do n+=Dw(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i}}function wf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var rT=typeof WeakMap=="function"?WeakMap:Map;function V_(t,e,n){n=Xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){El||(El=!0,Pf=r),wf(t,e)},n}function $_(t,e,n){n=Xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return wf(t,e),r(i)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){typeof r!="function"&&(on===null?on=new Set([this]):on.add(this),wf(t,e));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}var iT=typeof WeakSet=="function"?WeakSet:Set;function Sg(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){Kn(t,n)}else e.current=null}function sT(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var n=t.memoizedProps,r=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?n:Gt(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&Bh(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(U(163))}function oT(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(e=n.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)===3){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(e=n.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var i=t;r=i.next,i=i.tag,(i&4)!==0&&(i&1)!==0&&(Q_(n,t),pT(n,t)),t=r}while(t!==e)}return;case 1:t=n.stateNode,n.flags&4&&(e===null?t.componentDidMount():(r=n.elementType===n.type?e.memoizedProps:Gt(n.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=n.updateQueue,e!==null&&sg(n,e,t);return;case 3:if(e=n.updateQueue,e!==null){if(t=null,n.child!==null)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}sg(n,e,t)}return;case 5:t=n.stateNode,e===null&&n.flags&4&&p_(n.type,n.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&Xy(n))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(U(163))}function xg(t,e){for(var n=t;;){if(n.tag===5){var r=n.stateNode;if(e)r=r.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,r.style.display=Dy("display",i)}}else if(n.tag===6)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((n.tag!==23&&n.tag!==24||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function Ag(t,e){if(Mr&&typeof Mr.onCommitFiberUnmount=="function")try{Mr.onCommitFiberUnmount(zh,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var n=t=t.next;do{var r=n,i=r.destroy;if(r=r.tag,i!==void 0)if((r&4)!==0)Q_(e,n);else{r=e;try{i()}catch(s){Kn(r,s)}}n=n.next}while(n!==t)}break;case 1:if(Sg(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(s){Kn(e,s)}break;case 5:Sg(e);break;case 4:G_(t,e)}}function Pg(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function Cg(t){return t.tag===5||t.tag===3||t.tag===4}function Og(t){e:{for(var e=t.return;e!==null;){if(Cg(e))break e;e=e.return}throw Error(U(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:e=e.containerInfo,r=!0;break;case 4:e=e.containerInfo,r=!0;break;default:throw Error(U(161))}n.flags&16&&(Qs(e,""),n.flags&=-17);e:t:for(n=t;;){for(;n.sibling===null;){if(n.return===null||Cg(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}r?bf(t,n,e):Tf(t,n,e)}function bf(t,e,n){var r=t.tag,i=r===5||r===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sl));else if(r!==4&&(t=t.child,t!==null))for(bf(t,e,n),t=t.sibling;t!==null;)bf(t,e,n),t=t.sibling}function Tf(t,e,n){var r=t.tag,i=r===5||r===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Tf(t,e,n),t=t.sibling;t!==null;)Tf(t,e,n),t=t.sibling}function G_(t,e){for(var n=e,r=!1,i,s;;){if(!r){r=n.return;e:for(;;){if(r===null)throw Error(U(160));switch(i=r.stateNode,r.tag){case 5:s=!1;break e;case 3:i=i.containerInfo,s=!0;break e;case 4:i=i.containerInfo,s=!0;break e}r=r.return}r=!0}if(n.tag===5||n.tag===6){e:for(var o=t,a=n,l=a;;)if(Ag(o,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}s?(o=i,a=n.stateNode,o.nodeType===8?o.parentNode.removeChild(a):o.removeChild(a)):i.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){i=n.stateNode.containerInfo,s=!0,n.child.return=n,n=n.child;continue}}else if(Ag(t,n),n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return,n.tag===4&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}function lc(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do(r.tag&3)===3&&(t=r.destroy,r.destroy=void 0,t!==void 0&&t()),r=r.next;while(r!==n)}return;case 1:return;case 5:if(n=e.stateNode,n!=null){r=e.memoizedProps;var i=t!==null?t.memoizedProps:r;t=e.type;var s=e.updateQueue;if(e.updateQueue=null,s!==null){for(n[ol]=r,t==="input"&&r.type==="radio"&&r.name!=null&&Iy(n,r),ef(t,i),e=ef(t,r),i=0;i<s.length;i+=2){var o=s[i],a=s[i+1];o==="style"?Fy(n,a):o==="dangerouslySetInnerHTML"?Ny(n,a):o==="children"?Qs(n,a):vh(n,o,a,e)}switch(t){case"input":Xc(n,r);break;case"textarea":Ly(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,s=r.value,s!=null?_i(n,!!r.multiple,s,!1):t!==!!r.multiple&&(r.defaultValue!=null?_i(n,!!r.multiple,r.defaultValue,!0):_i(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(U(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:n=e.stateNode,n.hydrate&&(n.hydrate=!1,Xy(n.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(nd=nt(),xg(e.child,!0)),Rg(e);return;case 19:Rg(e);return;case 17:return;case 23:case 24:xg(e,e.memoizedState!==null);return}throw Error(U(163))}function Rg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iT),e.forEach(function(r){var i=yT.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function aT(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var lT=Math.ceil,vl=$r.ReactCurrentDispatcher,ed=$r.ReactCurrentOwner,ne=0,lt=null,De=null,rt=0,Nr=0,Sf=dr(0),qe=0,su=null,Zi=0,Ro=0,qi=0,td=0,xf=null,nd=0,Af=1/0;function Ki(){Af=nt()+500}var H=null,El=!1,Pf=null,on=null,ir=!1,zs=null,As=90,Cf=[],Of=[],bn=null,Vs=0,Rf=null,Ba=-1,_n=0,za=0,$s=null,Va=!1;function At(){return(ne&48)!==0?nt():Ba!==-1?Ba:Ba=nt()}function Zn(t){if(t=t.mode,(t&2)===0)return 1;if((t&4)===0)return Li()===99?1:2;if(_n===0&&(_n=Zi),Zb.transition!==0){za!==0&&(za=xf!==null?xf.pendingLanes:0),t=_n;var e=4186112&~za;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=Li(),(ne&4)!==0&&t===98?t=rl(12,_n):(t=Qw(t),t=rl(t,_n)),t}function qn(t,e,n){if(50<Vs)throw Vs=0,Rf=null,Error(U(185));if(t=ou(t,e),t===null)return null;Ql(t,e,n),t===lt&&(qi|=e,qe===4&&Si(t,rt));var r=Li();e===1?(ne&8)!==0&&(ne&48)===0?Mf(t):(jt(t,n),ne===0&&(Ki(),hn())):((ne&4)===0||r!==98&&r!==99||(bn===null?bn=new Set([t]):bn.add(t)),jt(t,n)),xf=t}function ou(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}function jt(t,e){for(var n=t.callbackNode,r=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-nr(o),l=1<<a,u=s[a];if(u===-1){if((l&r)===0||(l&i)!==0){u=e,ii(l);var c=ye;s[a]=10<=c?u+250:6<=c?u+5e3:-1}}else u<=e&&(t.expiredLanes|=l);o&=~l}if(r=no(t,t===lt?rt:0),e=ye,r===0)n!==null&&(n!==rc&&hf(n),t.callbackNode=null,t.callbackPriority=0);else{if(n!==null){if(t.callbackPriority===e)return;n!==rc&&hf(n)}e===15?(n=Mf.bind(null,t),yn===null?(yn=[n],ja=Vh(ru,b_)):yn.push(n),n=rc):e===14?n=oo(99,Mf.bind(null,t)):(n=Jw(e),n=oo(n,H_.bind(null,t))),t.callbackPriority=e,t.callbackNode=n}}function H_(t){if(Ba=-1,za=_n=0,(ne&48)!==0)throw Error(U(327));var e=t.callbackNode;if(pr()&&t.callbackNode!==e)return null;var n=no(t,t===lt?rt:0);if(n===0)return null;var r=n,i=ne;ne|=16;var s=Z_();(lt!==t||rt!==r)&&(Ki(),xi(t,r));do try{fT();break}catch(a){Y_(t,a)}while(1);if($h(),vl.current=s,ne=i,De!==null?r=0:(lt=null,rt=0,r=qe),(Zi&qi)!==0)xi(t,0);else if(r!==0){if(r===2&&(ne|=64,t.hydrate&&(t.hydrate=!1,Bh(t.containerInfo)),n=e_(t),n!==0&&(r=Ps(t,n))),r===1)throw e=su,xi(t,0),Si(t,n),jt(t,nt()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(U(345));case 2:Er(t);break;case 3:if(Si(t,n),(n&62914560)===n&&(r=nd+500-nt(),10<r)){if(no(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){At(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Kp(Er.bind(null,t),r);break}Er(t);break;case 4:if(Si(t,n),(n&4186112)===n)break;for(r=t.eventTimes,i=-1;0<n;){var o=31-nr(n);s=1<<o,o=r[o],o>i&&(i=o),n&=~s}if(n=i,n=nt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*lT(n/1960))-n,10<n){t.timeoutHandle=Kp(Er.bind(null,t),n);break}Er(t);break;case 5:Er(t);break;default:throw Error(U(329))}}return jt(t,nt()),t.callbackNode===e?H_.bind(null,t):null}function Si(t,e){for(e&=~td,e&=~qi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-nr(e),r=1<<n;t[n]=-1,e&=~r}}function Mf(t){if((ne&48)!==0)throw Error(U(327));if(pr(),t===lt&&(t.expiredLanes&rt)!==0){var e=rt,n=Ps(t,e);(Zi&qi)!==0&&(e=no(t,e),n=Ps(t,e))}else e=no(t,0),n=Ps(t,e);if(t.tag!==0&&n===2&&(ne|=64,t.hydrate&&(t.hydrate=!1,Bh(t.containerInfo)),e=e_(t),e!==0&&(n=Ps(t,e))),n===1)throw n=su,xi(t,0),Si(t,e),jt(t,nt()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Er(t),jt(t,nt()),null}function uT(){if(bn!==null){var t=bn;bn=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,jt(e,nt())})}hn()}function W_(t,e){var n=ne;ne|=1;try{return t(e)}finally{ne=n,ne===0&&(Ki(),hn())}}function X_(t,e){var n=ne;ne&=-2,ne|=8;try{return t(e)}finally{ne=n,ne===0&&(Ki(),hn())}}function va(t,e){Re(Sf,Nr),Nr|=e,Zi|=e}function rd(){Nr=Sf.current,we(Sf)}function xi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$b(n)),De!==null)for(n=De.return;n!==null;){var r=n;switch(r.tag){case 1:r=r.type.childContextTypes,r!=null&&al();break;case 3:ki(),we(dt),we(it),Xh();break;case 5:Wh(r);break;case 4:ki();break;case 13:we(Oe);break;case 19:we(Oe);break;case 10:Gh(r);break;case 23:case 24:rd()}n=n.return}lt=t,De=sr(t.current,null),rt=Nr=Zi=e,qe=0,su=null,td=qi=Ro=0}function Y_(t,e){do{var n=De;try{if($h(),js.current=_l,pl){for(var r=Me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}pl=!1}if(co=0,Ze=et=Me=null,Bs=!1,ed.current=null,n===null||n.return===null){qe=1,su=e,De=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=rt,a.flags|=2048,a.firstEffect=a.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l;if((a.mode&2)===0){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.lanes=c.lanes):(a.updateQueue=null,a.memoizedState=null)}var f=(Oe.current&1)!==0,h=o;do{var g;if(g=h.tag===13){var _=h.memoizedState;if(_!==null)g=_.dehydrated!==null;else{var v=h.memoizedProps;g=v.fallback===void 0?!1:v.unstable_avoidThisFallback!==!0?!0:!f}}if(g){var d=h.updateQueue;if(d===null){var p=new Set;p.add(u),h.updateQueue=p}else d.add(u);if((h.mode&2)===0){if(h.flags|=64,a.flags|=16384,a.flags&=-2981,a.tag===1)if(a.alternate===null)a.tag=17;else{var m=Xn(-1,1);m.tag=2,Yn(a,m)}a.lanes|=1;break e}l=void 0,a=e;var w=s.pingCache;if(w===null?(w=s.pingCache=new rT,l=new Set,w.set(u,l)):(l=w.get(u),l===void 0&&(l=new Set,w.set(u,l))),!l.has(a)){l.add(a);var b=mT.bind(null,s,u,a);u.then(b,b)}h.flags|=4096,h.lanes=e;break e}h=h.return}while(h!==null);l=Error((yi(a.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}qe!==5&&(qe=2),l=Jh(l,a),h=o;do{switch(h.tag){case 3:s=l,h.flags|=4096,e&=-e,h.lanes|=e;var x=V_(h,s,e);ig(h,x);break e;case 1:s=l;var S=h.type,O=h.stateNode;if((h.flags&64)===0&&(typeof S.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(on===null||!on.has(O)))){h.flags|=4096,e&=-e,h.lanes|=e;var R=$_(h,s,e);ig(h,R);break e}}h=h.return}while(h!==null)}K_(n)}catch(M){e=M,De===n&&n!==null&&(De=n=n.return);continue}break}while(1)}function Z_(){var t=vl.current;return vl.current=_l,t===null?_l:t}function Ps(t,e){var n=ne;ne|=16;var r=Z_();lt===t&&rt===e||xi(t,e);do try{cT();break}catch(i){Y_(t,i)}while(1);if($h(),ne=n,vl.current=r,De!==null)throw Error(U(261));return lt=null,rt=0,qe}function cT(){for(;De!==null;)q_(De)}function fT(){for(;De!==null&&!Wb();)q_(De)}function q_(t){var e=J_(t.alternate,t,Nr);t.memoizedProps=t.pendingProps,e===null?K_(t):De=e,ed.current=null}function K_(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&2048)===0){if(n=tT(n,e,Nr),n!==null){De=n;return}if(n=e,n.tag!==24&&n.tag!==23||n.memoizedState===null||(Nr&1073741824)!==0||(n.mode&4)===0){for(var r=0,i=n.child;i!==null;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}t!==null&&(t.flags&2048)===0&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(n=nT(e),n!==null){n.flags&=2047,De=n;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(e=e.sibling,e!==null){De=e;return}De=e=t}while(e!==null);qe===0&&(qe=5)}function Er(t){var e=Li();return kr(99,hT.bind(null,t,e)),null}function hT(t,e){do pr();while(zs!==null);if((ne&48)!==0)throw Error(U(327));var n=t.finishedWork;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null;var r=n.lanes|n.childLanes,i=r,s=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var o=t.eventTimes,a=t.expirationTimes;0<s;){var l=31-nr(s),u=1<<l;i[l]=0,o[l]=-1,a[l]=-1,s&=~u}if(bn!==null&&(r&24)===0&&bn.has(t)&&bn.delete(t),t===lt&&(De=lt=null,rt=0),1<n.flags?n.lastEffect!==null?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,r!==null){if(i=ne,ne|=32,ed.current=null,ec=Na,o=Gp(),af(o)){if("selectionStart"in o)a={start:o.selectionStart,end:o.selectionEnd};else e:if(a=(a=o.ownerDocument)&&a.defaultView||window,(u=a.getSelection&&a.getSelection())&&u.rangeCount!==0){a=u.anchorNode,s=u.anchorOffset,l=u.focusNode,u=u.focusOffset;try{a.nodeType,l.nodeType}catch{a=null;break e}var c=0,f=-1,h=-1,g=0,_=0,v=o,d=null;t:for(;;){for(var p;v!==a||s!==0&&v.nodeType!==3||(f=c+s),v!==l||u!==0&&v.nodeType!==3||(h=c+u),v.nodeType===3&&(c+=v.nodeValue.length),(p=v.firstChild)!==null;)d=v,v=p;for(;;){if(v===o)break t;if(d===a&&++g===s&&(f=c),d===l&&++_===u&&(h=c),(p=v.nextSibling)!==null)break;v=d,d=v.parentNode}v=p}a=f===-1||h===-1?null:{start:f,end:h}}else a=null;a=a||{start:0,end:0}}else a=null;tc={focusedElem:o,selectionRange:a},Na=!1,$s=null,Va=!1,H=r;do try{dT()}catch(M){if(H===null)throw Error(U(330));Kn(H,M),H=H.nextEffect}while(H!==null);$s=null,H=r;do try{for(o=t;H!==null;){var m=H.flags;if(m&16&&Qs(H.stateNode,""),m&128){var w=H.alternate;if(w!==null){var b=w.ref;b!==null&&(typeof b=="function"?b(null):b.current=null)}}switch(m&1038){case 2:Og(H),H.flags&=-3;break;case 6:Og(H),H.flags&=-3,lc(H.alternate,H);break;case 1024:H.flags&=-1025;break;case 1028:H.flags&=-1025,lc(H.alternate,H);break;case 4:lc(H.alternate,H);break;case 8:a=H,G_(o,a);var x=a.alternate;Pg(a),x!==null&&Pg(x)}H=H.nextEffect}}catch(M){if(H===null)throw Error(U(330));Kn(H,M),H=H.nextEffect}while(H!==null);if(b=tc,w=Gp(),m=b.focusedElem,o=b.selectionRange,w!==m&&m&&m.ownerDocument&&l_(m.ownerDocument.documentElement,m)){for(o!==null&&af(m)&&(w=o.start,b=o.end,b===void 0&&(b=w),"selectionStart"in m?(m.selectionStart=w,m.selectionEnd=Math.min(b,m.value.length)):(b=(w=m.ownerDocument||document)&&w.defaultView||window,b.getSelection&&(b=b.getSelection(),a=m.textContent.length,x=Math.min(o.start,a),o=o.end===void 0?x:Math.min(o.end,a),!b.extend&&x>o&&(a=o,o=x,x=a),a=$p(m,x),s=$p(m,o),a&&s&&(b.rangeCount!==1||b.anchorNode!==a.node||b.anchorOffset!==a.offset||b.focusNode!==s.node||b.focusOffset!==s.offset)&&(w=w.createRange(),w.setStart(a.node,a.offset),b.removeAllRanges(),x>o?(b.addRange(w),b.extend(s.node,s.offset)):(w.setEnd(s.node,s.offset),b.addRange(w)))))),w=[],b=m;b=b.parentNode;)b.nodeType===1&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<w.length;m++)b=w[m],b.element.scrollLeft=b.left,b.element.scrollTop=b.top}Na=!!ec,tc=ec=null,t.current=n,H=r;do try{for(m=t;H!==null;){var S=H.flags;if(S&36&&oT(m,H.alternate,H),S&128){w=void 0;var O=H.ref;if(O!==null){var R=H.stateNode;switch(H.tag){case 5:w=R;break;default:w=R}typeof O=="function"?O(w):O.current=w}}H=H.nextEffect}}catch(M){if(H===null)throw Error(U(330));Kn(H,M),H=H.nextEffect}while(H!==null);H=null,Yb(),ne=i}else t.current=n;if(ir)ir=!1,zs=t,As=e;else for(H=r;H!==null;)e=H.nextEffect,H.nextEffect=null,H.flags&8&&(S=H,S.sibling=null,S.stateNode=null),H=e;if(r=t.pendingLanes,r===0&&(on=null),r===1?t===Rf?Vs++:(Vs=0,Rf=t):Vs=0,n=n.stateNode,Mr&&typeof Mr.onCommitFiberRoot=="function")try{Mr.onCommitFiberRoot(zh,n,void 0,(n.current.flags&64)===64)}catch{}if(jt(t,nt()),El)throw El=!1,t=Pf,Pf=null,t;return(ne&8)!==0||hn(),null}function dT(){for(;H!==null;){var t=H.alternate;Va||$s===null||((H.flags&8)!==0?Op(H,$s)&&(Va=!0):H.tag===13&&aT(t,H)&&Op(H,$s)&&(Va=!0));var e=H.flags;(e&256)!==0&&sT(t,H),(e&512)===0||ir||(ir=!0,oo(97,function(){return pr(),null})),H=H.nextEffect}}function pr(){if(As!==90){var t=97<As?97:As;return As=90,kr(t,gT)}return!1}function pT(t,e){Cf.push(e,t),ir||(ir=!0,oo(97,function(){return pr(),null}))}function Q_(t,e){Of.push(e,t),ir||(ir=!0,oo(97,function(){return pr(),null}))}function gT(){if(zs===null)return!1;var t=zs;if(zs=null,(ne&48)!==0)throw Error(U(331));var e=ne;ne|=32;var n=Of;Of=[];for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1],o=i.destroy;if(i.destroy=void 0,typeof o=="function")try{o()}catch(l){if(s===null)throw Error(U(330));Kn(s,l)}}for(n=Cf,Cf=[],r=0;r<n.length;r+=2){i=n[r],s=n[r+1];try{var a=i.create;i.destroy=a()}catch(l){if(s===null)throw Error(U(330));Kn(s,l)}}for(a=t.current.firstEffect;a!==null;)t=a.nextEffect,a.nextEffect=null,a.flags&8&&(a.sibling=null,a.stateNode=null),a=t;return ne=e,hn(),!0}function Mg(t,e,n){e=Jh(n,e),e=V_(t,e,1),Yn(t,e),e=At(),t=ou(t,1),t!==null&&(Ql(t,1,e),jt(t,e))}function Kn(t,e){if(t.tag===3)Mg(t,t,e);else for(var n=t.return;n!==null;){if(n.tag===3){Mg(n,t,e);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(on===null||!on.has(r))){t=Jh(e,t);var i=$_(n,t,1);if(Yn(n,i),i=At(),n=ou(n,1),n!==null)Ql(n,1,i),jt(n,i);else if(typeof r.componentDidCatch=="function"&&(on===null||!on.has(r)))try{r.componentDidCatch(e,t)}catch{}break}}n=n.return}}function mT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=At(),t.pingedLanes|=t.suspendedLanes&n,lt===t&&(rt&n)===n&&(qe===4||qe===3&&(rt&62914560)===rt&&500>nt()-nd?xi(t,0):td|=n),jt(t,e)}function yT(t,e){var n=t.stateNode;n!==null&&n.delete(e),e=0,e===0&&(e=t.mode,(e&2)===0?e=1:(e&4)===0?e=Li()===99?1:2:(_n===0&&(_n=Zi),e=si(62914560&~_n),e===0&&(e=4194304))),n=At(),t=ou(t,e),t!==null&&(Ql(t,e,n),jt(t,n))}var J_;J_=function(t,e,n){var r=e.lanes;if(t!==null)if(t.memoizedProps!==e.pendingProps||dt.current)Wt=!0;else if((n&r)!==0)Wt=(t.flags&16384)!==0;else{switch(Wt=!1,e.tag){case 3:yg(e),sc();break;case 5:lg(e);break;case 1:pt(e.type)&&Ua(e);break;case 4:gf(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;Re(ll,i._currentValue),i._currentValue=r;break;case 13:if(e.memoizedState!==null)return(n&e.child.childLanes)!==0?_g(t,e,n):(Re(Oe,Oe.current&1),e=wn(t,e,n),e!==null?e.sibling:null);Re(Oe,Oe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&64)!==0){if(r)return Tg(t,e,n);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Re(Oe,Oe.current),r)break;return null;case 23:case 24:return e.lanes=0,oc(t,e,n)}return wn(t,e,n)}else Wt=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=Ii(e,it.current),bi(e,n),i=Zh(null,e,r,t,i,n),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,pt(r)){var s=!0;Ua(e)}else s=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Hh(e);var o=r.getDerivedStateFromProps;typeof o=="function"&&fl(e,r,o,t),i.updater=iu,e.stateNode=i,i._reactInternals=e,pf(e,r,t,n),e=vf(null,e,r,!0,s,n)}else e.tag=0,ft(null,e,i,n),e=e.child;return e;case 16:i=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=vT(i),t=Gt(i,t),s){case 0:e=_f(null,e,i,t,n);break e;case 1:e=mg(null,e,i,t,n);break e;case 11:e=pg(null,e,i,t,n);break e;case 14:e=gg(null,e,i,Gt(i.type,t),r,n);break e}throw Error(U(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),_f(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),mg(t,e,r,i,n);case 3:if(yg(e),r=e.updateQueue,t===null||r===null)throw Error(U(282));if(r=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,S_(t,e),ao(e,r,null,n),r=e.memoizedState.element,r===i)sc(),e=wn(t,e,n);else{if(i=e.stateNode,(s=i.hydrate)&&(Vn=wi(e.stateNode.containerInfo.firstChild),En=e,s=cn=!0),s){if(t=i.mutableSourceEagerHydrationData,t!=null)for(i=0;i<t.length;i+=2)s=t[i],s._workInProgressVersionPrimary=t[i+1],Ti.push(s);for(n=C_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|1024,n=n.sibling}else ft(t,e,r,n),sc();e=e.child}return e;case 5:return lg(e),t===null&&mf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,cf(r,i)?o=null:s!==null&&cf(r,s)&&(e.flags|=16),U_(t,e),ft(t,e,o,n),e.child;case 6:return t===null&&mf(e),null;case 13:return _g(t,e,n);case 4:return gf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=hl(e,null,r,n):ft(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),pg(t,e,r,i,n);case 7:return ft(t,e,e.pendingProps,n),e.child;case 8:return ft(t,e,e.pendingProps.children,n),e.child;case 12:return ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value;var a=e.type._context;if(Re(ll,a._currentValue),a._currentValue=s,o!==null)if(a=o.value,s=kt(a,s)?0:(typeof r._calculateChangedBits=="function"?r._calculateChangedBits(a,s):1073741823)|0,s===0){if(o.children===i.children&&!dt.current){e=wn(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===r&&(u.observedBits&s)!==0){a.tag===1&&(u=Xn(-1,n&-n),u.tag=2,Yn(a,u)),a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),T_(a.return,n),l.lanes|=n;break}u=u.next}}else o=a.tag===10&&a.type===e.type?null:a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}ft(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps,r=s.children,bi(e,n),i=Ut(i,s.unstable_observedBits),r=r(i),e.flags|=1,ft(t,e,r,n),e.child;case 14:return i=e.type,s=Gt(i,e.pendingProps),s=Gt(i.type,s),gg(t,e,i,s,r,n);case 15:return F_(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,pt(r)?(t=!0,Ua(e)):t=!1,bi(e,n),A_(e,r,i),pf(e,r,i,n),vf(null,e,r,!0,t,n);case 19:return Tg(t,e,n);case 23:return oc(t,e,n);case 24:return oc(t,e,n)}throw Error(U(156,e.tag))};function _T(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(t,e,n,r){return new _T(t,e,n,r)}function id(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vT(t){if(typeof t=="function")return id(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zl)return 11;if(t===ql)return 14}return 2}function sr(t,e){var n=t.alternate;return n===null?(n=Nt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $a(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")id(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fn:return Ai(n.children,i,s,e);case Oy:o=8,i|=16;break;case Eh:o=8,i|=1;break;case Is:return t=Nt(12,n,e,i|8),t.elementType=Is,t.type=Is,t.lanes=s,t;case Ls:return t=Nt(13,n,e,i),t.type=Ls,t.elementType=Ls,t.lanes=s,t;case Ja:return t=Nt(19,n,e,i),t.elementType=Ja,t.lanes=s,t;case Ah:return sd(n,i,s,e);case Hc:return t=Nt(24,n,e,i),t.elementType=Hc,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wh:o=10;break e;case bh:o=9;break e;case Zl:o=11;break e;case ql:o=14;break e;case Th:o=16,r=null;break e;case Sh:o=22;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Nt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ai(t,e,n,r){return t=Nt(7,t,r,e),t.lanes=n,t}function sd(t,e,n,r){return t=Nt(23,t,r,e),t.elementType=Ah,t.lanes=n,t}function uc(t,e,n){return t=Nt(6,t,null,e),t.lanes=n,t}function cc(t,e,n){return e=Nt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ET(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Xu(0),this.expirationTimes=Xu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xu(0),this.mutableSourceEagerHydrationData=null}function wT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function wl(t,e,n,r){var i=e.current,s=At(),o=Zn(i);e:if(n){n=n._reactInternals;t:{if(Gr(n)!==n||n.tag!==1)throw Error(U(170));var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(pt(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(U(171))}if(n.tag===1){var l=n.type;if(pt(l)){n=m_(n,l,a);break e}}n=a}else n=rr;return e.context===null?e.context=n:e.pendingContext=n,e=Xn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),Yn(i,e),qn(i,o,s),o}function fc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ig(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function od(t,e){Ig(t,e),(t=t.alternate)&&Ig(t,e)}function bT(){return null}function ad(t,e,n){var r=n!=null&&n.hydrationOptions!=null&&n.hydrationOptions.mutableSources||null;if(n=new ET(t,e,n!=null&&n.hydrate===!0),e=Nt(3,null,null,e===2?7:e===1?3:0),n.current=e,e.stateNode=n,Hh(e),t[Yi]=n.current,f_(t.nodeType===8?t.parentNode:t),r)for(t=0;t<r.length;t++){e=r[t];var i=e._getVersion;i=i(e._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=n}ad.prototype.render=function(t){wl(t,this._internalRoot,null,null)};ad.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;wl(null,t,null,function(){e[Yi]=null})};function Mo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function TT(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new ad(t,0,e?{hydrate:!0}:void 0)}function au(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if(typeof i=="function"){var a=i;i=function(){var u=fc(o);a.call(u)}}wl(e,o,t,i)}else{if(s=n._reactRootContainer=TT(n,r),o=s._internalRoot,typeof i=="function"){var l=i;i=function(){var u=fc(o);l.call(u)}}X_(function(){wl(e,o,t,i)})}return fc(o)}Gy=function(t){if(t.tag===13){var e=At();qn(t,4,e),od(t,4)}};Mh=function(t){if(t.tag===13){var e=At();qn(t,67108864,e),od(t,67108864)}};Hy=function(t){if(t.tag===13){var e=At(),n=Zn(t);qn(t,n,e),od(t,n)}};Wy=function(t,e){return e()};tf=function(t,e,n){switch(e){case"input":if(Xc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=nu(r);if(!i)throw Error(U(90));My(r),Xc(r,i)}}}break;case"textarea":Ly(t,n);break;case"select":e=n.value,e!=null&&_i(t,!!n.multiple,e,!1)}};Ch=W_;By=function(t,e,n,r,i){var s=ne;ne|=4;try{return kr(98,t.bind(null,e,n,r,i))}finally{ne=s,ne===0&&(Ki(),hn())}};Oh=function(){(ne&49)===0&&(uT(),pr())};zy=function(t,e){var n=ne;ne|=2;try{return t(e)}finally{ne=n,ne===0&&(Ki(),hn())}};function ev(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mo(e))throw Error(U(200));return wT(t,e,null,n)}var ST={Events:[Co,fi,nu,Uy,jy,pr,{current:!1}]},ys={findFiberByHostInstance:xr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},xT={bundleType:ys.bundleType,version:ys.version,rendererPackageName:ys.rendererPackageName,rendererConfig:ys.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$r.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$y(t),t===null?null:t.stateNode},findFiberByHostInstance:ys.findFiberByHostInstance||bT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Ea=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ea.isDisabled&&Ea.supportsFiber)try{zh=Ea.inject(xT),Mr=Ea}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ST;Bt.createPortal=ev;Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):Error(U(268,Object.keys(t)));return t=$y(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t,e){var n=ne;if((n&48)!==0)return t(e);ne|=1;try{if(t)return kr(99,t.bind(null,e))}finally{ne=n,hn()}};Bt.hydrate=function(t,e,n){if(!Mo(e))throw Error(U(200));return au(null,t,e,!0,n)};Bt.render=function(t,e,n){if(!Mo(e))throw Error(U(200));return au(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!Mo(t))throw Error(U(40));return t._reactRootContainer?(X_(function(){au(null,null,t,!1,function(){t._reactRootContainer=null,t[Yi]=null})}),!0):!1};Bt.unstable_batchedUpdates=W_;Bt.unstable_createPortal=function(t,e){return ev(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Mo(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return au(t,e,n,!1,r)};Bt.version="17.0.2";function tv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tv)}catch(t){console.error(t)}}tv(),Ao.exports=Bt;var ED=Ao.exports,nv={exports:{}},AT="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",PT=AT,CT=PT;function rv(){}function iv(){}iv.resetWarningCache=rv;var OT=function(){function t(r,i,s,o,a,l){if(l!==CT){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:iv,resetWarningCache:rv};return n.PropTypes=n,n};nv.exports=OT();var RT=nv.exports,or=hr.createContext(null);function MT(t){t()}var sv=MT,IT=function(e){return sv=e},LT=function(){return sv};function kT(){var t=LT(),e=null,n=null;return{clear:function(){e=null,n=null},notify:function(){t(function(){for(var i=e;i;)i.callback(),i=i.next})},get:function(){for(var i=[],s=e;s;)i.push(s),s=s.next;return i},subscribe:function(i){var s=!0,o=n={callback:i,next:null,prev:n};return o.prev?o.prev.next=o:e=o,function(){!s||e===null||(s=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var Lg={notify:function(){},get:function(){return[]}};function ov(t,e){var n,r=Lg;function i(f){return l(),r.subscribe(f)}function s(){r.notify()}function o(){c.onStateChange&&c.onStateChange()}function a(){return Boolean(n)}function l(){n||(n=e?e.addNestedSub(o):t.subscribe(o),r=kT())}function u(){n&&(n(),n=void 0,r.clear(),r=Lg)}var c={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:o,isSubscribed:a,trySubscribe:l,tryUnsubscribe:u,getListeners:function(){return r}};return c}var If=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?L.exports.useLayoutEffect:L.exports.useEffect,lu={exports:{}},Io={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT=L.exports,av=60103;Io.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var kg=Symbol.for;av=kg("react.element"),Io.Fragment=kg("react.fragment")}var DT=NT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FT=Object.prototype.hasOwnProperty,UT={key:!0,ref:!0,__self:!0,__source:!0};function lv(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)FT.call(e,r)&&!UT.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:av,type:t,key:s,ref:o,props:i,_owner:DT.current}}Io.jsx=lv;Io.jsxs=lv;lu.exports=Io;const jT=lu.exports.jsx,wD=lu.exports.jsxs,bD=lu.exports.Fragment;function TD(t){var e=t.store,n=t.context,r=t.children,i=L.exports.useMemo(function(){var a=ov(e);return a.onStateChange=a.notifyNestedSubs,{store:e,subscription:a}},[e]),s=L.exports.useMemo(function(){return e.getState()},[e]);If(function(){var a=i.subscription;return a.trySubscribe(),s!==e.getState()&&a.notifyNestedSubs(),function(){a.tryUnsubscribe(),a.onStateChange=null}},[i,s]);var o=n||or;return jT(o.Provider,{value:i,children:r})}function bl(){return bl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bl.apply(this,arguments)}var uu={exports:{}},de={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ge=typeof Symbol=="function"&&Symbol.for,ld=Ge?Symbol.for("react.element"):60103,ud=Ge?Symbol.for("react.portal"):60106,cu=Ge?Symbol.for("react.fragment"):60107,fu=Ge?Symbol.for("react.strict_mode"):60108,hu=Ge?Symbol.for("react.profiler"):60114,du=Ge?Symbol.for("react.provider"):60109,pu=Ge?Symbol.for("react.context"):60110,cd=Ge?Symbol.for("react.async_mode"):60111,gu=Ge?Symbol.for("react.concurrent_mode"):60111,mu=Ge?Symbol.for("react.forward_ref"):60112,yu=Ge?Symbol.for("react.suspense"):60113,BT=Ge?Symbol.for("react.suspense_list"):60120,_u=Ge?Symbol.for("react.memo"):60115,vu=Ge?Symbol.for("react.lazy"):60116,zT=Ge?Symbol.for("react.block"):60121,VT=Ge?Symbol.for("react.fundamental"):60117,$T=Ge?Symbol.for("react.responder"):60118,GT=Ge?Symbol.for("react.scope"):60119;function Rt(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case ld:switch(t=t.type,t){case cd:case gu:case cu:case hu:case fu:case yu:return t;default:switch(t=t&&t.$$typeof,t){case pu:case mu:case vu:case _u:case du:return t;default:return e}}case ud:return e}}}function uv(t){return Rt(t)===gu}de.AsyncMode=cd;de.ConcurrentMode=gu;de.ContextConsumer=pu;de.ContextProvider=du;de.Element=ld;de.ForwardRef=mu;de.Fragment=cu;de.Lazy=vu;de.Memo=_u;de.Portal=ud;de.Profiler=hu;de.StrictMode=fu;de.Suspense=yu;de.isAsyncMode=function(t){return uv(t)||Rt(t)===cd};de.isConcurrentMode=uv;de.isContextConsumer=function(t){return Rt(t)===pu};de.isContextProvider=function(t){return Rt(t)===du};de.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===ld};de.isForwardRef=function(t){return Rt(t)===mu};de.isFragment=function(t){return Rt(t)===cu};de.isLazy=function(t){return Rt(t)===vu};de.isMemo=function(t){return Rt(t)===_u};de.isPortal=function(t){return Rt(t)===ud};de.isProfiler=function(t){return Rt(t)===hu};de.isStrictMode=function(t){return Rt(t)===fu};de.isSuspense=function(t){return Rt(t)===yu};de.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===cu||t===gu||t===hu||t===fu||t===yu||t===BT||typeof t=="object"&&t!==null&&(t.$$typeof===vu||t.$$typeof===_u||t.$$typeof===du||t.$$typeof===pu||t.$$typeof===mu||t.$$typeof===VT||t.$$typeof===$T||t.$$typeof===GT||t.$$typeof===zT)};de.typeOf=Rt;uu.exports=de;var fd=uu.exports,HT={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},WT={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},XT={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},cv={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},hd={};hd[fd.ForwardRef]=XT;hd[fd.Memo]=cv;function Ng(t){return fd.isMemo(t)?cv:hd[t.$$typeof]||HT}var YT=Object.defineProperty,ZT=Object.getOwnPropertyNames,Dg=Object.getOwnPropertySymbols,qT=Object.getOwnPropertyDescriptor,KT=Object.getPrototypeOf,Fg=Object.prototype;function fv(t,e,n){if(typeof e!="string"){if(Fg){var r=KT(e);r&&r!==Fg&&fv(t,r,n)}var i=ZT(e);Dg&&(i=i.concat(Dg(e)));for(var s=Ng(t),o=Ng(e),a=0;a<i.length;++a){var l=i[a];if(!WT[l]&&!(n&&n[l])&&!(o&&o[l])&&!(s&&s[l])){var u=qT(e,l);try{YT(t,l,u)}catch{}}}}return t}var QT=fv,_e={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eu=60103,wu=60106,Lo=60107,ko=60108,No=60114,Do=60109,Fo=60110,Uo=60112,jo=60113,dd=60120,Bo=60115,zo=60116,hv=60121,dv=60122,pv=60117,gv=60129,mv=60131;if(typeof Symbol=="function"&&Symbol.for){var Xe=Symbol.for;Eu=Xe("react.element"),wu=Xe("react.portal"),Lo=Xe("react.fragment"),ko=Xe("react.strict_mode"),No=Xe("react.profiler"),Do=Xe("react.provider"),Fo=Xe("react.context"),Uo=Xe("react.forward_ref"),jo=Xe("react.suspense"),dd=Xe("react.suspense_list"),Bo=Xe("react.memo"),zo=Xe("react.lazy"),hv=Xe("react.block"),dv=Xe("react.server.block"),pv=Xe("react.fundamental"),gv=Xe("react.debug_trace_mode"),mv=Xe("react.legacy_hidden")}function qt(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Eu:switch(t=t.type,t){case Lo:case No:case ko:case jo:case dd:return t;default:switch(t=t&&t.$$typeof,t){case Fo:case Uo:case zo:case Bo:case Do:return t;default:return e}}case wu:return e}}}var JT=Do,eS=Eu,tS=Uo,nS=Lo,rS=zo,iS=Bo,sS=wu,oS=No,aS=ko,lS=jo;_e.ContextConsumer=Fo;_e.ContextProvider=JT;_e.Element=eS;_e.ForwardRef=tS;_e.Fragment=nS;_e.Lazy=rS;_e.Memo=iS;_e.Portal=sS;_e.Profiler=oS;_e.StrictMode=aS;_e.Suspense=lS;_e.isAsyncMode=function(){return!1};_e.isConcurrentMode=function(){return!1};_e.isContextConsumer=function(t){return qt(t)===Fo};_e.isContextProvider=function(t){return qt(t)===Do};_e.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Eu};_e.isForwardRef=function(t){return qt(t)===Uo};_e.isFragment=function(t){return qt(t)===Lo};_e.isLazy=function(t){return qt(t)===zo};_e.isMemo=function(t){return qt(t)===Bo};_e.isPortal=function(t){return qt(t)===wu};_e.isProfiler=function(t){return qt(t)===No};_e.isStrictMode=function(t){return qt(t)===ko};_e.isSuspense=function(t){return qt(t)===jo};_e.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Lo||t===No||t===gv||t===ko||t===jo||t===dd||t===mv||typeof t=="object"&&t!==null&&(t.$$typeof===zo||t.$$typeof===Bo||t.$$typeof===Do||t.$$typeof===Fo||t.$$typeof===Uo||t.$$typeof===pv||t.$$typeof===hv||t[0]===dv)};_e.typeOf=qt;function yv(){var t=L.exports.useContext(or);return t}function _v(t){t===void 0&&(t=or);var e=t===or?yv:function(){return L.exports.useContext(t)};return function(){var r=e(),i=r.store;return i}}var uS=_v();function cS(t){t===void 0&&(t=or);var e=t===or?uS:_v(t);return function(){var r=e();return r.dispatch}}var SD=cS(),fS=function(e,n){return e===n};function hS(t,e,n,r){var i=L.exports.useReducer(function(_){return _+1},0),s=i[1],o=L.exports.useMemo(function(){return ov(n,r)},[n,r]),a=L.exports.useRef(),l=L.exports.useRef(),u=L.exports.useRef(),c=L.exports.useRef(),f=n.getState(),h;try{if(t!==l.current||f!==u.current||a.current){var g=t(f);c.current===void 0||!e(g,c.current)?h=g:h=c.current}else h=c.current}catch(_){throw a.current&&(_.message+=`
The error may be correlated with this previous error:
`+a.current.stack+`

`),_}return If(function(){l.current=t,u.current=f,c.current=h,a.current=void 0}),If(function(){function _(){try{var v=n.getState();if(v===u.current)return;var d=l.current(v);if(e(d,c.current))return;c.current=d,u.current=v}catch(p){a.current=p}s()}return o.onStateChange=_,o.trySubscribe(),_(),function(){return o.tryUnsubscribe()}},[n,o]),h}function dS(t){t===void 0&&(t=or);var e=t===or?yv:function(){return L.exports.useContext(t)};return function(r,i){i===void 0&&(i=fS);var s=e(),o=s.store,a=s.subscription,l=hS(r,i,o,a);return L.exports.useDebugValue(l),l}}var xD=dS();IT(Ao.exports.unstable_batchedUpdates);var Cr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Cr||(Cr={}));var Ug=function(t){return t},jg="beforeunload",pS="popstate";function gS(t){t===void 0&&(t={});var e=t,n=e.window,r=n===void 0?document.defaultView:n,i=r.history;function s(){var O=r.location,R=O.pathname,M=O.search,z=O.hash,Q=i.state||{};return[Q.idx,Ug({pathname:R,search:M,hash:z,state:Q.usr||null,key:Q.key||"default"})]}var o=null;function a(){if(o)g.call(o),o=null;else{var O=Cr.Pop,R=s(),M=R[0],z=R[1];if(g.length){if(M!=null){var Q=c-M;Q&&(o={action:O,location:z,retry:function(){x(Q*-1)}},x(Q))}}else m(O)}}r.addEventListener(pS,a);var l=Cr.Pop,u=s(),c=u[0],f=u[1],h=zg(),g=zg();c==null&&(c=0,i.replaceState(bl({},i.state,{idx:c}),""));function _(O){return typeof O=="string"?O:yS(O)}function v(O,R){return R===void 0&&(R=null),Ug(bl({pathname:f.pathname,hash:"",search:""},typeof O=="string"?Qi(O):O,{state:R,key:mS()}))}function d(O,R){return[{usr:O.state,key:O.key,idx:R},_(O)]}function p(O,R,M){return!g.length||(g.call({action:O,location:R,retry:M}),!1)}function m(O){l=O;var R=s();c=R[0],f=R[1],h.call({action:l,location:f})}function w(O,R){var M=Cr.Push,z=v(O,R);function Q(){w(O,R)}if(p(M,z,Q)){var W=d(z,c+1),q=W[0],$=W[1];try{i.pushState(q,"",$)}catch{r.location.assign($)}m(M)}}function b(O,R){var M=Cr.Replace,z=v(O,R);function Q(){b(O,R)}if(p(M,z,Q)){var W=d(z,c),q=W[0],$=W[1];i.replaceState(q,"",$),m(M)}}function x(O){i.go(O)}var S={get action(){return l},get location(){return f},createHref:_,push:w,replace:b,go:x,back:function(){x(-1)},forward:function(){x(1)},listen:function(R){return h.push(R)},block:function(R){var M=g.push(R);return g.length===1&&r.addEventListener(jg,Bg),function(){M(),g.length||r.removeEventListener(jg,Bg)}}};return S}function Bg(t){t.preventDefault(),t.returnValue=""}function zg(){var t=[];return{get length(){return t.length},push:function(n){return t.push(n),function(){t=t.filter(function(r){return r!==n})}},call:function(n){t.forEach(function(r){return r&&r(n)})}}}function mS(){return Math.random().toString(36).substr(2,8)}function yS(t){var e=t.pathname,n=e===void 0?"/":e,r=t.search,i=r===void 0?"":r,s=t.hash,o=s===void 0?"":s;return i&&i!=="?"&&(n+=i.charAt(0)==="?"?i:"?"+i),o&&o!=="#"&&(n+=o.charAt(0)==="#"?o:"#"+o),n}function Qi(t){var e={};if(t){var n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));var r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}/**
 * React Router v6.2.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xn(t,e){if(!t)throw new Error(e)}const vv=L.exports.createContext(null),pd=L.exports.createContext(null),bu=L.exports.createContext({outlet:null,matches:[]});function _S(t){xn(!1)}function vS(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Cr.Pop,navigator:s,static:o=!1}=t;Tu()&&xn(!1);let a=Tv(e),l=L.exports.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=Qi(r));let{pathname:u="/",search:c="",hash:f="",state:h=null,key:g="default"}=r,_=L.exports.useMemo(()=>{let v=bv(u,a);return v==null?null:{pathname:v,search:c,hash:f,state:h,key:g}},[a,u,c,f,h,g]);return _==null?null:L.exports.createElement(vv.Provider,{value:l},L.exports.createElement(pd.Provider,{children:n,value:{location:_,navigationType:i}}))}function AD(t){let{children:e,location:n}=t;return ES(Lf(e),n)}function Tu(){return L.exports.useContext(pd)!=null}function Ev(){return Tu()||xn(!1),L.exports.useContext(pd).location}function PD(){Tu()||xn(!1);let{basename:t,navigator:e}=L.exports.useContext(vv),{matches:n}=L.exports.useContext(bu),{pathname:r}=Ev(),i=JSON.stringify(n.map(a=>a.pathnameBase)),s=L.exports.useRef(!1);return L.exports.useEffect(()=>{s.current=!0}),L.exports.useCallback(function(a,l){if(l===void 0&&(l={}),!s.current)return;if(typeof a=="number"){e.go(a);return}let u=US(a,JSON.parse(i),r);t!=="/"&&(u.pathname=Ir([t,u.pathname])),(l.replace?e.replace:e.push)(u,l.state)},[t,e,i,r])}function CD(){let{matches:t}=L.exports.useContext(bu),e=t[t.length-1];return e?e.params:{}}function ES(t,e){Tu()||xn(!1);let{matches:n}=L.exports.useContext(bu),r=n[n.length-1],i=r?r.params:{};r&&r.pathname;let s=r?r.pathnameBase:"/";r&&r.route;let o=Ev(),a;if(e){var l;let h=typeof e=="string"?Qi(e):e;s==="/"||((l=h.pathname)==null?void 0:l.startsWith(s))||xn(!1),a=h}else a=o;let u=a.pathname||"/",c=s==="/"?u:u.slice(s.length)||"/",f=wS(t,{pathname:c});return IS(f&&f.map(h=>Object.assign({},h,{params:Object.assign({},i,h.params),pathname:Ir([s,h.pathname]),pathnameBase:h.pathnameBase==="/"?s:Ir([s,h.pathnameBase])})),n)}function Lf(t){let e=[];return L.exports.Children.forEach(t,n=>{if(!L.exports.isValidElement(n))return;if(n.type===L.exports.Fragment){e.push.apply(e,Lf(n.props.children));return}n.type!==_S&&xn(!1);let r={caseSensitive:n.props.caseSensitive,element:n.props.element,index:n.props.index,path:n.props.path};n.props.children&&(r.children=Lf(n.props.children)),e.push(r)}),e}function wS(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Qi(e):e,i=bv(r.pathname||"/",n);if(i==null)return null;let s=wv(t);bS(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=MS(s[a],i);return o}function wv(t,e,n,r){return e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r=""),t.forEach((i,s)=>{let o={relativePath:i.path||"",caseSensitive:i.caseSensitive===!0,childrenIndex:s,route:i};o.relativePath.startsWith("/")&&(o.relativePath.startsWith(r)||xn(!1),o.relativePath=o.relativePath.slice(r.length));let a=Ir([r,o.relativePath]),l=n.concat(o);i.children&&i.children.length>0&&(i.index===!0&&xn(!1),wv(i.children,e,l,a)),!(i.path==null&&!i.index)&&e.push({path:a,score:OS(a,i.index),routesMeta:l})}),e}function bS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:RS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const TS=/^:\w+$/,SS=3,xS=2,AS=1,PS=10,CS=-2,Vg=t=>t==="*";function OS(t,e){let n=t.split("/"),r=n.length;return n.some(Vg)&&(r+=CS),e&&(r+=xS),n.filter(i=>!Vg(i)).reduce((i,s)=>i+(TS.test(s)?SS:s===""?AS:PS),r)}function RS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function MS(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=LS({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:Ir([i,c.pathname]),pathnameBase:Tv(Ir([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=Ir([i,c.pathnameBase]))}return s}function IS(t,e){return e===void 0&&(e=[]),t==null?null:t.reduceRight((n,r,i)=>L.exports.createElement(bu.Provider,{children:r.route.element!==void 0?r.route.element:n,value:{outlet:n,matches:e.concat(t.slice(0,i+1))}}),null)}function LS(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=kS(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,f)=>{if(c==="*"){let h=a[f]||"";o=s.slice(0,s.length-h.length).replace(/(.)\/+$/,"$1")}return u[c]=NS(a[f]||""),u},{}),pathname:s,pathnameBase:o,pattern:t}}function kS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(o,a)=>(r.push(a),"([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[new RegExp(i,e?void 0:"i"),r]}function NS(t,e){try{return decodeURIComponent(t)}catch{return t}}function DS(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Qi(t):t;return{pathname:n?n.startsWith("/")?n:FS(n,e):e,search:jS(r),hash:BS(i)}}function FS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function US(t,e,n){let r=typeof t=="string"?Qi(t):t,i=t===""||r.pathname===""?"/":r.pathname,s;if(i==null)s=n;else{let a=e.length-1;if(i.startsWith("..")){let l=i.split("/");for(;l[0]==="..";)l.shift(),a-=1;r.pathname=l.join("/")}s=a>=0?e[a]:"/"}let o=DS(r,s);return i&&i!=="/"&&i.endsWith("/")&&!o.pathname.endsWith("/")&&(o.pathname+="/"),o}function bv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=t.charAt(e.length);return n&&n!=="/"?null:t.slice(e.length)||"/"}const Ir=t=>t.join("/").replace(/\/\/+/g,"/"),Tv=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,BS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;/**
 * React Router DOM v6.2.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function OD(t){let{basename:e,children:n,window:r}=t,i=L.exports.useRef();i.current==null&&(i.current=gS({window:r}));let s=i.current,[o,a]=L.exports.useState({action:s.action,location:s.location});return L.exports.useLayoutEffect(()=>s.listen(a),[s]),L.exports.createElement(vS,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:s})}function zS(t){function e(k,N,j,X,C){for(var Z=0,F=0,J=0,re=0,le,ee,xe=0,Ie=0,ie,pe=ie=le=0,se=0,Le=0,Rn=0,Pe=0,He=j.length,mr=He-1,yt,te="",Ae="",ns="",Yr="",zt;se<He;){if(ee=j.charCodeAt(se),se===mr&&F+re+J+Z!==0&&(F!==0&&(ee=F===47?10:47),re=J=Z=0,He++,mr++),F+re+J+Z===0){if(se===mr&&(0<Le&&(te=te.replace(h,"")),0<te.trim().length)){switch(ee){case 32:case 9:case 59:case 13:case 10:break;default:te+=j.charAt(se)}ee=59}switch(ee){case 123:for(te=te.trim(),le=te.charCodeAt(0),ie=1,Pe=++se;se<He;){switch(ee=j.charCodeAt(se)){case 123:ie++;break;case 125:ie--;break;case 47:switch(ee=j.charCodeAt(se+1)){case 42:case 47:e:{for(pe=se+1;pe<mr;++pe)switch(j.charCodeAt(pe)){case 47:if(ee===42&&j.charCodeAt(pe-1)===42&&se+2!==pe){se=pe+1;break e}break;case 10:if(ee===47){se=pe+1;break e}}se=pe}}break;case 91:ee++;case 40:ee++;case 34:case 39:for(;se++<mr&&j.charCodeAt(se)!==ee;);}if(ie===0)break;se++}switch(ie=j.substring(Pe,se),le===0&&(le=(te=te.replace(f,"").trim()).charCodeAt(0)),le){case 64:switch(0<Le&&(te=te.replace(h,"")),ee=te.charCodeAt(1),ee){case 100:case 109:case 115:case 45:Le=N;break;default:Le=mt}if(ie=e(N,Le,ie,ee,C+1),Pe=ie.length,0<Be&&(Le=n(mt,te,Rn),zt=a(3,ie,Le,N,q,W,Pe,ee,C,X),te=Le.join(""),zt!==void 0&&(Pe=(ie=zt.trim()).length)===0&&(ee=0,ie="")),0<Pe)switch(ee){case 115:te=te.replace(S,o);case 100:case 109:case 45:ie=te+"{"+ie+"}";break;case 107:te=te.replace(m,"$1 $2"),ie=te+"{"+ie+"}",ie=ce===1||ce===2&&s("@"+ie,3)?"@-webkit-"+ie+"@"+ie:"@"+ie;break;default:ie=te+ie,X===112&&(ie=(Ae+=ie,""))}else ie="";break;default:ie=e(N,n(N,te,Rn),ie,X,C+1)}ns+=ie,ie=Rn=Le=pe=le=0,te="",ee=j.charCodeAt(++se);break;case 125:case 59:if(te=(0<Le?te.replace(h,""):te).trim(),1<(Pe=te.length))switch(pe===0&&(le=te.charCodeAt(0),le===45||96<le&&123>le)&&(Pe=(te=te.replace(" ",":")).length),0<Be&&(zt=a(1,te,N,k,q,W,Ae.length,X,C,X))!==void 0&&(Pe=(te=zt.trim()).length)===0&&(te="\0\0"),le=te.charCodeAt(0),ee=te.charCodeAt(1),le){case 0:break;case 64:if(ee===105||ee===99){Yr+=te+j.charAt(se);break}default:te.charCodeAt(Pe-1)!==58&&(Ae+=i(te,le,ee,te.charCodeAt(2)))}Rn=Le=pe=le=0,te="",ee=j.charCodeAt(++se)}}switch(ee){case 13:case 10:F===47?F=0:1+le===0&&X!==107&&0<te.length&&(Le=1,te+="\0"),0<Be*Kt&&a(0,te,N,k,q,W,Ae.length,X,C,X),W=1,q++;break;case 59:case 125:if(F+re+J+Z===0){W++;break}default:switch(W++,yt=j.charAt(se),ee){case 9:case 32:if(re+Z+F===0)switch(xe){case 44:case 58:case 9:case 32:yt="";break;default:ee!==32&&(yt=" ")}break;case 0:yt="\\0";break;case 12:yt="\\f";break;case 11:yt="\\v";break;case 38:re+F+Z===0&&(Le=Rn=1,yt="\f"+yt);break;case 108:if(re+F+Z+$===0&&0<pe)switch(se-pe){case 2:xe===112&&j.charCodeAt(se-3)===58&&($=xe);case 8:Ie===111&&($=Ie)}break;case 58:re+F+Z===0&&(pe=se);break;case 44:F+J+re+Z===0&&(Le=1,yt+="\r");break;case 34:case 39:F===0&&(re=re===ee?0:re===0?ee:re);break;case 91:re+F+J===0&&Z++;break;case 93:re+F+J===0&&Z--;break;case 41:re+F+Z===0&&J--;break;case 40:if(re+F+Z===0){if(le===0)switch(2*xe+3*Ie){case 533:break;default:le=1}J++}break;case 64:F+J+re+Z+pe+ie===0&&(ie=1);break;case 42:case 47:if(!(0<re+Z+J))switch(F){case 0:switch(2*ee+3*j.charCodeAt(se+1)){case 235:F=47;break;case 220:Pe=se,F=42}break;case 42:ee===47&&xe===42&&Pe+2!==se&&(j.charCodeAt(Pe+2)===33&&(Ae+=j.substring(Pe,se+1)),yt="",F=0)}}F===0&&(te+=yt)}Ie=xe,xe=ee,se++}if(Pe=Ae.length,0<Pe){if(Le=N,0<Be&&(zt=a(2,Ae,Le,k,q,W,Pe,X,C,X),zt!==void 0&&(Ae=zt).length===0))return Yr+Ae+ns;if(Ae=Le.join(",")+"{"+Ae+"}",ce*$!==0){switch(ce!==2||s(Ae,2)||($=0),$){case 111:Ae=Ae.replace(b,":-moz-$1")+Ae;break;case 112:Ae=Ae.replace(w,"::-webkit-input-$1")+Ae.replace(w,"::-moz-$1")+Ae.replace(w,":-ms-input-$1")+Ae}$=0}}return Yr+Ae+ns}function n(k,N,j){var X=N.trim().split(d);N=X;var C=X.length,Z=k.length;switch(Z){case 0:case 1:var F=0;for(k=Z===0?"":k[0]+" ";F<C;++F)N[F]=r(k,N[F],j).trim();break;default:var J=F=0;for(N=[];F<C;++F)for(var re=0;re<Z;++re)N[J++]=r(k[re]+" ",X[F],j).trim()}return N}function r(k,N,j){var X=N.charCodeAt(0);switch(33>X&&(X=(N=N.trim()).charCodeAt(0)),X){case 38:return N.replace(p,"$1"+k.trim());case 58:return k.trim()+N.replace(p,"$1"+k.trim());default:if(0<1*j&&0<N.indexOf("\f"))return N.replace(p,(k.charCodeAt(0)===58?"":"$1")+k.trim())}return k+N}function i(k,N,j,X){var C=k+";",Z=2*N+3*j+4*X;if(Z===944){k=C.indexOf(":",9)+1;var F=C.substring(k,C.length-1).trim();return F=C.substring(0,k).trim()+F+";",ce===1||ce===2&&s(F,1)?"-webkit-"+F+F:F}if(ce===0||ce===2&&!s(C,1))return C;switch(Z){case 1015:return C.charCodeAt(10)===97?"-webkit-"+C+C:C;case 951:return C.charCodeAt(3)===116?"-webkit-"+C+C:C;case 963:return C.charCodeAt(5)===110?"-webkit-"+C+C:C;case 1009:if(C.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+C+C;case 978:return"-webkit-"+C+"-moz-"+C+C;case 1019:case 983:return"-webkit-"+C+"-moz-"+C+"-ms-"+C+C;case 883:if(C.charCodeAt(8)===45)return"-webkit-"+C+C;if(0<C.indexOf("image-set(",11))return C.replace(Q,"$1-webkit-$2")+C;break;case 932:if(C.charCodeAt(4)===45)switch(C.charCodeAt(5)){case 103:return"-webkit-box-"+C.replace("-grow","")+"-webkit-"+C+"-ms-"+C.replace("grow","positive")+C;case 115:return"-webkit-"+C+"-ms-"+C.replace("shrink","negative")+C;case 98:return"-webkit-"+C+"-ms-"+C.replace("basis","preferred-size")+C}return"-webkit-"+C+"-ms-"+C+C;case 964:return"-webkit-"+C+"-ms-flex-"+C+C;case 1023:if(C.charCodeAt(8)!==99)break;return F=C.substring(C.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+F+"-webkit-"+C+"-ms-flex-pack"+F+C;case 1005:return _.test(C)?C.replace(g,":-webkit-")+C.replace(g,":-moz-")+C:C;case 1e3:switch(F=C.substring(13).trim(),N=F.indexOf("-")+1,F.charCodeAt(0)+F.charCodeAt(N)){case 226:F=C.replace(x,"tb");break;case 232:F=C.replace(x,"tb-rl");break;case 220:F=C.replace(x,"lr");break;default:return C}return"-webkit-"+C+"-ms-"+F+C;case 1017:if(C.indexOf("sticky",9)===-1)break;case 975:switch(N=(C=k).length-10,F=(C.charCodeAt(N)===33?C.substring(0,N):C).substring(k.indexOf(":",7)+1).trim(),Z=F.charCodeAt(0)+(F.charCodeAt(7)|0)){case 203:if(111>F.charCodeAt(8))break;case 115:C=C.replace(F,"-webkit-"+F)+";"+C;break;case 207:case 102:C=C.replace(F,"-webkit-"+(102<Z?"inline-":"")+"box")+";"+C.replace(F,"-webkit-"+F)+";"+C.replace(F,"-ms-"+F+"box")+";"+C}return C+";";case 938:if(C.charCodeAt(5)===45)switch(C.charCodeAt(6)){case 105:return F=C.replace("-items",""),"-webkit-"+C+"-webkit-box-"+F+"-ms-flex-"+F+C;case 115:return"-webkit-"+C+"-ms-flex-item-"+C.replace(R,"")+C;default:return"-webkit-"+C+"-ms-flex-line-pack"+C.replace("align-content","").replace(R,"")+C}break;case 973:case 989:if(C.charCodeAt(3)!==45||C.charCodeAt(4)===122)break;case 931:case 953:if(z.test(k)===!0)return(F=k.substring(k.indexOf(":")+1)).charCodeAt(0)===115?i(k.replace("stretch","fill-available"),N,j,X).replace(":fill-available",":stretch"):C.replace(F,"-webkit-"+F)+C.replace(F,"-moz-"+F.replace("fill-",""))+C;break;case 962:if(C="-webkit-"+C+(C.charCodeAt(5)===102?"-ms-"+C:"")+C,j+X===211&&C.charCodeAt(13)===105&&0<C.indexOf("transform",10))return C.substring(0,C.indexOf(";",27)+1).replace(v,"$1-webkit-$2")+C}return C}function s(k,N){var j=k.indexOf(N===1?":":"{"),X=k.substring(0,N!==3?j:10);return j=k.substring(j+1,k.length-1),Mt(N!==2?X:X.replace(M,"$1"),j,N)}function o(k,N){var j=i(N,N.charCodeAt(0),N.charCodeAt(1),N.charCodeAt(2));return j!==N+";"?j.replace(O," or ($1)").substring(4):"("+N+")"}function a(k,N,j,X,C,Z,F,J,re,le){for(var ee=0,xe=N,Ie;ee<Be;++ee)switch(Ie=je[ee].call(c,k,xe,j,X,C,Z,F,J,re,le)){case void 0:case!1:case!0:case null:break;default:xe=Ie}if(xe!==N)return xe}function l(k){switch(k){case void 0:case null:Be=je.length=0;break;default:if(typeof k=="function")je[Be++]=k;else if(typeof k=="object")for(var N=0,j=k.length;N<j;++N)l(k[N]);else Kt=!!k|0}return l}function u(k){return k=k.prefix,k!==void 0&&(Mt=null,k?typeof k!="function"?ce=1:(ce=2,Mt=k):ce=0),u}function c(k,N){var j=k;if(33>j.charCodeAt(0)&&(j=j.trim()),B=j,j=[B],0<Be){var X=a(-1,N,j,j,q,W,0,0,0,0);X!==void 0&&typeof X=="string"&&(N=X)}var C=e(mt,j,N,0,0);return 0<Be&&(X=a(-2,C,j,j,q,W,C.length,0,0,0),X!==void 0&&(C=X)),B="",$=0,W=q=1,C}var f=/^\0+/g,h=/[\0\r\f]/g,g=/: */g,_=/zoo|gra/,v=/([,: ])(transform)/g,d=/,\r+?/g,p=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,w=/::(place)/g,b=/:(read-only)/g,x=/[svh]\w+-[tblr]{2}/,S=/\(\s*(.*)\s*\)/g,O=/([\s\S]*?);/g,R=/-self|flex-/g,M=/[^]*?(:[rp][el]a[\w-]+)[^]*/,z=/stretch|:\s*\w+\-(?:conte|avail)/,Q=/([^-])(image-set\()/,W=1,q=1,$=0,ce=1,mt=[],je=[],Be=0,Mt=null,Kt=0,B="";return c.use=l,c.set=u,t!==void 0&&u(t),c}var VS={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function $S(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var GS=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,$g=$S(function(t){return GS.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function an(){return(an=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var Gg=function(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n},kf=function(t){return t!==null&&typeof t=="object"&&(t.toString?t.toString():Object.prototype.toString.call(t))==="[object Object]"&&!uu.exports.typeOf(t)},Tl=Object.freeze([]),Qn=Object.freeze({});function fo(t){return typeof t=="function"}function Hg(t){return t.displayName||t.name||"Component"}function gd(t){return t&&typeof t.styledComponentId=="string"}var Ni=typeof process!="undefined"&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",md=typeof window!="undefined"&&"HTMLElement"in window,HS=Boolean(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process!="undefined"&&{}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:typeof process!="undefined"&&{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""?{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY:!1),WS={};function Vo(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var XS=function(){function t(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}var e=t.prototype;return e.indexOfGroup=function(n){for(var r=0,i=0;i<n;i++)r+=this.groupSizes[i];return r},e.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var i=this.groupSizes,s=i.length,o=s;n>=o;)(o<<=1)<0&&Vo(16,""+n);this.groupSizes=new Uint32Array(o),this.groupSizes.set(i),this.length=o;for(var a=s;a<o;a++)this.groupSizes[a]=0}for(var l=this.indexOfGroup(n+1),u=0,c=r.length;u<c;u++)this.tag.insertRule(l,r[u])&&(this.groupSizes[n]++,l++)},e.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],i=this.indexOfGroup(n),s=i+r;this.groupSizes[n]=0;for(var o=i;o<s;o++)this.tag.deleteRule(i)}},e.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var i=this.groupSizes[n],s=this.indexOfGroup(n),o=s+i,a=s;a<o;a++)r+=this.tag.getRule(a)+`/*!sc*/
`;return r},t}(),Ga=new Map,Sl=new Map,Gs=1,wa=function(t){if(Ga.has(t))return Ga.get(t);for(;Sl.has(Gs);)Gs++;var e=Gs++;return Ga.set(t,e),Sl.set(e,t),e},YS=function(t){return Sl.get(t)},ZS=function(t,e){e>=Gs&&(Gs=e+1),Ga.set(t,e),Sl.set(e,t)},qS="style["+Ni+'][data-styled-version="5.3.5"]',KS=new RegExp("^"+Ni+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),QS=function(t,e,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&t.registerName(e,r)},JS=function(t,e){for(var n=(e.textContent||"").split(`/*!sc*/
`),r=[],i=0,s=n.length;i<s;i++){var o=n[i].trim();if(o){var a=o.match(KS);if(a){var l=0|parseInt(a[1],10),u=a[2];l!==0&&(ZS(u,l),QS(t,u,a[3]),t.getTag().insertRules(l,r)),r.length=0}else r.push(o)}}},ex=function(){return typeof window!="undefined"&&window.__webpack_nonce__!==void 0?window.__webpack_nonce__:null},Sv=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(a){for(var l=a.childNodes,u=l.length;u>=0;u--){var c=l[u];if(c&&c.nodeType===1&&c.hasAttribute(Ni))return c}}(n),s=i!==void 0?i.nextSibling:null;r.setAttribute(Ni,"active"),r.setAttribute("data-styled-version","5.3.5");var o=ex();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},tx=function(){function t(n){var r=this.element=Sv(n);r.appendChild(document.createTextNode("")),this.sheet=function(i){if(i.sheet)return i.sheet;for(var s=document.styleSheets,o=0,a=s.length;o<a;o++){var l=s[o];if(l.ownerNode===i)return l}Vo(17)}(r),this.length=0}var e=t.prototype;return e.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},e.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},e.getRule=function(n){var r=this.sheet.cssRules[n];return r!==void 0&&typeof r.cssText=="string"?r.cssText:""},t}(),nx=function(){function t(n){var r=this.element=Sv(n);this.nodes=r.childNodes,this.length=0}var e=t.prototype;return e.insertRule=function(n,r){if(n<=this.length&&n>=0){var i=document.createTextNode(r),s=this.nodes[n];return this.element.insertBefore(i,s||null),this.length++,!0}return!1},e.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},e.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},t}(),rx=function(){function t(n){this.rules=[],this.length=0}var e=t.prototype;return e.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},e.deleteRule=function(n){this.rules.splice(n,1),this.length--},e.getRule=function(n){return n<this.length?this.rules[n]:""},t}(),Wg=md,ix={isServer:!md,useCSSOMInjection:!HS},xl=function(){function t(n,r,i){n===void 0&&(n=Qn),r===void 0&&(r={}),this.options=an({},ix,{},n),this.gs=r,this.names=new Map(i),this.server=!!n.isServer,!this.server&&md&&Wg&&(Wg=!1,function(s){for(var o=document.querySelectorAll(qS),a=0,l=o.length;a<l;a++){var u=o[a];u&&u.getAttribute(Ni)!=="active"&&(JS(s,u),u.parentNode&&u.parentNode.removeChild(u))}}(this))}t.registerId=function(n){return wa(n)};var e=t.prototype;return e.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new t(an({},this.options,{},n),this.gs,r&&this.names||void 0)},e.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},e.getTag=function(){return this.tag||(this.tag=(i=(r=this.options).isServer,s=r.useCSSOMInjection,o=r.target,n=i?new rx(o):s?new tx(o):new nx(o),new XS(n)));var n,r,i,s,o},e.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},e.registerName=function(n,r){if(wa(n),this.names.has(n))this.names.get(n).add(r);else{var i=new Set;i.add(r),this.names.set(n,i)}},e.insertRules=function(n,r,i){this.registerName(n,r),this.getTag().insertRules(wa(n),i)},e.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},e.clearRules=function(n){this.getTag().clearGroup(wa(n)),this.clearNames(n)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(n){for(var r=n.getTag(),i=r.length,s="",o=0;o<i;o++){var a=YS(o);if(a!==void 0){var l=n.names.get(a),u=r.getGroup(o);if(l&&u&&l.size){var c=Ni+".g"+o+'[id="'+a+'"]',f="";l!==void 0&&l.forEach(function(h){h.length>0&&(f+=h+",")}),s+=""+u+c+'{content:"'+f+`"}/*!sc*/
`}}}return s}(this)},t}(),sx=/(a)(d)/gi,Xg=function(t){return String.fromCharCode(t+(t>25?39:97))};function Nf(t){var e,n="";for(e=Math.abs(t);e>52;e=e/52|0)n=Xg(e%52)+n;return(Xg(e%52)+n).replace(sx,"$1-$2")}var pi=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},xv=function(t){return pi(5381,t)};function Av(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(fo(n)&&!gd(n))return!1}return!0}var ox=xv("5.3.5"),ax=function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&Av(e),this.componentId=n,this.baseHash=pi(ox,n),this.baseStyle=r,xl.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var i=this.componentId,s=[];if(this.baseStyle&&s.push(this.baseStyle.generateAndInjectStyles(e,n,r)),this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(i,this.staticRulesId))s.push(this.staticRulesId);else{var o=Dr(this.rules,e,n,r).join(""),a=Nf(pi(this.baseHash,o)>>>0);if(!n.hasNameForId(i,a)){var l=r(o,"."+a,void 0,i);n.insertRules(i,a,l)}s.push(a),this.staticRulesId=a}else{for(var u=this.rules.length,c=pi(this.baseHash,r.hash),f="",h=0;h<u;h++){var g=this.rules[h];if(typeof g=="string")f+=g;else if(g){var _=Dr(g,e,n,r),v=Array.isArray(_)?_.join(""):_;c=pi(c,v+h),f+=v}}if(f){var d=Nf(c>>>0);if(!n.hasNameForId(i,d)){var p=r(f,"."+d,void 0,i);n.insertRules(i,d,p)}s.push(d)}}return s.join(" ")},t}(),lx=/^\s*\/\/.*$/gm,ux=[":","[",".","#"];function cx(t){var e,n,r,i,s=t===void 0?Qn:t,o=s.options,a=o===void 0?Qn:o,l=s.plugins,u=l===void 0?Tl:l,c=new zS(a),f=[],h=function(v){function d(p){if(p)try{v(p+"}")}catch{}}return function(p,m,w,b,x,S,O,R,M,z){switch(p){case 1:if(M===0&&m.charCodeAt(0)===64)return v(m+";"),"";break;case 2:if(R===0)return m+"/*|*/";break;case 3:switch(R){case 102:case 112:return v(w[0]+m),"";default:return m+(z===0?"/*|*/":"")}case-2:m.split("/*|*/}").forEach(d)}}}(function(v){f.push(v)}),g=function(v,d,p){return d===0&&ux.indexOf(p[n.length])!==-1||p.match(i)?v:"."+e};function _(v,d,p,m){m===void 0&&(m="&");var w=v.replace(lx,""),b=d&&p?p+" "+d+" { "+w+" }":w;return e=m,n=d,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),c(p||!d?"":d,b)}return c.use([].concat(u,[function(v,d,p){v===2&&p.length&&p[0].lastIndexOf(n)>0&&(p[0]=p[0].replace(r,g))},h,function(v){if(v===-2){var d=f;return f=[],d}}])),_.hash=u.length?u.reduce(function(v,d){return d.name||Vo(15),pi(v,d.name)},5381).toString():"",_}var Pv=hr.createContext();Pv.Consumer;var Cv=hr.createContext(),fx=(Cv.Consumer,new xl),Df=cx();function Ov(){return L.exports.useContext(Pv)||fx}function Rv(){return L.exports.useContext(Cv)||Df}var hx=function(){function t(e,n){var r=this;this.inject=function(i,s){s===void 0&&(s=Df);var o=r.name+s.hash;i.hasNameForId(r.id,o)||i.insertRules(r.id,o,s(r.rules,o,"@keyframes"))},this.toString=function(){return Vo(12,String(r.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=n}return t.prototype.getName=function(e){return e===void 0&&(e=Df),this.name+e.hash},t}(),dx=/([A-Z])/,px=/([A-Z])/g,gx=/^ms-/,mx=function(t){return"-"+t.toLowerCase()};function Yg(t){return dx.test(t)?t.replace(px,mx).replace(gx,"-ms-"):t}var Zg=function(t){return t==null||t===!1||t===""};function Dr(t,e,n,r){if(Array.isArray(t)){for(var i,s=[],o=0,a=t.length;o<a;o+=1)(i=Dr(t[o],e,n,r))!==""&&(Array.isArray(i)?s.push.apply(s,i):s.push(i));return s}if(Zg(t))return"";if(gd(t))return"."+t.styledComponentId;if(fo(t)){if(typeof(u=t)!="function"||u.prototype&&u.prototype.isReactComponent||!e)return t;var l=t(e);return Dr(l,e,n,r)}var u;return t instanceof hx?n?(t.inject(n,r),t.getName(r)):t:kf(t)?function c(f,h){var g,_,v=[];for(var d in f)f.hasOwnProperty(d)&&!Zg(f[d])&&(Array.isArray(f[d])&&f[d].isCss||fo(f[d])?v.push(Yg(d)+":",f[d],";"):kf(f[d])?v.push.apply(v,c(f[d],d)):v.push(Yg(d)+": "+(g=d,(_=f[d])==null||typeof _=="boolean"||_===""?"":typeof _!="number"||_===0||g in VS?String(_).trim():_+"px")+";"));return h?[h+" {"].concat(v,["}"]):v}(t):t.toString()}var qg=function(t){return Array.isArray(t)&&(t.isCss=!0),t};function Mv(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return fo(t)||kf(t)?qg(Dr(Gg(Tl,[t].concat(n)))):n.length===0&&t.length===1&&typeof t[0]=="string"?t:qg(Dr(Gg(t,n)))}var Iv=function(t,e,n){return n===void 0&&(n=Qn),t.theme!==n.theme&&t.theme||e||n.theme},yx=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,_x=/(^-|-$)/g;function hc(t){return t.replace(yx,"-").replace(_x,"")}var Lv=function(t){return Nf(xv(t)>>>0)};function ba(t){return typeof t=="string"&&!0}var Ff=function(t){return typeof t=="function"||typeof t=="object"&&t!==null&&!Array.isArray(t)},vx=function(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"};function Ex(t,e,n){var r=t[n];Ff(e)&&Ff(r)?kv(r,e):t[n]=e}function kv(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,s=n;i<s.length;i++){var o=s[i];if(Ff(o))for(var a in o)vx(a)&&Ex(t,o[a],a)}return t}var yd=hr.createContext();yd.Consumer;var dc={};function Nv(t,e,n){var r=gd(t),i=!ba(t),s=e.attrs,o=s===void 0?Tl:s,a=e.componentId,l=a===void 0?function(m,w){var b=typeof m!="string"?"sc":hc(m);dc[b]=(dc[b]||0)+1;var x=b+"-"+Lv("5.3.5"+b+dc[b]);return w?w+"-"+x:x}(e.displayName,e.parentComponentId):a,u=e.displayName,c=u===void 0?function(m){return ba(m)?"styled."+m:"Styled("+Hg(m)+")"}(t):u,f=e.displayName&&e.componentId?hc(e.displayName)+"-"+e.componentId:e.componentId||l,h=r&&t.attrs?Array.prototype.concat(t.attrs,o).filter(Boolean):o,g=e.shouldForwardProp;r&&t.shouldForwardProp&&(g=e.shouldForwardProp?function(m,w,b){return t.shouldForwardProp(m,w,b)&&e.shouldForwardProp(m,w,b)}:t.shouldForwardProp);var _,v=new ax(n,f,r?t.componentStyle:void 0),d=v.isStatic&&o.length===0,p=function(m,w){return function(b,x,S,O){var R=b.attrs,M=b.componentStyle,z=b.defaultProps,Q=b.foldedComponentIds,W=b.shouldForwardProp,q=b.styledComponentId,$=b.target,ce=function(X,C,Z){X===void 0&&(X=Qn);var F=an({},C,{theme:X}),J={};return Z.forEach(function(re){var le,ee,xe,Ie=re;for(le in fo(Ie)&&(Ie=Ie(F)),Ie)F[le]=J[le]=le==="className"?(ee=J[le],xe=Ie[le],ee&&xe?ee+" "+xe:ee||xe):Ie[le]}),[F,J]}(Iv(x,L.exports.useContext(yd),z)||Qn,x,R),mt=ce[0],je=ce[1],Be=function(X,C,Z,F){var J=Ov(),re=Rv(),le=C?X.generateAndInjectStyles(Qn,J,re):X.generateAndInjectStyles(Z,J,re);return le}(M,O,mt),Mt=S,Kt=je.$as||x.$as||je.as||x.as||$,B=ba(Kt),k=je!==x?an({},x,{},je):x,N={};for(var j in k)j[0]!=="$"&&j!=="as"&&(j==="forwardedAs"?N.as=k[j]:(W?W(j,$g,Kt):!B||$g(j))&&(N[j]=k[j]));return x.style&&je.style!==x.style&&(N.style=an({},x.style,{},je.style)),N.className=Array.prototype.concat(Q,q,Be!==q?Be:null,x.className,je.className).filter(Boolean).join(" "),N.ref=Mt,L.exports.createElement(Kt,N)}(_,m,w,d)};return p.displayName=c,(_=hr.forwardRef(p)).attrs=h,_.componentStyle=v,_.displayName=c,_.shouldForwardProp=g,_.foldedComponentIds=r?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):Tl,_.styledComponentId=f,_.target=r?t.target:t,_.withComponent=function(m){var w=e.componentId,b=function(S,O){if(S==null)return{};var R,M,z={},Q=Object.keys(S);for(M=0;M<Q.length;M++)R=Q[M],O.indexOf(R)>=0||(z[R]=S[R]);return z}(e,["componentId"]),x=w&&w+"-"+(ba(m)?m:hc(Hg(m)));return Nv(m,an({},b,{attrs:h,componentId:x}),n)},Object.defineProperty(_,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(m){this._foldedDefaultProps=r?kv({},t.defaultProps,m):m}}),_.toString=function(){return"."+_.styledComponentId},i&&QT(_,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),_}var Uf=function(t){return function e(n,r,i){if(i===void 0&&(i=Qn),!uu.exports.isValidElementType(r))return Vo(1,String(r));var s=function(){return n(r,i,Mv.apply(void 0,arguments))};return s.withConfig=function(o){return e(n,r,an({},i,{},o))},s.attrs=function(o){return e(n,r,an({},i,{attrs:Array.prototype.concat(i.attrs,o).filter(Boolean)}))},s}(Nv,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(t){Uf[t]=Uf(t)});var wx=function(){function t(n,r){this.rules=n,this.componentId=r,this.isStatic=Av(n),xl.registerId(this.componentId+1)}var e=t.prototype;return e.createStyles=function(n,r,i,s){var o=s(Dr(this.rules,r,i,s).join(""),""),a=this.componentId+n;i.insertRules(a,a,o)},e.removeStyles=function(n,r){r.clearRules(this.componentId+n)},e.renderStyles=function(n,r,i,s){n>2&&xl.registerId(this.componentId+n),this.removeStyles(n,i),this.createStyles(n,r,i,s)},t}();function RD(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=Mv.apply(void 0,[t].concat(n)),s="sc-global-"+Lv(JSON.stringify(i)),o=new wx(i,s);function a(u){var c=Ov(),f=Rv(),h=L.exports.useContext(yd),g=L.exports.useRef(c.allocateGSInstance(s)).current;return c.server&&l(g,u,c,h,f),L.exports.useLayoutEffect(function(){if(!c.server)return l(g,u,c,h,f),function(){return o.removeStyles(g,c)}},[g,u,c,h,f]),null}function l(u,c,f,h,g){if(o.isStatic)o.renderStyles(u,WS,f,g);else{var _=an({},c,{theme:Iv(c,h,a.defaultProps)});o.renderStyles(u,_,f,g)}}return hr.memo(a)}var MD=Uf;function Al(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const Dv=Boolean(typeof process!="object"||String(process)!=="[object process]"||process.browser),Kg=typeof process!="undefined"&&process.version&&/v([0-9]*)/.exec(process.version);Kg&&parseFloat(Kg[1]);const bx="3.1.8";function An(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}typeof process!="object"||String(process)!=="[object process]"||process.browser;const Tx=typeof window!="undefined"&&typeof window.orientation!="undefined",Qg=typeof process!="undefined"&&process.version&&/v([0-9]*)/.exec(process.version);Qg&&parseFloat(Qg[1]);function I(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class Sx{constructor(e,n){I(this,"name",void 0),I(this,"workerThread",void 0),I(this,"isRunning",void 0),I(this,"result",void 0),I(this,"_resolve",void 0),I(this,"_reject",void 0),this.name=e,this.workerThread=n,this.isRunning=!0,this._resolve=()=>{},this._reject=()=>{},this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){An(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){An(this.isRunning),this.isRunning=!1,this._reject(e)}}const pc=new Map;function xx(t){An(t.source&&!t.url||!t.source&&t.url);let e=pc.get(t.source||t.url);return e||(t.url&&(e=Ax(t.url),pc.set(t.url,e)),t.source&&(e=Fv(t.source),pc.set(t.source,e))),An(e),e}function Ax(t){if(!t.startsWith("http"))return t;const e=Px(t);return Fv(e)}function Fv(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function Px(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function Uv(t,e=!0,n){const r=n||new Set;if(t){if(Jg(t))r.add(t);else if(Jg(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)Uv(t[i],e,r)}}return n===void 0?Array.from(r):[]}function Jg(t){return t?t instanceof ArrayBuffer||typeof MessagePort!="undefined"&&t instanceof MessagePort||typeof ImageBitmap!="undefined"&&t instanceof ImageBitmap||typeof OffscreenCanvas!="undefined"&&t instanceof OffscreenCanvas:!1}const gc=()=>{};class jv{static isSupported(){return typeof Worker!="undefined"}constructor(e){I(this,"name",void 0),I(this,"source",void 0),I(this,"url",void 0),I(this,"terminated",!1),I(this,"worker",void 0),I(this,"onMessage",void 0),I(this,"onError",void 0),I(this,"_loadableURL","");const{name:n,source:r,url:i}=e;An(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=gc,this.onError=s=>console.log(s),this.worker=this._createBrowserWorker()}destroy(){this.onMessage=gc,this.onError=gc,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,n){n=n||Uv(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=xx({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}}class Cx{constructor(e){I(this,"name","unnamed"),I(this,"source",void 0),I(this,"url",void 0),I(this,"maxConcurrency",1),I(this,"maxMobileConcurrency",1),I(this,"onDebug",()=>{}),I(this,"reuseWorkers",!0),I(this,"props",{}),I(this,"jobQueue",[]),I(this,"idleQueue",[]),I(this,"count",0),I(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props=A(A({},this.props),e),e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,n=(i,s,o)=>i.done(o),r=(i,s)=>i.error(s)){const i=new Promise(s=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:s}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new Sx(n.name,e);e.onMessage=i=>n.onMessage(r,i.type,i.payload),e.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new jv({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Tx?this.maxMobileConcurrency:this.maxConcurrency}}const Ox={maxConcurrency:3,maxMobileConcurrency:1,onDebug:()=>{},reuseWorkers:!0};class vn{static isSupported(){return jv.isSupported()}static getWorkerFarm(e={}){return vn._workerFarm=vn._workerFarm||new vn({}),vn._workerFarm.setProps(e),vn._workerFarm}constructor(e){I(this,"props",void 0),I(this,"workerPools",new Map),this.props=A({},Ox),this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy()}setProps(e){this.props=A(A({},this.props),e);for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:i}=e;let s=this.workerPools.get(n);return s||(s=new Cx({name:n,source:r,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}I(vn,"_workerFarm",void 0);const Rx="latest";function Mx(t,e={}){const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let s=t.version;s==="latest"&&(s=Rx);const o=s?"@".concat(s):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(r)}return An(i),i}function Ix(t,e=bx){An(t,"no worker provided");const n=t.version;return!(!e||!n)}function Lx(t,e){return vn.isSupported()?t.worker&&(e==null?void 0:e.worker):!1}async function kx(t,e,n,r,i){const s=t.id,o=Mx(t,n),l=vn.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n));const u=await l.startJob("process-on-worker",Nx.bind(null,i));return u.postMessage("process",{input:e,options:n}),await(await u.result).result}async function Nx(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:s,options:o}=r;try{const a=await t(s,o);e.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function Bv(t){return t&&typeof t=="object"&&t.isBuffer}function Dx(t){return Bv(t)?new Uint8Array(t.buffer,t.byteOffset,t.length).slice().buffer:t}function zv(t){if(Bv(t))return Dx(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function Fx(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}function Ux(...t){const e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),n=e.reduce((s,o)=>s+o.byteLength,0),r=new Uint8Array(n);let i=0;for(const s of e)r.set(s,i),i+=s.byteLength;return r.buffer}async function jx(t){const e=[];for await(const n of t)e.push(n);return Ux(...e)}function em(){let t;if(typeof window!="undefined"&&window.performance)t=window.performance.now();else if(typeof process!="undefined"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class tm{constructor(e,n){I(this,"name",void 0),I(this,"type",void 0),I(this,"sampleSize",1),I(this,"time",void 0),I(this,"count",void 0),I(this,"samples",void 0),I(this,"lastTiming",void 0),I(this,"lastSampleTime",void 0),I(this,"lastSampleCount",void 0),I(this,"_count",0),I(this,"_time",0),I(this,"_samples",0),I(this,"_startTime",0),I(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=em(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(em()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class _d{constructor(e){I(this,"id",void 0),I(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof tm?this.stats[n]=e:this.stats[n]=new tm(n,r)),this.stats[n]}}let Bx="";const nm={};function zx(t){for(const e in nm)if(t.startsWith(e)){const n=nm[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(Bx).concat(t)),t}function Vx(t){const e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}const $x=t=>typeof t=="boolean",Hs=t=>typeof t=="function",$o=t=>t!==null&&typeof t=="object",rm=t=>$o(t)&&t.constructor==={}.constructor,Gx=t=>t&&typeof t[Symbol.iterator]=="function",Hx=t=>t&&typeof t[Symbol.asyncIterator]=="function",Go=t=>typeof Response!="undefined"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,Ji=t=>typeof Blob!="undefined"&&t instanceof Blob,Wx=t=>t&&typeof t=="object"&&t.isBuffer,Xx=t=>typeof ReadableStream!="undefined"&&t instanceof ReadableStream||$o(t)&&Hs(t.tee)&&Hs(t.cancel)&&Hs(t.getReader),Yx=t=>$o(t)&&Hs(t.read)&&Hs(t.pipe)&&$x(t.readable),Vv=t=>Xx(t)||Yx(t),Zx=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,qx=/^([-\w.]+\/[-\w.+]+)/;function Kx(t){const e=qx.exec(t);return e?e[1]:t}function im(t){const e=Zx.exec(t);return e?e[1]:""}const Qx=/\?.*/;function Su(t){if(Go(t)){const e=mc(t.url||""),n=t.headers.get("content-type")||"";return{url:e,type:Kx(n)||im(e)}}return Ji(t)?{url:mc(t.name||""),type:t.type||""}:typeof t=="string"?{url:mc(t),type:im(t)}:{url:"",type:""}}function Jx(t){return Go(t)?t.headers["content-length"]||-1:Ji(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function mc(t){return t.replace(Qx,"")}async function $v(t){if(Go(t))return t;const e={},n=Jx(t);n>=0&&(e["content-length"]=String(n));const{url:r,type:i}=Su(t);i&&(e["content-type"]=i);const s=await nA(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:r}),o}async function eA(t){if(!t.ok){const e=await tA(t);throw new Error(e)}}async function tA(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(60),"..."):e}catch{}return e}async function nA(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=s=>{var o;return r(s==null||(o=s.target)===null||o===void 0?void 0:o.result)},i.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5),r=rA(n);return"data:base64,".concat(r)}return null}function rA(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}async function sm(t,e){if(typeof t=="string"){t=zx(t);let n=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(n=e.fetch),await fetch(t,n)}return await $v(t)}function vd(t){if(typeof window!="undefined"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process!="undefined"&&typeof process.versions=="object"&&Boolean(process.versions.electron))return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function gr(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||vd()}function iA(){return gr()&&typeof document!="undefined"}const Jn={self:typeof self!="undefined"&&self,window:typeof window!="undefined"&&window,global:typeof global!="undefined"&&global,document:typeof document!="undefined"&&document,process:typeof process=="object"&&process},sA=globalThis,oA=Jn.self||Jn.window||Jn.global,Cs=Jn.window||Jn.self||Jn.global,aA=Jn.document||{},oi=Jn.process||{},lA=console,Ed=typeof __VERSION__!="undefined"?__VERSION__:"untranspiled source";gr();const Ha=globalThis;function uA(){return typeof Ha.orientation!="undefined"}function wd(t){if(!t&&!gr())return"Node";if(vd(t))return"Electron";const n=t||(typeof navigator!="undefined"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i?"IE":Ha.chrome?"Chrome":Ha.safari?"Safari":Ha.mozInnerScreenX?"Firefox":"Unknown"}function cA(t,e){if(!t)throw new Error(e||"Assertion failed")}var fA=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Ed,self:oA,window:Cs,global:sA,document:aA,process:oi,console:lA,isBrowser:gr,isBrowserMainThread:iA,getBrowser:wd,isMobile:uA,isElectron:vd,assert:cA},Symbol.toStringTag,{value:"Module"}));function hA(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class dA{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";I(this,"storage",void 0),I(this,"id",void 0),I(this,"config",{}),this.storage=hA(r),this.id=e,this.config={},Object.assign(this.config,n),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}return this}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function pA(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function gA(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function yc(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let Pl;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Pl||(Pl={}));function om(t){return typeof t=="string"?Pl[t.toUpperCase()]||Pl.WHITE:t}function mA(t,e,n){return!gr&&typeof t=="string"&&(e&&(e=om(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=om(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function yA(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)typeof t[i]=="function"&&(e.find(s=>i===s)||(t[i]=t[i].bind(t)))}function Cl(t,e){if(!t)throw new Error(e||"Assertion failed")}function Kr(){let t;if(gr&&"performance"in Cs){var e,n;t=Cs==null||(e=Cs.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in oi){var r;const i=oi==null||(r=oi.hrtime)===null||r===void 0?void 0:r.call(oi);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Qr={debug:gr&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},_A={enabled:!0,level:0};function Lt(){}const am={},lm={once:!0};class Ho{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};I(this,"id",void 0),I(this,"VERSION",Ed),I(this,"_startTs",Kr()),I(this,"_deltaTs",Kr()),I(this,"_storage",void 0),I(this,"userData",{}),I(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this._storage=new dA("__probe-".concat(this.id,"__"),_A),this.userData={},this.timeStamp("".concat(this.id," started")),yA(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Kr()-this._startTs).toPrecision(10))}getDelta(){return Number((Kr()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:e}),this}setLevel(e){return this._storage.updateConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.updateConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){Cl(e,n)}warn(e){return this._getLogFunction(0,e,Qr.warn,arguments,lm)}error(e){return this._getLogFunction(0,e,Qr.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Qr.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Qr.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return this._getLogFunction(e,n,Qr.debug||Qr.info,arguments,lm)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||Lt,r&&[r],{tag:bA(n)}):Lt}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:o=1}=e;return this._shouldLog(n||r)?gr?wA({image:i,message:s,scale:o}):EA({image:i,message:s,scale:o}):Lt}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||Lt)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=um({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Lt)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=Gv(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=um({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,Cl(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Kr();const o=s.tag||s.message;if(s.once)if(!am[o])am[o]=Kr();else return Lt;return n=vA(this.id,s.message,s),r.bind(console,n,...s.args)}return Lt}}I(Ho,"VERSION",Ed);function Gv(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Cl(Number.isFinite(e)&&e>=0),e}function um(t){const{logLevel:e,message:n}=t;t.logLevel=Gv(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return Cl(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function vA(t,e,n){if(typeof e=="string"){const r=n.time?gA(pA(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=mA(e,n.color,n.background)}return e}function EA(t){let{image:e,message:n="",scale:r=1}=t,i=null;try{i=module.require("asciify-image")}catch{}return i?()=>i(e,{fit:"box",width:"".concat(Math.round(80*r),"%")}).then(s=>console.log(s)):Lt}function wA(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const o=yc(s,n,r);console.log(...o)},s.src=e,Lt}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...yc(e,n,r)),Lt;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...yc(s,n,r)),s.src=e.toDataURL(),Lt}return Lt}function bA(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const cm=new Ho({id:"loaders.gl"});class TA{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class SA{constructor(){I(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}}const Hv={fetch:null,mimeType:void 0,nothrow:!1,log:new SA,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},xA={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function Wv(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const Xv=()=>{const t=Wv();return t.globalOptions=t.globalOptions||A({},Hv),t.globalOptions};function AA(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],PA(t,n),OA(e,t,r)}function Yv(t,e){const n=Xv(),r=t||n;return typeof r.fetch=="function"?r.fetch:$o(r.fetch)?i=>sm(i,r):e!=null&&e.fetch?e==null?void 0:e.fetch:sm}function PA(t,e){fm(t,null,Hv,xA,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};fm(r,n.id,i,s,e)}}function fm(t,e,n,r,i){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in t){const l=!e&&$o(t[a]),u=a==="baseUri"&&!e,c=a==="workerUrl"&&e;if(!(a in n)&&!u&&!c){if(a in r)cm.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!l){const f=CA(a,i);cm.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(f))()}}}}function CA(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const s in i.options){if(t===s)return"Did you mean '".concat(i.id,".").concat(s,"'?");const o=s.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(s,"'?"))}return r}function OA(t,e,n){const r=t.options||{},i=A({},r);return RA(i,n),i.log===null&&(i.log=new TA),hm(i,Xv()),hm(i,e),i}function hm(t,e){for(const n in e)if(n in e){const r=e[n];rm(r)&&rm(t[n])?t[n]=A(A({},t[n]),e[n]):t[n]=e[n]}}function RA(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function bd(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function Td(t){var e,n;Al(t,"null loader"),Al(bd(t),"invalid loader");let r;return Array.isArray(t)&&(r=t[1],t=t[0],t=K(A({},t),{options:A(A({},t.options),r)})),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const Zv=()=>{const t=Wv();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function MA(t){const e=Zv();t=Array.isArray(t)?t:[t];for(const n of t){const r=Td(n);e.find(i=>r===i)||e.unshift(r)}}function IA(){return Zv()}const LA=new Ho({id:"loaders.gl"}),kA=/\.([^.]+)$/;async function NA(t,e=[],n,r){if(!qv(t))return null;let i=dm(t,e,K(A({},n),{nothrow:!0}),r);if(i)return i;if(Ji(t)&&(t=await t.slice(0,10).arrayBuffer(),i=dm(t,e,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(Kv(t));return i}function dm(t,e=[],n,r){if(!qv(t))return null;if(e&&!Array.isArray(e))return Td(e);let i=[];e&&(i=i.concat(e)),n!=null&&n.ignoreRegisteredLoaders||i.push(...IA()),FA(i);const s=DA(t,i,n,r);if(!s&&!(n!=null&&n.nothrow))throw new Error(Kv(t));return s}function DA(t,e,n,r){const{url:i,type:s}=Su(t),o=i||(r==null?void 0:r.url);let a=null,l="";if(n!=null&&n.mimeType&&(a=_c(e,n==null?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(n==null?void 0:n.mimeType)),a=a||UA(e,o),l=l||(a?"matched url ".concat(o):""),a=a||_c(e,s),l=l||(a?"matched MIME type ".concat(s):""),a=a||BA(e,t),l=l||(a?"matched initial data ".concat(Qv(t)):""),a=a||_c(e,n==null?void 0:n.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(s):""),l){var u;LA.log(1,"selectLoader selected ".concat((u=a)===null||u===void 0?void 0:u.name,": ").concat(l,"."))}return a}function qv(t){return!(t instanceof Response&&t.status===204)}function Kv(t){const{url:e,type:n}=Su(t);let r="No valid loader found (";r+=e?"".concat(Vx(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?Qv(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function FA(t){for(const e of t)Td(e)}function UA(t,e){const n=e&&kA.exec(e),r=n&&n[1];return r?jA(t,r):null}function jA(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function _c(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function BA(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(zA(e,n))return n}else if(ArrayBuffer.isView(e)){if(pm(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&pm(e,0,n))return n;return null}function zA(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function pm(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>VA(t,e,n,i))}function VA(t,e,n,r){if(r instanceof ArrayBuffer)return Fx(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":const i=jf(t,e,r.length);return r===i;default:return!1}}function Qv(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?jf(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?jf(t,0,e):""}function jf(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let s=0;s<n;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}const $A=256*1024;function*GA(t,e){const n=(e==null?void 0:e.chunkSize)||$A;let r=0;const i=new TextEncoder;for(;r<t.length;){const s=Math.min(t.length-r,n),o=t.slice(r,r+s);r+=s,yield i.encode(o)}}const HA=256*1024;function*WA(t,e={}){const{chunkSize:n=HA}=e;let r=0;for(;r<t.byteLength;){const i=Math.min(t.byteLength-r,n),s=new ArrayBuffer(i),o=new Uint8Array(t,r,i);new Uint8Array(s).set(o),r+=i,yield s}}const XA=1024*1024;async function*YA(t,e){const n=(e==null?void 0:e.chunkSize)||XA;let r=0;for(;r<t.size;){const i=r+n,s=await t.slice(r,i).arrayBuffer();r=i,yield s}}function gm(t,e){return Dv?ZA(t,e):qA(t)}async function*ZA(t,e){const n=t.getReader();let r;try{for(;;){const i=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:s,value:o}=await i;if(s)return;yield zv(o)}}catch{n.releaseLock()}}async function*qA(t,e){for await(const n of t)yield zv(n)}function KA(t,e){if(typeof t=="string")return GA(t,e);if(t instanceof ArrayBuffer)return WA(t,e);if(Ji(t))return YA(t,e);if(Vv(t))return gm(t,e);if(Go(t))return gm(t.body,e);throw new Error("makeIterator")}const Jv="Cannot convert supplied data type";function QA(t,e,n){if(e.text&&typeof t=="string")return t;if(Wx(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(Jv)}async function JA(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return QA(t,e);if(Ji(t)&&(t=await $v(t)),Go(t)){const i=t;return await eA(i),e.binary?await i.arrayBuffer():await i.text()}if(Vv(t)&&(t=KA(t,n)),Gx(t)||Hx(t))return jx(t);throw new Error(Jv)}function eP(t,e,n=null){if(n)return n;const r=A({fetch:Yv(e,t)},t);return Array.isArray(r.loaders)||(r.loaders=null),r}function tP(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:null}async function Sd(t,e,n,r){An(!r||typeof r=="object"),e&&!Array.isArray(e)&&!bd(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const{url:i}=Su(t),o=tP(e,r),a=await NA(t,o,n);return a?(n=AA(n,a,o,i),r=eP({url:i,parse:Sd,loaders:o},n,r),await nP(a,t,n,r)):null}async function nP(t,e,n,r){if(Ix(t),e=await JA(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,r,t);if(Lx(t,n))return await kx(t,e,n,r,Sd);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw An(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function Ol(t,e,n,r){!Array.isArray(e)&&!bd(e)&&(n=e,e=void 0);const i=Yv(n);let s=t;return typeof t=="string"&&(s=await i(t)),Ji(t)&&(s=await i(t)),await Sd(s,e,n)}const rP="3.1.8",{_parseImageNode:iP}=globalThis,Bf=typeof Image!="undefined",zf=typeof ImageBitmap!="undefined",sP=Boolean(iP),Vf=Dv?!0:sP;function oP(t){switch(t){case"auto":return zf||Bf||Vf;case"imagebitmap":return zf;case"image":return Bf;case"data":return Vf;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function aP(){if(zf)return"imagebitmap";if(Bf)return"image";if(Vf)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function lP(t){const e=cP(t);if(!e)throw new Error("Not an image");return e}function uP(t){switch(lP(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function cP(t){return typeof ImageBitmap!="undefined"&&t instanceof ImageBitmap?"imagebitmap":typeof Image!="undefined"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const fP=/^data:image\/svg\+xml/,hP=/\.svg((\?|#).*)?$/;function xd(t){return t&&(fP.test(t)||hP.test(t))}function dP(t,e){if(xd(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return e1(t,e)}function e1(t,e){if(xd(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function t1(t,e,n){const r=dP(t,n),i=self.URL||self.webkitURL,s=typeof r!="string"&&i.createObjectURL(r);try{return await pP(s||r,e)}finally{s&&i.revokeObjectURL(s)}}async function pP(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=s=>i(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){i(s)}})}const gP={};let mm=!0;async function mP(t,e,n){let r;xd(n)?r=await t1(t,e,n):r=e1(t,n);const i=e&&e.imagebitmap;return await yP(r,i)}async function yP(t,e=null){if((_P(e)||!mm)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),mm=!1}return await createImageBitmap(t)}function _P(t){for(const e in t||gP)return!1;return!0}const nn=!1,Ws=!0;function n1(t){const e=Wo(t);return vP(e)||bP(e)||EP(e)||wP(e)}function vP(t){const e=Wo(t);return e.byteLength>=24&&e.getUint32(0,nn)===2303741511?{mimeType:"image/png",width:e.getUint32(16,nn),height:e.getUint32(20,nn)}:null}function EP(t){const e=Wo(t);return e.byteLength>=10&&e.getUint32(0,nn)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,Ws),height:e.getUint16(8,Ws)}:null}function wP(t){const e=Wo(t);return e.byteLength>=14&&e.getUint16(0,nn)===16973&&e.getUint32(2,Ws)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Ws),height:e.getUint32(22,Ws)}:null}function bP(t){const e=Wo(t);if(!(e.byteLength>=3&&e.getUint16(0,nn)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:i}=TP();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,nn);if(i.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,nn),width:e.getUint16(s+7,nn)};if(!r.has(o))return null;s+=2,s+=e.getUint16(s,nn)}return null}function TP(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Wo(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function SP(t,e){const{mimeType:n}=n1(t)||{},r=globalThis._parseImageNode;return Al(r),await r(t,n)}async function xP(t,e,n){e=e||{};const i=(e.image||{}).type||"auto",{url:s}=n||{},o=AP(i);let a;switch(o){case"imagebitmap":a=await mP(t,e,s);break;case"image":a=await t1(t,e,s);break;case"data":a=await SP(t);break;default:Al(!1)}return i==="data"&&(a=uP(a)),a}function AP(t){switch(t){case"auto":case"data":return aP();default:return oP(t),t}}const PP=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],CP=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],OP={image:{type:"auto",decode:!0}},r1={id:"image",module:"images",name:"Images",version:rP,mimeTypes:CP,extensions:PP,parse:xP,tests:[t=>Boolean(n1(new DataView(t)))],options:OP};var fe=new Ho({id:"deck"});let $f={};function RP(t){$f=t}function ot(t){fe.level>0&&$f[t]&&$f[t].call(...arguments)}function MP(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}var IP={name:"JSON",extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:MP,parseTextSync:JSON.parse};const Xs="8.7.3",Wa=globalThis.deck&&globalThis.deck.VERSION;if(Wa&&Wa!==Xs)throw new Error("deck.gl - multiple versions detected: ".concat(Wa," vs ").concat(Xs));Wa||(fe.log(1,"deck.gl ".concat(Xs))(),globalThis.deck=K(A({},globalThis.deck),{VERSION:Xs,version:Xs,log:fe,_registerLoggers:RP}),MA([IP,[r1,{imagebitmap:{premultiplyAlpha:"none"}}]]));var LP=globalThis.deck;const Y=new Ho({id:"luma.gl"});function at(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const kP="Invalid WebGLRenderingContext",NP="Requires WebGL2";function xu(t){return typeof WebGLRenderingContext!="undefined"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&Number.isFinite(t._version))}function ae(t){return typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function DP(t){return ae(t)?t:null}function Au(t){return at(xu(t),kP),t}function tt(t){return at(ae(t),NP),t}var FP=bw(fA),Fe=FP;const Os={};function UP(t){Fe.global.console&&Fe.global.console.error&&Fe.global.console.error(t)}function jP(t){Fe.global.console&&Fe.global.console.log&&Fe.global.console.log(t)}function BP(t,e){Os[t]=!0,e!==void 0&&UP(e)}function zP(t){const e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(Os[r]=!0);while(r!==0);for(r in Os)if(Os[r])return delete Os[r],parseInt(r,10);return 0}}const Xo=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};Xo.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};Xo.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Wr=function(e){const n=this;this.gl=e,zP(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o;break}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const l=n.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,l,u,c){const f=n.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,s);const h=f.attribs[s];return h.buffer=n.currentArrayBuffer,h.size=o,h.type=a,h.normalized=l,h.stride=u,h.offset=c,h.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{jP("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};Wr.prototype.VERTEX_ARRAY_BINDING_OES=34229;Wr.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;const n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new Xo(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};Wr.prototype.createVertexArrayOES=function(){const e=new Xo(this);return this.vertexArrayObjects.push(e),e};Wr.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};Wr.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof Xo&&e.hasBeenBound&&e.ext===this)};Wr.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive){BP(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(i===s)return;(!i||s.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(n,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(i?i.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){const u=s.attribs[l],c=i?i.attribs[l]:null;if((!i||u.enabled!==c.enabled)&&(u.enabled?r.enableVertexAttribArray.call(n,l):r.disableVertexAttribArray.call(n,l)),u.enabled){let f=!1;(!i||u.buffer!==c.buffer)&&(o!==u.buffer&&(r.bindBuffer.call(n,34962,u.buffer),o=u.buffer),f=!0),(f||u.cached!==c.cached)&&r.vertexAttribPointer.call(n,l,u.size,u.type,u.normalized,u.stride,u.offset)}}this.currentArrayBuffer!==o&&r.bindBuffer.call(n,34962,this.currentArrayBuffer)};function VP(t){if(typeof t.createVertexArray=="function")return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const n=t.getExtension;t.getExtension=function(i){const s=n.call(this,i);return s||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Wr(this)),this.__OESVertexArrayObject))}}const ym="OES_element_index",_m="WEBGL_draw_buffers",$P="EXT_disjoint_timer_query",GP="EXT_disjoint_timer_query_webgl2",HP="EXT_texture_filter_anisotropic",vm="WEBGL_debug_renderer_info",WP=35723,XP=4352,YP=36795,ZP=34047,qP=37445,KP=37446,me=t=>ae(t)?void 0:0,QP={[3074]:t=>ae(t)?void 0:36064,[WP]:t=>ae(t)?void 0:XP,[35977]:me,[32937]:me,[YP]:(t,e)=>{const n=ae(t)?t.getExtension(GP):t.getExtension($P);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[qP]:(t,e)=>{const n=t.getExtension(vm);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[KP]:(t,e)=>{const n=t.getExtension(vm);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[ZP]:(t,e)=>{const n=t.luma.extensions[HP];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:me,[35071]:me,[37447]:me,[36063]:(t,e)=>{if(!ae(t)){const n=t.getExtension(_m);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:me,[35374]:me,[35377]:me,[34852]:t=>{if(!ae(t)){const e=t.getExtension(_m);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:t=>t.getExtension(ym)?2147483647:65535,[33001]:t=>t.getExtension(ym)?16777216:65535,[33e3]:t=>16777216,[37157]:me,[35373]:me,[35657]:me,[36183]:me,[37137]:me,[34045]:me,[35978]:me,[35979]:me,[35968]:me,[35376]:me,[35375]:me,[35659]:me,[37154]:me,[35371]:me,[35658]:me,[35076]:me,[35077]:me,[35380]:me};function JP(t,e,n){const r=QP[n],i=typeof r=="function"?r(t,e,n):r;return i!==void 0?i:e(n)}const e2="OES_vertex_array_object",i1="ANGLE_instanced_arrays",t2="WEBGL_draw_buffers",n2="EXT_disjoint_timer_query",r2="EXT_texture_filter_anisotropic",i2="VertexArray requires WebGL2 or OES_vertex_array_object extension";function s2(t,e){return{webgl2:ae(t),ext:t.getExtension(e)}}const s1={[e2]:{meta:{suffix:"OES"},createVertexArray:()=>{at(!1,i2)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[i1]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){at(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[t2]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{at(!1)}},[n2]:{meta:{suffix:"EXT"},createQuery:()=>{at(!1)},deleteQuery:()=>{at(!1)},beginQuery:()=>{at(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},vc={readBuffer:(t,e,n)=>{ae(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:s}=s2(t,i1);let o;switch(r){case 35069:o=i?void 0:!1;break;case 35070:o=!i&&!s?0:void 0;break}return o!==void 0?o:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!ae(t))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>{if(!ae(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter(t,e,n,r){switch(r){case 34046:const{extensions:i}=t.luma,s=i[r2];r=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(n,r)},getParameter:JP,hint(t,e,n,r){return e(n,r)}};function o2(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(VP(t),l2(t),c2(t,s1),u2(t,{target:e,target2:t}),e.polyfilled=!0),t}const a2=typeof global!="undefined"?global:window;a2.polyfillContext=o2;function l2(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}function u2(t,{target:e,target2:n}){Object.keys(vc).forEach(r=>{if(typeof vc[r]=="function"){const i=t[r]?t[r].bind(t):()=>{},s=vc[r].bind(null,t,i);e[r]=s,n[r]=s}})}function c2(t,e){for(const n of Object.getOwnPropertyNames(e))n!=="overrides"&&f2(t,{extension:n,target:t.luma,target2:t})}function f2(t,{extension:e,target:n,target2:r}){const i=s1[e];at(i);const{meta:s={}}=i,{suffix:o=""}=s,a=t.getExtension(e);for(const l of Object.keys(i)){const u=`${l}${o}`;let c=null;l==="meta"||typeof t[l]=="function"||(a&&typeof a[u]=="function"?c=(...f)=>a[u](...f):typeof i[l]=="function"&&(c=i[l].bind(n))),c&&(n[l]=c,r[l]=c)}}const Ad={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},In=(t,e,n)=>e?t.enable(n):t.disable(n),Em=(t,e,n)=>t.hint(n,e),_t=(t,e,n)=>t.pixelStorei(n,e),h2=(t,e)=>{const n=ae(t)?36009:36160;return t.bindFramebuffer(n,e)},d2=(t,e)=>t.bindFramebuffer(36008,e);function _s(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const p2={[3042]:In,[32773]:(t,e)=>t.blendColor(...e),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(t,e)=>t.clearColor(...e),[3107]:(t,e)=>t.colorMask(...e),[2884]:In,[2885]:(t,e)=>t.cullFace(e),[2929]:In,[2931]:(t,e)=>t.clearDepth(e),[2932]:(t,e)=>t.depthFunc(e),[2928]:(t,e)=>t.depthRange(...e),[2930]:(t,e)=>t.depthMask(e),[3024]:In,[35723]:Em,[36006]:h2,[2886]:(t,e)=>t.frontFace(e),[33170]:Em,[2849]:(t,e)=>t.lineWidth(e),[32823]:In,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:In,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:In,[3088]:(t,e)=>t.scissor(...e),[2960]:In,[2961]:(t,e)=>t.clearStencil(e),[2968]:(t,e)=>t.stencilMaskSeparate(1028,e),[36005]:(t,e)=>t.stencilMaskSeparate(1029,e),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(t,e)=>t.viewport(...e),[3333]:_t,[3317]:_t,[37440]:_t,[37441]:_t,[37443]:_t,[3330]:_t,[3332]:_t,[3331]:_t,[36010]:d2,[3314]:_t,[32878]:_t,[3316]:_t,[3315]:_t,[32877]:_t,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=_s(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=_s(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=_s(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=_s(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=_s(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function Ce(t,e,n){return e[t]!==void 0?e[t]:n[t]}const g2={blendEquation:(t,e,n)=>t.blendEquationSeparate(Ce(32777,e,n),Ce(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Ce(32969,e,n),Ce(32968,e,n),Ce(32971,e,n),Ce(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Ce(32824,e,n),Ce(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Ce(32938,e,n),Ce(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Ce(2962,e,n),Ce(2967,e,n),Ce(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Ce(34816,e,n),Ce(36003,e,n),Ce(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Ce(2964,e,n),Ce(2965,e,n),Ce(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Ce(34817,e,n),Ce(34818,e,n),Ce(34819,e,n))},wm={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({[36006]:n,[36010]:n});case 36009:return t({[36006]:n});case 36008:return t({[36010]:n});default:return null}},blendColor:(t,e,n,r,i)=>t({[32773]:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({[32777]:e,[34877]:e}),blendEquationSeparate:(t,e,n)=>t({[32777]:e,[34877]:n}),blendFunc:(t,e,n)=>t({[32969]:e,[32968]:n,[32971]:e,[32970]:n}),blendFuncSeparate:(t,e,n,r,i)=>t({[32969]:e,[32968]:n,[32971]:r,[32970]:i}),clearColor:(t,e,n,r,i)=>t({[3106]:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({[2931]:e}),clearStencil:(t,e)=>t({[2961]:e}),colorMask:(t,e,n,r,i)=>t({[3107]:[e,n,r,i]}),cullFace:(t,e)=>t({[2885]:e}),depthFunc:(t,e)=>t({[2932]:e}),depthRange:(t,e,n)=>t({[2928]:new Float32Array([e,n])}),depthMask:(t,e)=>t({[2930]:e}),frontFace:(t,e)=>t({[2886]:e}),lineWidth:(t,e)=>t({[2849]:e}),polygonOffset:(t,e,n)=>t({[32824]:e,[10752]:n}),sampleCoverage:(t,e,n)=>t({[32938]:e,[32939]:n}),scissor:(t,e,n,r,i)=>t({[3088]:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({[2968]:e,[36005]:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({[2962]:e,[2967]:n,[2963]:r,[34816]:e,[36003]:n,[36004]:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({[2964]:e,[2965]:n,[2966]:r,[34817]:e,[34818]:n,[34819]:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({[2978]:[e,n,r,i]})},en=(t,e)=>t.isEnabled(e),bm={[3042]:en,[2884]:en,[2929]:en,[3024]:en,[32823]:en,[32926]:en,[32928]:en,[3089]:en,[2960]:en,[35977]:en};function o1(t){for(const e in t)return!1;return!0}function m2(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function Tm(t,e){const n=t[e].bind(t);t[e]=function(...i){const s=i[0];return s in t.state.cache?t.state.enable?t.state.cache[s]:n(...i):n(...i)},Object.defineProperty(t[e],"name",{value:`${e}-from-cache`,configurable:!1})}function y2(t,e,n){const r=t[e].bind(t);t[e]=function(...s){const{valueChanged:o,oldValue:a}=n(t.state._updateCache,...s);return o&&r(...s),a},Object.defineProperty(t[e],"name",{value:`${e}-to-cache`,configurable:!1})}function _2(t){const e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}class v2{constructor(e,{copyState:n=!1,log:r=()=>{}}={}){this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?w2(e):Object.assign({},Ad),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(e={}){this.stateStack.push({})}pop(){at(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];Pn(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){at(s!==void 0);const o=e[s],a=this.cache[s];m2(o,a)||(n=!0,r=a,i&&!(s in i)&&(i[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:r}}}function a1(t,e={}){const{enable:n=!0,copyState:r}=e;if(at(r!==void 0),!t.state){const i=typeof global!="undefined"?global:window,{polyfillContext:s}=i;s&&s(t),t.state=new v2(t,{copyState:r}),_2(t);for(const o in wm){const a=wm[o];y2(t,o,a)}Tm(t,"getParameter"),Tm(t,"isEnabled")}return t.state.enable=n,t}function E2(t){t.state||a1(t,{copyState:!1}),t.state.push()}function Sm(t){at(t.state),t.state.pop()}function Pn(t,e){if(at(xu(t),"setParameters requires a WebGL context"),o1(e))return;const n={};for(const i in e){const s=Number(i),o=p2[i];o&&(typeof o=="string"?n[o]=!0:o(t,e[i],s))}const r=t.state&&t.state.cache;if(r)for(const i in n)g2[i](t,e,r)}function w2(t,e){if(e=e||Ad,typeof e=="number"){const i=e,s=bm[i];return s?s(t,i):t.getParameter(i)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const s=bm[i];r[i]=s?s(t,Number(i)):t.getParameter(Number(i))}return r}function b2(t){Pn(t,Ad)}function Ft(t,e,n){if(o1(e))return n(t);const{nocatch:r=!0}=e;E2(t),Pn(t,e);let i;if(r)i=n(t),Sm(t);else try{i=n(t)}finally{Sm(t)}return i}function Di(t){const{luma:e}=t;if(t.canvas&&e){const{clientWidth:n}=e.canvasSizeInfo;return n?t.drawingBufferWidth/n:1}return 1}function Ec(t,e,n=!0){const r=Di(t),i=t.drawingBufferWidth,s=t.drawingBufferHeight;return S2(e,r,i,s,n)}function T2(t){const e=typeof window=="undefined"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function S2(t,e,n,r,i){const s=xm(t[0],e,n);let o=Am(t[1],e,r,i),a=xm(t[0]+1,e,n);const l=a===n-1?a:a-1;a=Am(t[1]+1,e,r,i);let u;return i?(a=a===0?a:a+1,u=o,o=a):u=a===r-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(u-o+1,1)}}function xm(t,e,n){return Math.min(Math.round(t*e),n-1)}function Am(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const Pd=Fe.isBrowser(),x2=Pd&&typeof document!="undefined",l1={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function u1(t={}){at(Pd,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},l1,t);const{width:e,height:n}=t;function r(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}t.onError=r;let i;const{canvas:s}=t,o=O2({canvas:s,width:e,height:n,onError:r});return i=C2(o,t),i?(i=Cd(i,t),R2(i),i):null}function Cd(t,e={}){if(!t||t._instrumented)return t;t._version=t._version||M2(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},l1,e);const{manageState:n,debug:r}=e;return n&&a1(t,{copyState:!1,log:(...i)=>Y.log(1,...i)()}),Pd&&r&&(Fe.global.makeDebugContext?(t=Fe.global.makeDebugContext(t,e),Y.level=Math.max(Y.level,1)):Y.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function A2(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),s=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:s||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function P2(t,e={}){if(t.canvas){const r=T2(e.useDevicePixels);I2(t,r,e);return}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function C2(t,e){const{onError:n}=e;let r=null;const i=l=>r=l.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n(`Failed to create ${o&&!s?"WebGL2":"WebGL"} context: ${r||"Unknown error"}`)}function O2({canvas:t,width:e=800,height:n=600,onError:r}){let i;return typeof t=="string"?(x2&&document.readyState==="complete"||r(`createGLContext called on canvas '${t}' before page was loaded`),i=document.getElementById(t)):t?i=t:(i=document.createElement("canvas"),i.id="lumagl-canvas",i.style.width=Number.isFinite(e)?`${e}px`:"100%",i.style.height=Number.isFinite(n)?`${n}px`:"100%",document.body.insertBefore(i,document.body.firstChild)),i}function R2(t){const e=ae(t)?"WebGL2":"WebGL1",n=A2(t),r=n?`(${n.vendor},${n.renderer})`:"",i=t.debug?" debug":"";Y.info(1,`${e}${i} context ${r}`)()}function M2(t){return typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext?2:1}function I2(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;(!r||!i)&&(Y.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==i||s.devicePixelRatio!==e){let o=e;const a=Math.floor(r*o),l=Math.floor(i*o);t.canvas.width=a,t.canvas.height=l,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==l)&&(Y.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*o),t.canvas.height=Math.floor(i*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}const Ys="8.5.10",L2="set luma.log.level=1 (or higher) to trace rendering";class k2{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new _d({id:e})),this.stats.get(e)}}const Or=new k2;if(Fe.global.luma&&Fe.global.luma.VERSION!==Ys)throw new Error(`luma.gl - multiple VERSIONs detected: ${Fe.global.luma.VERSION} vs ${Ys}`);Fe.global.luma||(Fe.isBrowser()&&Y.log(1,`luma.gl ${Ys} - ${L2}`)(),Fe.global.luma=Fe.global.luma||{VERSION:Ys,version:Ys,log:Y,stats:Or,globals:{modules:{},nodeIO:{}}});Fe.global.luma;function N2(t){return typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function D2(t){return typeof window!="undefined"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function V(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function wc(t,e){if(typeof e!="string")return e;const n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");const r=t[e];return V(r!==void 0,`Accessing undefined constant GL.${e}`),r}function er(t,e){e=Number(e);for(const n in t)if(t[n]===e)return`GL.${n}`;return String(e)}const bc={};function ar(t="id"){bc[t]=bc[t]||1;const e=bc[t]++;return`${t}-${e}`}function Pm(t){return V(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function Fi(t){let e=!0;for(const n in t){e=!1;break}return e}function c1(t,e,n,r){const i=`See luma.gl ${n} Upgrade Guide at https://luma.gl/docs/upgrade-guide`,s=Object.getPrototypeOf(t);r.forEach(o=>{s.methodName||(s[o]=()=>{throw Y.removed(`Calling removed method ${e}.${o}: `,i)(),new Error(o)})})}const Jr="Resource subclass must define virtual methods";class On{constructor(e,n={}){Au(e);const{id:r,userData:i={}}=n;this.gl=e,this.gl2=e,this.id=r||ar(this.constructor.name),this.userData=i,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return`${this.constructor.name}(${this.id})`}get handle(){return this._handle}delete({deleteChildren:e=!1}={}){const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(r=>r.delete()),this}bind(e=this.handle){if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e,n={}){e=wc(this.gl,e),V(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=ae(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const a=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return s?l:a}}return this._getParameter(e,n)}getParameters(e={}){const{parameters:n,keys:r}=e,i=this.constructor.PARAMETERS||{},s=ae(this.gl),o={},a=n||Object.keys(i);for(const l of a){const u=i[l];if(u&&(!("webgl2"in u)||s)&&(!("extension"in u)||this.gl.getExtension(u.extension))){const f=r?er(this.gl,l):l;o[f]=this.getParameter(l,e),r&&u.type==="GLenum"&&(o[f]=er(this.gl,o[f]))}}return o}setParameter(e,n){e=wc(this.gl,e),V(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=ae(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(n=wc(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,r){return c1(this,e,n,r)}initialize(e){}_createHandle(){throw new Error(Jr)}_deleteHandle(){throw new Error(Jr)}_bindHandle(e){throw new Error(Jr)}_getOptsFromHandle(){throw new Error(Jr)}_getParameter(e,n){throw new Error(Jr)}_setParameter(e,n){throw new Error(Jr)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this.constructor.name,n=Or.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get(`${e}s Created`).incrementCount(),n.get(`${e}s Active`).incrementCount()}_removeStats(){const e=this.constructor.name;Or.get("Resource Counts").get(`${e}s Active`).decrementCount()}_trackAllocatedMemory(e,n=this.constructor.name){const r=Or.get("Memory Usage");r.get("GPU Memory").addCount(e),r.get(`${n} Memory`).addCount(e),this.byteLength=e}_trackDeallocatedMemory(e=this.constructor.name){const n=Or.get("Memory Usage");n.get("GPU Memory").subtractCount(this.byteLength),n.get(`${e} Memory`).subtractCount(this.byteLength),this.byteLength=0}}const F2="Failed to deduce GL constant from typed array";function Gf(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(F2)}}function ho(t,{clamped:e=!0}={}){switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function U2({data:t,width:e,height:n,bytesPerPixel:r=4,temp:i}){const s=e*r;i=i||new Uint8Array(s);for(let o=0;o<n/2;++o){const a=o*s,l=(n-o-1)*s;i.set(t.subarray(a,a+s)),t.copyWithin(a,l,l+s),t.set(i,l)}}function j2({data:t,width:e,height:n}){const r=Math.round(e/2),i=Math.round(n/2),s=new Uint8Array(r*i*4);for(let o=0;o<i;o++)for(let a=0;a<r;a++)for(let l=0;l<4;l++)s[(o*r+a)*4+l]=t[(o*2*e+a*2)*4+l];return{data:s,width:r,height:i}}function Hf(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:s={}}=n;for(const a in r)if(a in e){const u=r[a]?`${t}.${r[a]}`:"N/A";Y.removed(`${t}.${a}`,u)()}for(const a in i)if(a in e){const l=i[a];Y.deprecated(`${t}.${a}`,`${t}.${l}`)()}let o=null;for(const a in s)if(a in e){const l=s[a];Y.deprecated(`${t}.${a}`,`${t}.${l}`)(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]}return o||e}const B2={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},z2={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Tt{static getBytesPerElement(e){return ho(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return V(e.size),ho(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(...e){return new Tt(...[B2,...e])}constructor(...e){e.forEach(n=>this._assign(n)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Tt.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Tt.getBytesPerVertex(this)}_assign(e={}){return e=Hf("Accessor",e,z2),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const Cm=10,f1={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},V2={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:f1},$2={removedProps:f1};class ge extends On{constructor(e,n={}){super(e,n);this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(e=this.accessor){return Math.round(this.byteLength/Tt.getBytesPerElement(e))}getVertexCount(e=this.accessor){return Math.round(this.byteLength/Tt.getBytesPerVertex(e))}initialize(e={}){return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=Hf("Buffer",e,V2),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=Hf("Buffer",e,$2),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new Tt(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:r=0,srcOffset:i=0}=e,s=e.byteLength||e.length;V(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),i!==0||s!==void 0?(tt(this.gl),this.gl.bufferSubData(this.target,r,n,i,s)):this.gl.bufferSubData(o,r,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData({sourceBuffer:e,readOffset:n=0,writeOffset:r=0,size:i}){const{gl:s}=this;return tt(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,n,r,i),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData({dstData:e=null,srcByteOffset:n=0,dstOffset:r=0,length:i=0}={}){tt(this.gl);const s=ho(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),a=r;let l,u;e?(u=e.length,l=u-a):(l=Math.min(o,i||o),u=a+l);const c=Math.min(o,l);return i=i||c,V(i<=c),e=e||new s(u),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,r,i),this.gl.bindBuffer(36662,null),e}bind({target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:r=0,size:i}={}){return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,n,this.handle,r,i):(V(r===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind({target:e=this.target,index:n=this.accessor&&this.accessor.index}={}){return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(Cm,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e,n=0,r=e.byteLength+n){V(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,n,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,Cm),this.bytesUsed=r,this._trackAllocatedMemory(r);const s=Gf(e);return V(s),this.setAccessor(new Tt(this.accessor,{type:s})),this}_setByteLength(e,n=this.usage){V(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,n),this.gl.bindBuffer(i,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const n=ho(this.accessor.type||5126,{clamped:!1}),r=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new Tt(this.accessor,{type:Gf(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return Y.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Y.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return Y.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return Y.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Tt(this.accessor,e),this}}const Od={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},h1={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},d1={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function G2(t,e){const n=Od[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;const r=ae(t)&&n.gl2||n.gl1;return typeof r=="string"?t.getExtension(r):r}function H2(t,e){const n=Od[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}const W2=[9729,9728],Om=Fe.global.WebGLBuffer||function(){};class Fr extends On{static isSupported(e,n={}){const{format:r,linearFiltering:i}=n;let s=!0;return r&&(s=s&&G2(e,r),s=s&&(!i||H2(e,r))),s}constructor(e,n){const{id:r=ar("texture"),handle:i,target:s}=n;super(e,{id:r,handle:i});this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return`Texture(${this.id},${this.width}x${this.height})`}initialize(e={}){let n=e.data;if(n instanceof Promise)return n.then(m=>this.initialize(Object.assign({},e,{pixels:m,data:m}))),this;const r=typeof HTMLVideoElement!="undefined"&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:i=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:u={},textureUnit:c=void 0}=e;n||(n=i);let{width:f,height:h,dataFormat:g,type:_,compressed:v=!1,mipmaps:d=!0}=e;const{depth:p=0}=e;return{width:f,height:h,compressed:v,dataFormat:g,type:_}=this._deduceParameters({format:s,type:_,dataFormat:g,compressed:v,data:n,width:f,height:h}),this.width=f,this.height=h,this.depth=p,this.format=s,this.type=_,this.dataFormat=g,this.border=o,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),d&&this._isNPOT()&&(Y.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),d=!1,this._updateForNPOT(l)),this.mipmaps=d,this.setImageData({data:n,width:f,height:h,depth:p,format:s,type:_,dataFormat:g,border:o,mipmaps:d,parameters:u,compressed:v}),d&&this.generateMipmap(),this.setParameters(l),a&&(this.data=n),r&&(this._video={video:n,parameters:l,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize({height:e,width:n,mipmaps:r=!1}){return n!==this.width||e!==this.height?this.initialize({width:n,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(e={}){return this._isNPOT()?(Y.warn(`texture: ${this} is Non-Power-Of-Two, disabling mipmaping`)(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Ft(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:r=null,level:i=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=e;let{data:u=null,type:c=this.type,width:f=this.width,height:h=this.height,dataFormat:g=this.dataFormat,compressed:_=!1}=e;u||(u=r),{type:c,dataFormat:g,compressed:_,width:f,height:h}=this._deduceParameters({format:s,type:c,dataFormat:g,compressed:_,data:u,width:f,height:h});const{gl:v}=this;v.bindTexture(this.target,this.handle);let d=null;({data:u,dataType:d}=this._getDataType({data:u,compressed:_}));let p;if(Ft(this.gl,l,()=>{switch(d){case"null":v.texImage2D(n,i,s,f,h,o,g,c,u);break;case"typed-array":v.texImage2D(n,i,s,f,h,o,g,c,u,a);break;case"buffer":p=tt(v),p.bindBuffer(35052,u.handle||u),p.texImage2D(n,i,s,f,h,o,g,c,a),p.bindBuffer(35052,null);break;case"browser-object":ae(v)?v.texImage2D(n,i,s,f,h,o,g,c,u):v.texImage2D(n,i,s,g,c,u);break;case"compressed":for(const[m,w]of u.entries())v.compressedTexImage2D(n,m,w.format,w.width,w.height,o,w.data);break;default:V(!1,"Unknown image data type")}}),u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const m=h1[this.dataFormat]||4,w=d1[this.type]||1;this._trackAllocatedMemory(this.width*this.height*m*w,"Texture")}return this.loaded=!0,this}setSubImageData({target:e=this.target,pixels:n=null,data:r=null,x:i=0,y:s=0,width:o=this.width,height:a=this.height,level:l=0,format:u=this.format,type:c=this.type,dataFormat:f=this.dataFormat,compressed:h=!1,offset:g=0,border:_=this.border,parameters:v={}}){if({type:c,dataFormat:f,compressed:h,width:o,height:a}=this._deduceParameters({format:u,type:c,dataFormat:f,compressed:h,data:r,width:o,height:a}),V(this.depth===0,"texSubImage not supported for 3D textures"),r||(r=n),r&&r.data){const d=r;r=d.data,o=d.shape[0],a=d.shape[1]}r instanceof ge&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),Ft(this.gl,v,()=>{if(h)this.gl.compressedTexSubImage2D(e,l,i,s,o,a,u,r);else if(r===null)this.gl.texSubImage2D(e,l,i,s,o,a,f,c,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(e,l,i,s,o,a,f,c,r,g);else if(r instanceof Om){const d=tt(this.gl);d.bindBuffer(35052,r),d.texSubImage2D(e,l,i,s,o,a,f,c,g),d.bindBuffer(35052,null)}else ae(this.gl)?tt(this.gl).texSubImage2D(e,l,i,s,o,a,f,c,r):this.gl.texSubImage2D(e,l,i,s,f,c,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(e={}){return Y.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(e=this.textureUnit){const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(e=this.textureUnit){const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType({data:e,compressed:n=!1}){return n?{data:e,dataType:"compressed"}:e===null?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof ge?{data:e.handle,dataType:"buffer"}:e instanceof Om?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:r}=e;let{width:i,height:s,dataFormat:o,type:a,compressed:l}=e;const u=Od[n];return o=o||u&&u.dataFormat,a=a||u&&u.types[0],l=l||u&&u.compressed,{width:i,height:s}=this._deduceImageSize(r,i,s),{dataFormat:o,type:a,compressed:l,width:i,height:s,format:n,data:r}}_deduceImageSize(e,n,r){let i;return typeof ImageData!="undefined"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement!="undefined"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:n,height:r}:i={width:n>=0?n:1,height:r>=0?r:1},V(i,"Could not deduced texture size"),V(n===void 0||i.width===n,"Deduced texture width does not match supplied width"),V(r===void 0||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:V(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return ae(this.gl)||!this.width||!this.height?!1:!Pm(this.width)||!Pm(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:W2.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break}return n}}let X2="";function Y2(t,e){return V(typeof t=="string"),t=X2+t,new Promise((n,r)=>{try{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error(`Could not load image ${t}.`)),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){r(i)}})}class gt extends Fr{static isSupported(e,n){return Fr.isSupported(e,n)}constructor(e,n={}){Au(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:Y2(n.data)}));super(e,Object.assign({},n,{target:3553}));this.initialize(n),Object.seal(this)}}const Wf=[34069,34070,34071,34072,34073,34074];class p1 extends Fr{constructor(e,n={}){Au(e);super(e,Object.assign({},n,{target:34067}));this.initialize(n),Object.seal(this)}initialize(e={}){const{mipmaps:n=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(r)}),this}subImage({face:e,data:n,x:r=0,y:i=0,mipmapLevel:s=0}){return this._subImage({target:e,data:n,x:r,y:i,mipmapLevel:s})}async setCubeMapImageData({width:e,height:n,pixels:r,data:i,border:s=0,format:o=6408,type:a=5121}){const{gl:l}=this,u=r||i,c=await Promise.all(Wf.map(f=>{const h=u[f];return Promise.all(Array.isArray(h)?h:[h])}));this.bind(),Wf.forEach((f,h)=>{c[h].length>1&&this.opts.mipmaps!==!1&&Y.warn(`${this.id} has mipmap and multiple LODs.`)(),c[h].forEach((g,_)=>{e&&n?l.texImage2D(f,_,o,e,n,s,o,a,g):l.texImage2D(f,_,o,o,a,g)})}),this.unbind()}setImageDataForFace(e){const{face:n,width:r,height:i,pixels:s,data:o,border:a=0,format:l=6408,type:u=5121}=e,{gl:c}=this,f=s||o;return this.bind(),f instanceof Promise?f.then(h=>this.setImageDataForFace(Object.assign({},e,{face:n,data:h,pixels:h}))):this.width||this.height?c.texImage2D(n,0,l,r,i,a,l,u,f):c.texImage2D(n,0,l,l,u,f),this}}p1.FACES=Wf;class Z2 extends Fr{static isSupported(e){return ae(e)}constructor(e,n={}){tt(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1});super(e,n);this.initialize(n),Object.seal(this)}setImageData({level:e=0,dataFormat:n=6408,width:r,height:i,depth:s=1,border:o=0,format:a,type:l=5121,offset:u=0,data:c,parameters:f={}}){if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Ft(this.gl,f,()=>{ArrayBuffer.isView(c)&&this.gl.texImage3D(this.target,e,n,r,i,s,o,a,l,c),c instanceof ge&&(this.gl.bindBuffer(35052,c.handle),this.gl.texImage3D(this.target,e,n,r,i,s,o,a,l,u))}),c&&c.byteLength)this._trackAllocatedMemory(c.byteLength,"Texture");else{const h=h1[this.dataFormat]||4,g=d1[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*h*g,"Texture")}return this.loaded=!0,this}}const _r="EXT_color_buffer_float";var Rm={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:_r,bpp:2},[33327]:{gl2:_r,bpp:4},[34842]:{gl2:_r,bpp:8},[33326]:{gl2:_r,bpp:4},[33328]:{gl2:_r,bpp:8},[34836]:{gl2:_r,bpp:16},[35898]:{gl2:_r,bpp:4}};function q2(t,e,n){const r=n[e];if(!r)return!1;const i=ae(t)&&r.gl2||r.gl1;return typeof i=="string"?t.getExtension(i):i}class gi extends On{static isSupported(e,{format:n}={format:null}){return!n||q2(e,n,Rm)}static getSamplesForFormat(e,{format:n}){return e.getInternalformatParameter(36161,n,32937)}constructor(e,n={}){super(e,n);this.initialize(n),Object.seal(this)}initialize({format:e,width:n=1,height:r=1,samples:i=0}){return V(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),i!==0&&ae(this.gl)?this.gl.renderbufferStorageMultisample(36161,i,e,n,r):this.gl.renderbufferStorage(36161,e,n,r),this.format=e,this.width=n,this.height=r,this.samples=i,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Rm[this.format].bpp),this}resize({width:e,height:n}){return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const K2=256,Q2=1024,J2=16384,Mm=6144,Im=6145,Lm=6146,km=34041,g1="clear: bad arguments";function Rd(t,{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}={}){const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=J2,n!==!0&&(s.clearColor=n)),r&&(o|=K2,r!==!0&&(s.clearDepth=r)),i&&(o|=Q2,r!==!0&&(s.clearStencil=r)),V(o!==0,g1),Ft(t,s,()=>{t.clear(o)})}function eC(t,{framebuffer:e=null,buffer:n=Mm,drawBuffer:r=0,value:i=[0,0,0,0]}={}){tt(t),Ft(t,{framebuffer:e},()=>{switch(n){case Mm:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case Im:t.clearBufferfv(Im,0,[i]);break;case Lm:t.clearBufferiv(Lm,0,[i]);break;case km:const[s,o]=i;t.clearBufferfi(km,0,s,o);break;default:V(!1,g1)}})}function tC(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return V(!1),0}}function Pu(t,e={}){const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:u}=e;const{framebuffer:c,deleteFramebuffer:f}=m1(t);V(c);const{gl:h,handle:g,attachments:_}=c;a=a||c.width,l=l||c.height,s===36064&&g===null&&(s=1028),V(_[s]),u=u||_[s].type,o=rC(o,u,i,a,l),u=u||Gf(o);const v=h.bindFramebuffer(36160,g);return h.readPixels(n,r,a,l,i,u,o),h.bindFramebuffer(36160,v||null),f&&c.delete(),o}function Nm(t,{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}={}){let r=Pu(t,{sourceAttachment:e}),{width:i,height:s}=t;for(;s>n;)({data:r,width:i,height:s}=j2({data:r,width:i,height:s}));U2({data:r,width:i,height:s});const o=document.createElement("canvas");o.width=i,o.height=s;const a=o.getContext("2d"),l=a.createImageData(i,s);return l.data.set(r),a.putImageData(l,0,0),o.toDataURL()}function nC(t,e,n={}){const{sourceX:r=0,sourceY:i=0,targetMipmaplevel:s=0,targetInternalFormat:o=6408}=n;let{targetX:a,targetY:l,targetZ:u,width:c,height:f}=n;const{framebuffer:h,deleteFramebuffer:g}=m1(t);V(h);const{gl:_,handle:v}=h,d=typeof a!="undefined"||typeof l!="undefined"||typeof u!="undefined";a=a||0,l=l||0,u=u||0;const p=_.bindFramebuffer(36160,v);V(e);let m=null;if(e instanceof Fr&&(m=e,c=Number.isFinite(c)?c:m.width,f=Number.isFinite(f)?f:m.height,m.bind(0),e=m.target),!d)_.copyTexImage2D(e,s,o,r,i,c,f,0);else switch(e){case 3553:case 34067:_.copyTexSubImage2D(e,s,a,l,r,i,c,f);break;case 35866:case 32879:tt(_).copyTexSubImage3D(e,s,a,l,u,r,i,c,f);break}return m&&m.unbind(),_.bindFramebuffer(36160,p||null),g&&h.delete(),m}function m1(t){return t instanceof ke?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:hC(t),deleteFramebuffer:!0}}function rC(t,e,n,r,i){if(t)return t;e=e||5121;const s=ho(e,{clamped:!1}),o=tC(n);return new s(r*i*o)}const be={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function iC(t){const e=new gt(t,{format:6408,type:5126,dataFormat:6408}),n=new ke(t,{id:"test-framebuffer",check:!1,attachments:{[36064]:e}}),r=n.getStatus();return e.delete(),n.delete(),r===36053}var y1={[be.WEBGL2]:[!1,!0],[be.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[be.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[be.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[be.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[be.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[be.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[be.FLOAT_BLEND]:["EXT_float_blend"],[be.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[be.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[be.TEXTURE_FLOAT]:["OES_texture_float",!0],[be.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[be.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[be.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[be.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[be.COLOR_ATTACHMENT_RGBA32F]:[iC,"EXT_color_buffer_float"],[be.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[be.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[be.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[be.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[be.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[be.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]};const sC=2;function oC(t,e){return _1(t,e)}function _1(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>v1(t,n))}function aC(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in y1)t.luma.caps[e]===void 0&&(t.luma.caps[e]=v1(t,e));return t.luma.caps}function v1(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=lC(t,e)),t.luma.caps[e]||Y.log(sC,`Feature: ${e} not supported`)(),t.luma.caps[e]}function lC(t,e){const n=y1[e];V(n,e);let r;const i=ae(t)&&n[1]||n[0];if(typeof i=="function")r=i(t);else if(Array.isArray(i)){r=!0;for(const s of i)r=r&&Boolean(t.getExtension(s))}else typeof i=="string"?r=Boolean(t.getExtension(i)):typeof i=="boolean"?r=i:V(!1);return r}const Dm="Multiple render targets not supported";class ke extends On{static isSupported(e,n={}){const{colorBufferFloat:r,colorBufferHalfFloat:i}=n;let s=!0;return r&&(s=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(s=s&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new ke(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=tt(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=tt(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e,n={}){super(e,n);this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize({width:e=1,height:n=1,attachments:r=null,color:i=!0,depth:s=!0,stencil:o=!1,check:a=!0,readBuffer:l=void 0,drawBuffers:u=void 0}){if(V(e>=0&&n>=0,"Width and height need to be integers"),this.width=e,this.height=n,r)for(const c in r){const f=r[c];(Array.isArray(f)?f[0]:f).resize({width:e,height:n})}else r=this._createDefaultAttachments(i,s,o,e,n);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:u}),r&&a&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update({attachments:e={},readBuffer:n,drawBuffers:r,clearAttachments:i=!1,resizeAttachments:s=!0}){this.attach(e,{clearAttachments:i,resizeAttachments:s});const{gl:o}=this,a=o.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),r&&this._setDrawBuffers(r),o.bindFramebuffer(36160,a||null),this}resize(e={}){let{width:n,height:r}=e;if(this.handle===null)return V(n===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),n!==this.width&&r!==this.height&&Y.log(2,`Resizing framebuffer ${this.id} to ${n}x${r}`)();for(const i in this.attachments)this.attachments[i].resize({width:n,height:r});return this.width=n,this.height=r,this}attach(e,{clearAttachments:n=!1,resizeAttachments:r=!0}={}){const i={};n&&Object.keys(this.attachments).forEach(o=>{i[o]=null}),Object.assign(i,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in i){V(o!==void 0,"Misspelled framebuffer binding point?");const a=Number(o),l=i[a];let u=l;if(!u)this._unattach(a);else if(u instanceof gi)this._attachRenderbuffer({attachment:a,renderbuffer:u});else if(Array.isArray(l)){const[c,f=0,h=0]=l;u=c,this._attachTexture({attachment:a,texture:c,layer:f,level:h})}else this._attachTexture({attachment:a,texture:u,layer:0,level:0});r&&u&&u.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const e=this.getStatus();if(e!==36053)throw new Error(cC(e));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),r}clear(e={}){const{color:n,depth:r,stencil:i,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||r||i)&&Rd(this.gl,{color:n,depth:r,stencil:i}),s.forEach((a,l)=>{eC(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(e={}){return Y.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(e={}){return Y.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(e={}){return Y.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(e={}){return Y.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(e={}){return Y.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(e={}){return Y.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate({attachments:e=[],x:n=0,y:r=0,width:i,height:s}){const o=tt(this.gl),a=o.bindFramebuffer(36008,this.handle);return n===0&&r===0&&i===void 0&&s===void 0?o.invalidateFramebuffer(36008,e):o.invalidateFramebuffer(36008,e,n,r,i,s),o.bindFramebuffer(36008,a),this}getAttachmentParameter(e,n,r){let i=this._getAttachmentParameterFallback(n);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=er(this.gl,i)),i}getAttachmentParameters(e=36064,n,r=this.constructor.ATTACHMENT_PARAMETERS||[]){const i={};for(const s of r){const o=n?er(this.gl,s):s;i[o]=this.getAttachmentParameter(e,s,n)}return i}getParameters(e=!0){const n=Object.keys(this.attachments),r={};for(const i of n){const s=Number(i),o=e?er(this.gl,s):s;r[o]=this.getAttachmentParameters(s,e)}return r}show(){return typeof window!="undefined"&&window.open(Nm(this),"luma-debug-texture"),this}log(e=0,n=""){if(e>Y.level||typeof window=="undefined")return this;n=n||`Framebuffer ${this.id}`;const r=Nm(this,{targetMaxHeight:100});return Y.image({logLevel:e,message:n,image:r},n)(),this}bind({target:e=36160}={}){return this.gl.bindFramebuffer(e,this.handle),this}unbind({target:e=36160}={}){return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,r,i,s){let o=null;return e&&(o=o||{},o[36064]=new gt(this.gl,{id:`${this.id}-color0`,pixels:null,format:6408,type:5121,width:i,height:s,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(o[36064])),n&&r?(o=o||{},o[33306]=new gi(this.gl,{id:`${this.id}-depth-stencil`,format:35056,width:i,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new gi(this.gl,{id:`${this.id}-depth`,format:33189,width:i,height:s}),this.ownResources.push(o[36096])):r&&V(!1),o}_unattach(e){const n=this.attachments[e];!n||(n instanceof gi?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer({attachment:e=36064,renderbuffer:n}){const{gl:r}=this;r.framebufferRenderbuffer(36160,e,36161,n.handle),this.attachments[e]=n}_attachTexture({attachment:e=36064,texture:n,layer:r,level:i}){const{gl:s}=this;switch(s.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:tt(s).framebufferTextureLayer(36160,e,n.target,i,r);break;case 34067:const a=uC(r);s.framebufferTexture2D(36160,e,a,n.handle,i);break;case 3553:s.framebufferTexture2D(36160,e,3553,n.handle,i);break;default:V(!1,"Illegal texture type")}s.bindTexture(n.target,null),this.attachments[e]=n}_setReadBuffer(e){const n=DP(this.gl);n?n.readBuffer(e):V(e===36064||e===1029,Dm),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,r=tt(n);if(r)r.drawBuffers(e);else{const i=n.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):V(e.length===1&&(e[0]===36064||e[0]===1029),Dm)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=aC(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function uC(t){return t<34069?t+34069:t}function cC(t){return(ke.STATUS||{})[t]||`Framebuffer error ${t}`}const fC=[36049,36048,33296,33298,33299,33300,33301,33302,33303];ke.ATTACHMENT_PARAMETERS=fC;function E1(t,e){V(t instanceof gt||t instanceof p1||t instanceof Z2);const n=t.constructor,{gl:r,width:i,height:s,format:o,type:a,dataFormat:l,border:u,mipmaps:c}=t,f=Object.assign({width:i,height:s,format:o,type:a,dataFormat:l,border:u,mipmaps:c},e);return new n(r,f)}function hC(t,e){const{gl:n,width:r,height:i,id:s}=t;return new ke(n,Object.assign({},e,{id:`framebuffer-for-${s}`,width:r,height:i,attachments:{[36064]:t}}))}function Xa(t,e="unnamed"){const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}const dC=35632,pC=35633;function gC(t){switch(t){case dC:return"fragment";case pC:return"vertex";default:return"unknown type"}}function mC(t,e,n,r){const i=t.split(/\r?\n/),s={},o={},a=r||Xa(e)||"(unnamed)",l=`${gC(n)} shader ${a}`;for(let c=0;c<i.length;c++){const f=i[c];if(f.length<=1)continue;const h=f.split(":"),g=h[0],_=parseInt(h[2],10);if(isNaN(_))throw new Error(`GLSL compilation error in ${l}: ${t}`);g!=="WARNING"?s[_]=f:o[_]=f}const u=yC(e);return{shaderName:l,errors:Fm(s,u),warnings:Fm(o,u)}}function Fm(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(!(!t[r+3]&&!t[r+2]&&!t[r+1])&&(n+=`${i}
`,t[r+1])){const s=t[r+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0,u=s.substring(o.join(":").length+1).trim();n+=w1(`^^^ ${a}: ${u}

`,l)}}return n}function yC(t,e=1,n=": "){const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((s,o)=>{const a=String(o+e),l=a.length;return w1(a,i-l)+n+s})}function w1(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return`${n}${t}`}function b1(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}const _C="Shader: GLSL source code must be a JavaScript string";class po extends On{static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return V(!1),"unknown"}}constructor(e,n){Au(e),V(typeof n.source=="string",_C);const r=Xa(n.source,null)||n.id||ar(`unnamed ${po.getTypeName(n.shaderType)}`);super(e,{id:r});this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize({source:e}){const n=Xa(e,null);n&&(this.id=ar(n)),this._compile(e)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return`${po.getTypeName(this.shaderType)}:${this.id}`}getName(){return Xa(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(e=this.source){if(e.startsWith("#version ")||(e=`#version 100
${e}`),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:s,warnings:o}=mC(r,this.source,this.shaderType,this.id);throw Y.error(`GLSL compilation errors in ${i}
${s}`)(),Y.warn(`GLSL compilation warnings in ${i}
${o}`)(),new Error(`GLSL compilation errors in ${i}`)}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class Tc extends po{constructor(e,n){typeof n=="string"&&(n={source:n});super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class Sc extends po{constructor(e,n){typeof n=="string"&&(n={source:n});super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const vC={[5126]:ve.bind(null,"uniform1fv",vt,1,Qe),[35664]:ve.bind(null,"uniform2fv",vt,2,Qe),[35665]:ve.bind(null,"uniform3fv",vt,3,Qe),[35666]:ve.bind(null,"uniform4fv",vt,4,Qe),[5124]:ve.bind(null,"uniform1iv",Ln,1,Qe),[35667]:ve.bind(null,"uniform2iv",Ln,2,Qe),[35668]:ve.bind(null,"uniform3iv",Ln,3,Qe),[35669]:ve.bind(null,"uniform4iv",Ln,4,Qe),[35670]:ve.bind(null,"uniform1iv",Ln,1,Qe),[35671]:ve.bind(null,"uniform2iv",Ln,2,Qe),[35672]:ve.bind(null,"uniform3iv",Ln,3,Qe),[35673]:ve.bind(null,"uniform4iv",Ln,4,Qe),[35674]:ve.bind(null,"uniformMatrix2fv",vt,4,mn),[35675]:ve.bind(null,"uniformMatrix3fv",vt,9,mn),[35676]:ve.bind(null,"uniformMatrix4fv",vt,16,mn),[35678]:Ye,[35680]:Ye,[5125]:ve.bind(null,"uniform1uiv",Ta,1,Qe),[36294]:ve.bind(null,"uniform2uiv",Ta,2,Qe),[36295]:ve.bind(null,"uniform3uiv",Ta,3,Qe),[36296]:ve.bind(null,"uniform4uiv",Ta,4,Qe),[35685]:ve.bind(null,"uniformMatrix2x3fv",vt,6,mn),[35686]:ve.bind(null,"uniformMatrix2x4fv",vt,8,mn),[35687]:ve.bind(null,"uniformMatrix3x2fv",vt,6,mn),[35688]:ve.bind(null,"uniformMatrix3x4fv",vt,12,mn),[35689]:ve.bind(null,"uniformMatrix4x2fv",vt,8,mn),[35690]:ve.bind(null,"uniformMatrix4x3fv",vt,12,mn),[35678]:Ye,[35680]:Ye,[35679]:Ye,[35682]:Ye,[36289]:Ye,[36292]:Ye,[36293]:Ye,[36298]:Ye,[36299]:Ye,[36300]:Ye,[36303]:Ye,[36306]:Ye,[36307]:Ye,[36308]:Ye,[36311]:Ye},EC={},wC={},bC={},Um=[0];function Md(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(Um[0]=t,t=Um);const i=t.length;if(i%e&&Y.warn(`Uniform size should be multiples of ${e}`,t)(),t instanceof n)return t;let s=r[i];s||(s=new n(i),r[i]=s);for(let o=0;o<i;o++)s[o]=t[o];return s}function vt(t,e){return Md(t,e,Float32Array,EC)}function Ln(t,e){return Md(t,e,Int32Array,wC)}function Ta(t,e){return Md(t,e,Uint32Array,bC)}function jm(t,e,n){const r=vC[n.type];if(!r)throw new Error(`Unknown GLSL uniform type ${n.type}`);return r().bind(null,t,e)}function TC(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error(`Failed to parse GLSL uniform name ${t}`);return{name:n[1],length:n[2]||1,isArray:Boolean(n[2])}}function SC(t,e,n){for(const r in t){const i=t[r];if((!n||Boolean(n[r]))&&!xC(i))throw e=e?`${e} `:"",console.error(`${e} Bad uniform ${r}`,i),new Error(`${e} Bad uniform ${r}`)}return!0}function xC(t){return Array.isArray(t)||ArrayBuffer.isView(t)?PC(t):isFinite(t)||t===!0||t===!1||t instanceof Fr||t instanceof gi?!0:t instanceof ke?Boolean(t.texture):!1}function AC(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let i=0,s=n.length;i<s;++i)r[i]=n[i]}else t[e]=n.slice();else t[e]=n}function PC(t){if(t.length===0)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function Ye(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function ve(t,e,n,r){let i=null,s=null;return(o,a,l)=>{const u=e(l,n),c=u.length;let f=!1;if(i===null)i=new Float32Array(c),s=c,f=!0;else{V(s===c,"Uniform length cannot change.");for(let h=0;h<c;++h)if(u[h]!==i[h]){f=!0;break}}return f&&(r(o,t,a,u),i.set(u)),f}}function Qe(t,e,n,r){t[e](n,r)}function mn(t,e,n,r){t[e](n,!1,r)}const CC=5120,OC=5121,RC=5122,MC=5123,Bm=0,Sa=1,IC=2,LC=3,xa=4,kC=5,NC=6,Ne=5126,DC=35664,FC=35665,UC=35666,vs=5124,jC=35667,BC=35668,zC=35669,Es=5125,VC=36294,$C=36295,GC=36296,HC=35670,WC=35671,XC=35672,YC=35673,ZC=35674,qC=35675,KC=35676,QC=35685,JC=35686,e3=35687,t3=35688,n3=35689,r3=35690,Xf={[Ne]:[Ne,1,"float"],[DC]:[Ne,2,"vec2"],[FC]:[Ne,3,"vec3"],[UC]:[Ne,4,"vec4"],[vs]:[vs,1,"int"],[jC]:[vs,2,"ivec2"],[BC]:[vs,3,"ivec3"],[zC]:[vs,4,"ivec4"],[Es]:[Es,1,"uint"],[VC]:[Es,2,"uvec2"],[$C]:[Es,3,"uvec3"],[GC]:[Es,4,"uvec4"],[HC]:[Ne,1,"bool"],[WC]:[Ne,2,"bvec2"],[XC]:[Ne,3,"bvec3"],[YC]:[Ne,4,"bvec4"],[ZC]:[Ne,8,"mat2"],[QC]:[Ne,8,"mat2x3"],[JC]:[Ne,8,"mat2x4"],[qC]:[Ne,12,"mat3"],[e3]:[Ne,12,"mat3x2"],[t3]:[Ne,12,"mat3x4"],[KC]:[Ne,16,"mat4"],[n3]:[Ne,16,"mat4x2"],[r3]:[Ne,16,"mat4x3"]};function i3(t){switch(t){case Bm:return Bm;case Sa:return Sa;case LC:return Sa;case IC:return Sa;case xa:return xa;case kC:return xa;case NC:return xa;default:return V(!1),0}}function zm(t){const e=Xf[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function T1(t,e){switch(t){case CC:case OC:case RC:case MC:t=Ne;break}for(const n in Xf){const[r,i,s]=Xf[n];if(r===t&&i===e)return{glType:n,name:s}}return null}class s3{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,r=n.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getActiveAttrib(e.handle,i),l=n.getAttribLocation(e.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((i,s)=>i.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!ae(n))return;const r=n.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,s,o,a)}this.varyingInfos.sort((i,s)=>i.location-s.location)}_addAttribute(e,n,r,i){const{type:s,components:o}=zm(r),a={type:s,size:i*o};this._inferProperties(e,n,a);const l={location:e,name:n,accessor:new Tt(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[e]=l,this.attributeInfosByName[l.name]=l}_inferProperties(e,n,r){/instance/i.test(n)&&(r.divisor=1)}_addVarying(e,n,r,i){const{type:s,components:o}=zm(r),a=new Tt({type:s,size:i*o}),l={location:e,name:n,accessor:a};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const Vm=4,o3=35981,a3=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class S1 extends On{constructor(e,n={}){super(e,n);this.stubRemovedMethods("Program","v6.0",a3),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(e={}){const{hash:n,vs:r,fs:i,varyings:s,bufferMode:o=o3}=e;return this.hash=n||"",this.vs=typeof r=="string"?new Tc(this.gl,{id:`${e.id}-vs`,source:r}):r,this.fs=typeof i=="string"?new Sc(this.gl,{id:`${e.id}-fs`,source:i}):i,V(this.vs instanceof Tc),V(this.fs instanceof Sc),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(tt(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new s3(this),this.setProps(e)}delete(e={}){return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw({logPriority:e,drawMode:n=4,vertexCount:r,offset:i=0,start:s,end:o,isIndexed:a=!1,indexType:l=5123,instanceCount:u=0,isInstanced:c=u>0,vertexArray:f=null,transformFeedback:h,framebuffer:g,parameters:_={},uniforms:v,samplers:d}){if((v||d)&&(Y.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(v||{})),Y.priority>=e){const p=g?g.id:"default",m=`mode=${er(this.gl,n)} verts=${r} instances=${u} indexType=${er(this.gl,l)} isInstanced=${c} isIndexed=${a} Framebuffer=${p}`;Y.log(e,m)()}return V(f),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||r===0||c&&u===0?!1:(f.bindForDraw(r,u,()=>{if(g!==void 0&&(_=Object.assign({},_,{framebuffer:g})),h){const p=i3(n);h.begin(p)}this._bindTextures(),Ft(this.gl,_,()=>{a&&c?this.gl2.drawElementsInstanced(n,r,l,i,u):a&&ae(this.gl)&&!isNaN(s)&&!isNaN(o)?this.gl2.drawRangeElements(n,s,o,r,l,i):a?this.gl.drawElements(n,r,l,i):c?this.gl2.drawArraysInstanced(n,i,r,u):this.gl.drawArrays(n,i,r)}),h&&h.end()}),!0)}setUniforms(e={}){Y.priority>=2&&SC(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const r=e[n],i=this._uniformSetters[n];if(i){let s=r,o=!1;if(s instanceof ke&&(s=s.texture),s instanceof Fr)if(o=this.uniforms[n]!==r,o){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:l}=i;a.bind(l),s=l,this._textureUniforms[n]=a}else s=i.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(i(s)||o)&&AC(this.uniforms,n,r)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const r=this._textureUniforms[n];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),r={};for(const i of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new Tc({handle:i});break;case 35632:r.fs=new Sc({handle:i});break}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=ar(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?`${e}-program`:"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),Y.time(Vm,`linkProgram for ${this._getName()}`)(),e.linkProgram(this.handle),Y.timeEnd(Vm,`linkProgram for ${this._getName()}`)(),e.debug||Y.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error(`Error linking: ${e.getProgramInfoLog(this.handle)}`);if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error(`Error validating: ${e.getProgramInfoLog(this.handle)}`)}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const r=this.gl.getActiveUniform(this.handle,n),{name:i}=TC(r.name);let s=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=jm(e,s,r),r.size>1)for(let o=0;o<r.size;o++)s=e.getUniformLocation(this.handle,`${i}[${o}]`),this._uniformSetters[`${i}[${o}]`]=jm(e,s,r)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}const l3=34918,u3=34919,c3=35007,f3=36795,h3=35976,d3=35887,p3=36202;class Rl extends On{static isSupported(e,n=[]){const r=ae(e),i=_1(e,be.TIMER_QUERY);let s=r||i;for(const o of n)switch(o){case"queries":s=s&&r;break;case"timers":s=s&&i;break;default:V(!1)}return s}constructor(e,n={}){super(e,n);this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(c3)}beginOcclusionQuery({conservative:e=!1}={}){return this.begin(e?p3:d3)}beginTransformFeedbackQuery(){return this.begin(h3)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,u3);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(f3)}getResult(){return this.gl2.getQueryParameter(this.handle,l3)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(e=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,i)=>{const s=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return Rl.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class x1 extends On{static isSupported(e){return ae(e)}constructor(e,n={}){tt(e);super(e,n);this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(e={}){return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Fi(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(e={}){return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const r=this._getVaryingIndex(e),{buffer:i,byteSize:s,byteOffset:o}=this._getBufferParams(n);return r<0?(this.unused[e]=i,Y.warn(()=>`${this.id} unused varying buffer ${e}`)(),this):(this.buffers[r]=n,this.bindOnUse||this._bindBuffer(r,i,o,s),this)}begin(e=0){return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,r,i;return e instanceof ge?i=e:(i=e.buffer,r=e.byteSize,n=e.byteOffset),(n!==void 0||r!==void 0)&&(n=n||0,r=r||i.byteLength-n),{buffer:i,byteOffset:n,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n,r=0,i){const s=n&&n.handle;return!s||i===void 0?this.gl.bindBufferBase(35982,e,s):this.gl.bindBufferRange(35982,e,s,r,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let Aa=null;function g3(t){return(!Aa||Aa.byteLength<t)&&(Aa=new ArrayBuffer(t)),Aa}function m3(t,e){const n=g3(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function y3({target:t,source:e,start:n=0,count:r=1}){const i=e.length,s=r*i;let o=0;for(let a=n;o<i;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}const _3="elements must be GL.ELEMENT_ARRAY_BUFFER";class wt extends On{static isSupported(e,n={}){return n.constantAttributeZero?ae(e)||wd()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new wt(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return wt.MAX_ATTRIBUTES=wt.MAX_ATTRIBUTES||e.getParameter(34921),wt.MAX_ATTRIBUTES}static setConstant(e,n,r){switch(r.constructor){case Float32Array:wt._setConstantFloatArray(e,n,r);break;case Int32Array:wt._setConstantIntArray(e,n,r);break;case Uint32Array:wt._setConstantUintArray(e,n,r);break;default:V(!1)}}constructor(e,n={}){const r=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:r}));this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return wt.getMaxAttributes(this.gl)}initialize(e={}){return this.setProps(e)}setProps(e){return this}setElementBuffer(e=null,n={}){return V(!e||e.target===34963,_3),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,r){if(n.target===34963)return this.setElementBuffer(n,r);const{size:i,type:s,stride:o,offset:a,normalized:l,integer:u,divisor:c}=r,{gl:f,gl2:h}=this;return e=Number(e),this.bind(()=>{f.bindBuffer(34962,n.handle),u?(V(ae(f)),h.vertexAttribIPointer(e,i,s,o,a)):f.vertexAttribPointer(e,i,s,l,o,a),f.enableVertexAttribArray(e),h.vertexAttribDivisor(e,c||0)}),this}enable(e,n=!0){return!n&&e===0&&!wt.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const r=this._normalizeConstantArrayValue(n),i=r.byteLength*e,s=r.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new ge(this.gl,i),o=o||this.buffer.reallocate(i),o=o||!this._compareConstantArrayValues(r,this.bufferValue),o){const a=m3(n.constructor,s);y3({target:a,source:r,start:0,count:s}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==n[r])return!1;return!0}static _setConstantFloatArray(e,n,r){switch(r.length){case 1:e.vertexAttrib1fv(n,r);break;case 2:e.vertexAttrib2fv(n,r);break;case 3:e.vertexAttrib3fv(n,r);break;case 4:e.vertexAttrib4fv(n,r);break;default:V(!1)}}static _setConstantIntArray(e,n,r){switch(V(ae(e)),r.length){case 1:e.vertexAttribI1iv(n,r);break;case 2:e.vertexAttribI2iv(n,r);break;case 3:e.vertexAttribI3iv(n,r);break;case 4:e.vertexAttribI4iv(n,r);break;default:V(!1)}}static _setConstantUintArray(e,n,r){switch(V(ae(e)),r.length){case 1:e.vertexAttribI1uiv(n,r);break;case 2:e.vertexAttribI2uiv(n,r);break;case 3:e.vertexAttribI3uiv(n,r);break;case 4:e.vertexAttribI4uiv(n,r);break;default:V(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,{location:n}){return V(Number.isFinite(n)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(n,e);default:return this.gl.getVertexAttrib(n,e)}})}}const v3="VertexArray: attributes must be Buffers or constants (i.e. typed array)",E3=/^(.+)__LOCATION_([0-9]+)$/,w3=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class b3{constructor(e,n={}){const r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new wt(e),c1(this,"VertexArray","v6.0",w3),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(e={}){return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e){const r=e[n];this._setAttribute(n,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(e=null,n={}){return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n,r={}){if(n.target===34963)return this.setElementBuffer(n,r);const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,r);return i>=0&&(this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,n,s)),this}setConstant(e,n,r={}){const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},r));return i>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new ge(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof ge&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof ge&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),i=r()}),i}_resolveLocationAndAccessor(e,n,r,i){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,Y.once(3,()=>`unused value ${e} in ${this.id}`)(),s;const l=this._getAttributeInfo(a||o);if(!l)return s;const u=this.accessors[o]||{},c=Tt.resolve(l.accessor,u,r,i),{size:f,type:h}=c;return V(Number.isFinite(f)&&Number.isFinite(h)),{location:o,accessor:c}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const r=E3.exec(e),i=r?r[1]:e,s=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+s,name:i}:{location:-1}}_setAttribute(e,n){if(n instanceof ge)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof ge){const r=n[0],i=n[1];this.setBuffer(e,r,i)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){const r=n;this.setConstant(e,r)}else if(n.buffer instanceof ge){const r=n;this.setBuffer(e,r.buffer,r)}else throw new Error(v3)}_setConstantAttributes(e,n){const r=Math.max(e|0,n|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)i=this.values[s],ArrayBuffer.isView(i)&&this._setConstantAttribute(s,i)}_setConstantAttributeZero(e,n){if(wt.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const r=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,n){wt.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const r=this.values[n],i=this.accessors[n];if(!r)return;const{divisor:s}=i,o=s>0;if(e.isInstanced=e.isInstanced||o,r instanceof ge){const a=r;if(o){const l=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,l)}else{const l=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,l)}}}setElements(e=null,n={}){return Y.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function T3(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(i+=`,${o%r===0?" ":""}`),i+=go(t[o],e);const s=t.length>n?"...":"]";return`${i}${s}`}function go(t,e={}){const{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return T3(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return r?"0":"0.";if(r||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function $m({header:t="Uniforms",program:e,uniforms:n,undefinedOnly:r=!1}){V(e);const i=".*_.*",s=".*Matrix",o=e._uniformSetters,a={},l=Object.keys(o).sort();let u=0;for(const h of l)!h.match(i)&&!h.match(s)&&xc({table:a,header:t,uniforms:n,uniformName:h,undefinedOnly:r})&&u++;for(const h of l)h.match(s)&&xc({table:a,header:t,uniforms:n,uniformName:h,undefinedOnly:r})&&u++;for(const h of l)a[h]||xc({table:a,header:t,uniforms:n,uniformName:h,undefinedOnly:r})&&u++;let c=0;const f={};if(!r)for(const h in n){const g=n[h];a[h]||(c++,f[h]={Type:`NOT USED: ${g}`,[t]:go(g)})}return{table:a,count:u,unusedTable:f,unusedCount:c}}function xc({table:t,header:e,uniforms:n,uniformName:r,undefinedOnly:i}){const s=n[r],o=S3(s);return!i||!o?(t[r]={[e]:o?go(s):"N/A","Uniform Type":o?s:"NOT PROVIDED"},!0):!1}function S3(t){return t!=null}function x3({vertexArray:t,header:e="Attributes"}){if(!t.configuration)return{};const n={};t.elements&&(n.ELEMENT_ARRAY_BUFFER=Gm(t,t.elements,null,e));const r=t.values;for(const i in r){const s=t._getAttributeInfo(i);if(s){let o=`${i}: ${s.name}`;const a=t.accessors[s.location];a&&(o=`${i}: ${A3(s.name,a)}`),n[o]=Gm(t,r[i],a,e)}}return n}function Gm(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let s="NOT PROVIDED",o=1,a=0,l=0,u,c,f;if(n&&(s=n.type,o=n.size,s=String(s).replace("Array",""),u=s.indexOf("nt")!==-1),e instanceof ge){const h=e,{data:g,changed:_}=h.getDebugData();c=_?"*":"",f=g,l=h.byteLength,a=l/g.BYTES_PER_ELEMENT/o;let v;return n?v=`${n.divisor>0?"I ":"P "} ${a} (x${o}=${l} bytes ${er(i,s)})`:(u=!0,v=`${l} bytes`),{[r]:`${c}${go(f,{size:o,isInteger:u})}`,"Format ":v}}return f=e,o=e.length,s=String(e.constructor.name).replace("Array",""),u=s.indexOf("nt")!==-1,{[r]:`${go(f,{size:o,isInteger:u})} (constant)`,"Format ":`${o}x${s} (constant)`}}function A3(t,e){const{type:n,size:r}=e,i=T1(n,r);return i?`${t} (${i.name})`:t}function P3(t){const e={},n=`Accessors for ${t.id}`;for(const r of t.attributeInfos)if(r){const i=Hm(r);e[`in ${i}`]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const i=Hm(r);e[`out ${i}`]={[n]:JSON.stringify(r.accessor)}}return e}function Hm(t){const{type:e,size:n}=t.accessor,r=T1(e,n);return r?`${r.name} ${t.name}`:t.name}const Wm=Fe.isBrowser()&&typeof document!="undefined";let C3=0;class O3{constructor(e={}){const{onCreateContext:n=d=>u1(d),onAddHTML:r=null,onInitialize:i=()=>{},onRender:s=()=>{},onFinalize:o=()=>{},onError:a,gl:l=null,glOptions:u={},debug:c=!1,createFramebuffer:f=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:g=!0,stats:_=Or.get(`animation-loop-${C3++}`)}=e;let{useDevicePixels:v=!0}=e;"useDevicePixelRatio"in e&&(Y.deprecated("useDevicePixelRatio","useDevicePixels")(),v=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:r,onInitialize:i,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:u,debug:c,createFramebuffer:f},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=_,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:g,useDevicePixels:v}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return V(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(e={}){if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Rl.isSupported(this.gl,["timers"])?new Rl(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(...e){return this.props.onCreateContext(...e)}onInitialize(...e){return this.props.onInitialize(...e)}onRender(...e){return this.props.onRender(...e)}onFinalize(...e){return this.props.onFinalize(...e)}getHTMLControlValue(e,n=1){const r=document.getElementById(e);return r?Number(r.value):n}setViewParameters(){return Y.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=Wm?new Promise((e,n)=>{if(Wm&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):D2(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):N2(e)}_renderFrame(...e){if(this.display){this.display._renderFrame(...e);return}this.onRender(...e)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas!="undefined"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?Cd(this.props.gl,e):this.onCreateContext(e),!xu(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");b2(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let r=1;const{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&P2(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new ke(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const Yo="vs",Id="fs";function Pt(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const Ac={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function R3(t){const e={};for(const n in t){const r=t[n],i=M3(r);e[n]=i}return e}function M3(t){let e=Xm(t);return e==="object"?t?"type"in t?Object.assign({},t,Ac[t.type]):"value"in t?(e=Xm(t.value),Object.assign({type:e},t,Ac[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},Ac[e])}function Xm(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const I3="vs",L3="fs";class Ym{constructor({name:e,vs:n,fs:r,dependencies:i=[],uniforms:s,getUniforms:o,deprecations:a=[],defines:l={},inject:u={},vertexShader:c,fragmentShader:f}){Pt(typeof e=="string"),this.name=e,this.vs=n||c,this.fs=r||f,this.getModuleUniforms=o,this.dependencies=i,this.deprecations=this._parseDeprecationDefinitions(a),this.defines=l,this.injections=k3(u),s&&(this.uniforms=R3(s))}getModuleSource(e){let n;switch(e){case I3:n=this.vs||"";break;case L3:n=this.fs||"";break;default:Pt(!1)}return`#define MODULE_${this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_")}
${n}// END MODULE_${this.name}

`}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp(`\\b${n.old}\\(`);break;default:n.regex=new RegExp(`${n.type} ${n.old};`)}}),e}_defaultGetUniforms(e={}){const n={},r=this.uniforms;for(const i in r){const s=r[i];i in e&&!s.private?(s.validate&&Pt(s.validate(e[i],s),`${this.name}: invalid ${i}`),n[i]=e[i]):n[i]=s.value}return n}}function k3(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const i=n.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[i][n]=r}return e}function N3(t){return D3(P1(t))}function D3(t){const e={},n={};return A1({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,i)=>n[i]-n[r]).map(r=>e[r])}function A1({modules:t,level:e,moduleMap:n,moduleDepth:r}){if(e>=5)throw new Error("Possible loop in shader dependency graph");for(const i of t)n[i.name]=i,(r[i.name]===void 0||r[i.name]<e)&&(r[i.name]=e);for(const i of t)i.dependencies&&A1({modules:i.dependencies,level:e+1,moduleMap:n,moduleDepth:r})}function P1(t,e){return t.map(n=>(n instanceof Ym||(Pt(typeof n!="string",`Shader module use by name is deprecated. Import shader module '${n}' and use it directly.`),Pt(n.name,"shader module has no name"),n=new Ym(n),n.dependencies=P1(n.dependencies)),n))}function F3(t={}){const e=typeof window!="undefined"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i}const U3=7936,j3=7937,B3=7938,z3=35724,Ld={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},wr={};Object.keys(Ld).forEach(t=>{wr[t]=t});function V3(t){return typeof WebGL2RenderingContext!="undefined"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function $3(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||U3),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||j3);return{gpuVendor:G3(n,r),vendor:n,renderer:r,version:t.getParameter(B3),shadingLanguageVersion:t.getParameter(z3)}}function G3(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const Pc={};function Zm(t,e,n={}){const r=Ld[e];if(Pt(r,e),!F3(n))return!0;if(e in Pc)return Pc[e];const i=r[0],s=n.behavior||"enable",o=`#extension GL_${i} : ${s}
void main(void) {}`,a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);const l=t.getShaderParameter(a,35713);return t.deleteShader(a),Pc[e]=l,l}function H3(t,e){const n=Ld[e];Pt(n,e);const r=V3(t)&&n[1]||n[0],i=typeof r=="string"?Boolean(t.getExtension(r)):r;return Pt(i===!1||i===!0),i}function Pa(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>H3(t,n))}function W3(t){switch($3(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function X3(t,e,n){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return Pa(t,wr.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),Pa(t,wr.GLSL_DERIVATIVES)&&Zm(t,wr.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),Pa(t,wr.GLSL_FRAG_DATA)&&Zm(t,wr.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),Pa(t,wr.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}const Y3=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,Z3=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,q3={[Yo]:Y3,[Id]:Z3},Ya="__LUMA_INJECT_DECLARATIONS__",qm=/void\s+main\s*\([^)]*\)\s*\{\n?/,Km=/}\n?[^{}]*$/,Cc=[];function Qm(t,e,n,r=!1){const i=e===Yo;for(const s in n){const o=n[s];o.sort((l,u)=>l.order-u.order),Cc.length=o.length;for(let l=0,u=o.length;l<u;++l)Cc[l]=o[l].injection;const a=`${Cc.join(`
`)}
`;switch(s){case"vs:#decl":i&&(t=t.replace(Ya,a));break;case"vs:#main-start":i&&(t=t.replace(qm,l=>l+a));break;case"vs:#main-end":i&&(t=t.replace(Km,l=>a+l));break;case"fs:#decl":i||(t=t.replace(Ya,a));break;case"fs:#main-start":i||(t=t.replace(qm,l=>l+a));break;case"fs:#main-end":i||(t=t.replace(Km,l=>a+l));break;default:t=t.replace(s,l=>l+a)}}return t=t.replace(Ya,""),r&&(t=t.replace(/\}\s*$/,s=>s+q3[e])),t}function Yf(t){const e={};return Pt(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const r in n)e[r]=e[r]?`${e[r]}
${n[r]}`:n[r]}),e}function Ui(t){return new RegExp(`\\b${t}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}const C1=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],K3=[...C1,[Ui("attribute"),"in $1"],[Ui("varying"),"out $1"]],Q3=[...C1,[Ui("varying"),"in $1"]],O1=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],J3=[...O1,[Ui("in"),"attribute $1"],[Ui("out"),"varying $1"]],eO=[...O1,[Ui("in"),"varying $1"]],Zf="gl_FragColor",qf=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,tO=/void\s+main\s*\([^)]*\)\s*\{\n?/;function nO(t,e,n){switch(e){case 300:return n?Ml(t,K3):rO(t);case 100:return n?Ml(t,J3):iO(t);default:throw new Error(`unknown GLSL version ${e}`)}}function Ml(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function rO(t){t=Ml(t,Q3);const e=t.match(qf);if(e){const n=e[1];t=t.replace(new RegExp(`\\b${Zf}\\b`,"g"),n)}else{const n="fragmentColor";t=t.replace(tO,r=>`out vec4 ${n};
${r}`).replace(new RegExp(`\\b${Zf}\\b`,"g"),n)}return t}function iO(t){t=Ml(t,eO);const e=t.match(qf);if(e){const n=e[1];t=t.replace(qf,"").replace(new RegExp(`\\b${n}\\b`,"g"),Zf)}return t}const sO=`

${Ya}

`,R1={[Yo]:"vertex",[Id]:"fragment"},oO=`precision highp float;

`;function aO(t,e){const{vs:n,fs:r}=e,i=N3(e.modules||[]);return{gl:t,vs:Jm(t,Object.assign({},e,{source:n,type:Yo,modules:i})),fs:Jm(t,Object.assign({},e,{source:r,type:Id,modules:i})),getUniforms:lO(i)}}function Jm(t,{id:e,source:n,type:r,modules:i,defines:s={},hookFunctions:o=[],inject:a={},transpileToGLSL100:l=!1,prologue:u=!0,log:c}){Pt(typeof n=="string","shader source must be a string");const f=r===Yo,h=n.split(`
`);let g=100,_="",v=n;h[0].indexOf("#version ")===0?(g=300,_=h[0],v=h.slice(1).join(`
`)):_=`#version ${g}`;const d={};i.forEach(S=>{Object.assign(d,S.getDefines())}),Object.assign(d,s);let p=u?`${_}
${cO({id:e,source:n,type:r})}
${uO({type:r})}
${W3(t)}
${X3(t)}
${fO(d)}
${f?"":oO}
`:`${_}
`;const m=dO(o),w={},b={},x={};for(const S in a){const O=typeof a[S]=="string"?{injection:a[S],order:0}:a[S],R=S.match(/^(v|f)s:(#)?([\w-]+)$/);if(R){const M=R[2],z=R[3];M?z==="decl"?b[S]=[O]:x[S]=[O]:w[S]=[O]}else x[S]=[O]}for(const S of i){c&&S.checkDeprecations(v,c),p+=S.getModuleSource(r,g);const R=S.injections[r];for(const M in R){const z=M.match(/^(v|f)s:#([\w-]+)$/);if(z){const W=z[2]==="decl"?b:x;W[M]=W[M]||[],W[M].push(R[M])}else w[M]=w[M]||[],w[M].push(R[M])}}return p+=sO,p=Qm(p,r,b),p+=hO(m[r],w),p+=v,p=Qm(p,r,x),p=nO(p,l?100:g,f),p}function lO(t){return function(n){const r={};for(const i of t){const s=i.getUniforms(n,r);Object.assign(r,s)}return r}}function uO({type:t}){return`
#define SHADER_TYPE_${R1[t].toUpperCase()}
`}function cO({id:t,source:e,type:n}){return t&&typeof t=="string"&&e.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME ${t}_${R1[n]}

`:""}function fO(t={}){let e=0,n="";for(const r in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;const i=t[r];(i||Number.isFinite(i))&&(n+=`#define ${r.toUpperCase()} ${t[r]}
`)}return e===0&&(n+=`
`),n}function hO(t,e){let n="";for(const r in t){const i=t[r];if(n+=`void ${i.signature} {
`,i.header&&(n+=`  ${i.header}`),e[r]){const s=e[r];s.sort((o,a)=>o.order-a.order);for(const o of s)n+=`  ${o.injection}
`}i.footer&&(n+=`  ${i.footer}`),n+=`}
`}return n}function dO(t){const e={vs:{},fs:{}};return t.forEach(n=>{let r;typeof n!="string"?(r=n,n=r.hook):r={},n=n.trim();const[i,s]=n.split(":"),o=n.replace(/\(.+/,"");e[i][o]=Object.assign(r,{signature:s})}),e}const pO="void main() {gl_FragColor = vec4(0);}",M1=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,gO=`#version 300 es
${M1}`;function I1(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,s]=n;if(!e.includes(r)||!i||!s)return null;const o=s.split(";")[0];return{qualifier:r,type:i,name:o}}function L1(t={}){const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return e===300?gO:e>300?`#version ${e}
${M1}`:pO;const s=_O(n,r);return e>=300?`#version ${e} ${e===300?"es":""}
in ${r} ${n};
out vec4 ${i};
void main() {
  ${i} = ${s};
}`:`varying ${r} ${n};
void main() {
  gl_FragColor = ${s};
}`}function mO(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Pt(!1),null}}function yO(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Pt(!1),null}}function _O(t,e){switch(e){case"float":return`vec4(${t}, 0.0, 0.0, 1.0)`;case"vec2":return`vec4(${t}, 0.0, 1.0)`;case"vec3":return`vec4(${t}, 1.0)`;case"vec4":return t;default:return Pt(!1),null}}const vO=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,EO={name:"fp32",vs:vO,fs:null};function Rr(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}const Ue={};Ue.EPSILON=1e-12;Ue.debug=!1;Ue.precision=4;Ue.printTypes=!1;Ue.printDegrees=!1;Ue.printRowMajor=!0;function wO(t){return Math.round(t/Ue.EPSILON)*Ue.EPSILON}function bO(t,{precision:e=Ue.precision||4}={}){return t=wO(t),"".concat(parseFloat(t.toPrecision(e)))}function ji(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function TO(t){return t.clone?t.clone():new Array(t.length)}function SO(t,e,n){if(ji(t)){n=n||TO(t);for(let r=0;r<n.length&&r<t.length;++r)n[r]=e(t[r],r,n);return n}return e(t)}function St(t,e,n){return SO(t,r=>Math.max(e,Math.min(n,r)))}function mo(t,e,n){return ji(t)?t.map((r,i)=>mo(r,e[i],n)):n*e+(1-n)*t}function Bi(t,e,n){const r=Ue.EPSILON;n&&(Ue.EPSILON=n);try{if(t===e)return!0;if(ji(t)&&ji(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!Bi(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):Number.isFinite(t)&&Number.isFinite(e)?Math.abs(t-e)<=Ue.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{Ue.EPSILON=r}}function xO(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class k1 extends xO(Array){get ELEMENTS(){return Rr(!1),0}clone(){return new this.constructor().copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}to(e){return e===this?this:ji(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Ue)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+bO(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Bi(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){r===void 0&&(r=n,n=e,e=this);for(let i=0;i<this.ELEMENTS;++i){const s=e[i];this[i]=s+r*(n[i]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(Ue.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}}function AO(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function bt(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function Oc(t,e,n=""){if(Ue.debug&&!AO(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}const e0={};function Rc(t,e){e0[t]||(e0[t]=!0,console.warn("".concat(t," has been removed in version ").concat(e,", see upgrade guide for more information")))}class PO extends k1{get ELEMENTS(){return Rr(!1),0}copy(e){return Rr(!1),this}get x(){return this[0]}set x(e){this[0]=bt(e)}get y(){return this[1]}set y(e){this[1]=bt(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];n+=i*i}return bt(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return bt(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Rr(e>=0&&e<this.ELEMENTS,"index is out of range"),bt(this[e])}setComponent(e,n){return Rr(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var Za=1e-6,zi=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function CO(){var t=new zi(2);return zi!=Float32Array&&(t[0]=0,t[1]=0),t}function OO(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function RO(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function MO(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function IO(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function N1(t,e,n,r){var i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function LO(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}var kO=RO;(function(){var t=CO();return function(e,n,r,i,s,o){var a,l;for(n||(n=2),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}})();function NO(t,e,n){const r=e[0],i=e[1],s=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/s,t[1]=(n[1]*r+n[5]*i)/s,t}function D1(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s||1;return t[0]=(n[0]*r+n[4]*i+n[8]*s)/o,t[1]=(n[1]*r+n[5]*i+n[9]*s)/o,t[2]=(n[2]*r+n[6]*i+n[10]*s)/o,t}function DO(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function FO(){var t=new zi(3);return zi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function UO(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function jO(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function BO(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=i*l-s*a,t[1]=s*o-r*l,t[2]=r*a-i*o,t}function F1(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,t}function zO(t,e,n){var r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function VO(t,e,n){var r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],l=e[1],u=e[2],c=i*u-s*l,f=s*a-r*u,h=r*l-i*a,g=i*h-s*f,_=s*c-r*h,v=r*f-i*c,d=o*2;return c*=d,f*=d,h*=d,g*=2,_*=2,v*=2,t[0]=a+c+g,t[1]=l+f+_,t[2]=u+h+v,t}function $O(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function GO(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function HO(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function WO(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=Math.sqrt(n*n+r*r+i*i),u=Math.sqrt(s*s+o*o+a*a),c=l*u,f=c&&jO(t,e)/c;return Math.acos(Math.min(Math.max(f,-1),1))}(function(){var t=FO();return function(e,n,r,i,s,o){var a,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();const Mc=[0,0,0],t0={};class xt extends PO{static get ZERO(){return t0.ZERO=t0.ZERO||Object.freeze(new xt(0,0,0,0))}constructor(e=0,n=0,r=0){super(-0,-0,-0);arguments.length===1&&ji(e)?this.copy(e):(Ue.debug&&(bt(e),bt(n),bt(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Ue.debug&&(bt(e.x),bt(e.y),bt(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=bt(e)}angle(e){return WO(this,e)}cross(e){return BO(this,this,e),this.check()}rotateX({radians:e,origin:n=Mc}){return $O(this,this,n,e),this.check()}rotateY({radians:e,origin:n=Mc}){return GO(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=Mc}){return HO(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return F1(this,this,e),this.check()}transformAsVector(e){return D1(this,this,e),this.check()}transformByMatrix3(e){return zO(this,this,e),this.check()}transformByMatrix2(e){return DO(this,this,e),this.check()}transformByQuaternion(e){return VO(this,this,e),this.check()}}class XO extends k1{get ELEMENTS(){return Rr(!1),0}get RANK(){return Rr(!1),0}toString(){let e="[";if(Ue.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=bt(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)n[i]=this[r+i];return n}setColumn(e,n){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=n[i];return this}}function YO(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ZO(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function qO(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],g=e[11],_=e[12],v=e[13],d=e[14],p=e[15],m=n*a-r*o,w=n*l-i*o,b=n*u-s*o,x=r*l-i*a,S=r*u-s*a,O=i*u-s*l,R=c*v-f*_,M=c*d-h*_,z=c*p-g*_,Q=f*d-h*v,W=f*p-g*v,q=h*p-g*d,$=m*q-w*W+b*Q+x*z-S*M+O*R;return $?($=1/$,t[0]=(a*q-l*W+u*Q)*$,t[1]=(i*W-r*q-s*Q)*$,t[2]=(v*O-d*S+p*x)*$,t[3]=(h*S-f*O-g*x)*$,t[4]=(l*z-o*q-u*M)*$,t[5]=(n*q-i*z+s*M)*$,t[6]=(d*b-_*O-p*w)*$,t[7]=(c*O-h*b+g*w)*$,t[8]=(o*W-a*z+u*R)*$,t[9]=(r*z-n*W-s*R)*$,t[10]=(_*S-v*b+p*m)*$,t[11]=(f*b-c*S-g*m)*$,t[12]=(a*M-o*Q-l*R)*$,t[13]=(n*Q-r*M+i*R)*$,t[14]=(v*w-_*x-d*m)*$,t[15]=(c*x-f*w+h*m)*$,t):null}function KO(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],h=t[11],g=t[12],_=t[13],v=t[14],d=t[15],p=e*o-n*s,m=e*a-r*s,w=e*l-i*s,b=n*a-r*o,x=n*l-i*o,S=r*l-i*a,O=u*_-c*g,R=u*v-f*g,M=u*d-h*g,z=c*v-f*_,Q=c*d-h*_,W=f*d-h*v;return p*W-m*Q+w*z+b*M-x*R+S*O}function n0(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=e[9],g=e[10],_=e[11],v=e[12],d=e[13],p=e[14],m=e[15],w=n[0],b=n[1],x=n[2],S=n[3];return t[0]=w*r+b*a+x*f+S*v,t[1]=w*i+b*l+x*h+S*d,t[2]=w*s+b*u+x*g+S*p,t[3]=w*o+b*c+x*_+S*m,w=n[4],b=n[5],x=n[6],S=n[7],t[4]=w*r+b*a+x*f+S*v,t[5]=w*i+b*l+x*h+S*d,t[6]=w*s+b*u+x*g+S*p,t[7]=w*o+b*c+x*_+S*m,w=n[8],b=n[9],x=n[10],S=n[11],t[8]=w*r+b*a+x*f+S*v,t[9]=w*i+b*l+x*h+S*d,t[10]=w*s+b*u+x*g+S*p,t[11]=w*o+b*c+x*_+S*m,w=n[12],b=n[13],x=n[14],S=n[15],t[12]=w*r+b*a+x*f+S*v,t[13]=w*i+b*l+x*h+S*d,t[14]=w*s+b*u+x*g+S*p,t[15]=w*o+b*c+x*_+S*m,t}function Kf(t,e,n){var r=n[0],i=n[1],s=n[2],o,a,l,u,c,f,h,g,_,v,d,p;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],u=e[3],c=e[4],f=e[5],h=e[6],g=e[7],_=e[8],v=e[9],d=e[10],p=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=u,t[4]=c,t[5]=f,t[6]=h,t[7]=g,t[8]=_,t[9]=v,t[10]=d,t[11]=p,t[12]=o*r+c*i+_*s+e[12],t[13]=a*r+f*i+v*s+e[13],t[14]=l*r+h*i+d*s+e[14],t[15]=u*r+g*i+p*s+e[15]),t}function Qf(t,e,n){var r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function QO(t,e,n,r){var i=r[0],s=r[1],o=r[2],a=Math.hypot(i,s,o),l,u,c,f,h,g,_,v,d,p,m,w,b,x,S,O,R,M,z,Q,W,q,$,ce;return a<Za?null:(a=1/a,i*=a,s*=a,o*=a,l=Math.sin(n),u=Math.cos(n),c=1-u,f=e[0],h=e[1],g=e[2],_=e[3],v=e[4],d=e[5],p=e[6],m=e[7],w=e[8],b=e[9],x=e[10],S=e[11],O=i*i*c+u,R=s*i*c+o*l,M=o*i*c-s*l,z=i*s*c-o*l,Q=s*s*c+u,W=o*s*c+i*l,q=i*o*c+s*l,$=s*o*c-i*l,ce=o*o*c+u,t[0]=f*O+v*R+w*M,t[1]=h*O+d*R+b*M,t[2]=g*O+p*R+x*M,t[3]=_*O+m*R+S*M,t[4]=f*z+v*Q+w*W,t[5]=h*z+d*Q+b*W,t[6]=g*z+p*Q+x*W,t[7]=_*z+m*Q+S*W,t[8]=f*q+v*$+w*ce,t[9]=h*q+d*$+b*ce,t[10]=g*q+p*$+x*ce,t[11]=_*q+m*$+S*ce,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function U1(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],u=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+u*r,t[5]=o*i+c*r,t[6]=a*i+f*r,t[7]=l*i+h*r,t[8]=u*i-s*r,t[9]=c*i-o*r,t[10]=f*i-a*r,t[11]=h*i-l*r,t}function JO(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],u=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-u*r,t[1]=o*i-c*r,t[2]=a*i-f*r,t[3]=l*i-h*r,t[8]=s*r+u*i,t[9]=o*r+c*i,t[10]=a*r+f*i,t[11]=l*r+h*i,t}function j1(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],u=e[4],c=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+u*r,t[1]=o*i+c*r,t[2]=a*i+f*r,t[3]=l*i+h*r,t[4]=u*i-s*r,t[5]=c*i-o*r,t[6]=f*i-a*r,t[7]=h*i-l*r,t}function eR(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,u=n*o,c=r*o,f=r*a,h=i*o,g=i*a,_=i*l,v=s*o,d=s*a,p=s*l;return t[0]=1-f-_,t[1]=c+p,t[2]=h-d,t[3]=0,t[4]=c-p,t[5]=1-u-_,t[6]=g+v,t[7]=0,t[8]=h+d,t[9]=g-v,t[10]=1-u-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function tR(t,e,n,r,i,s,o){var a=1/(n-e),l=1/(i-r),u=1/(s-o);return t[0]=s*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(o+s)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*u,t[15]=0,t}function nR(t,e,n,r,i){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function rR(t,e,n,r,i,s,o){var a=1/(e-n),l=1/(r-i),u=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(o+s)*u,t[15]=1,t}function iR(t,e,n,r){var i,s,o,a,l,u,c,f,h,g,_=e[0],v=e[1],d=e[2],p=r[0],m=r[1],w=r[2],b=n[0],x=n[1],S=n[2];return Math.abs(_-b)<Za&&Math.abs(v-x)<Za&&Math.abs(d-S)<Za?YO(t):(c=_-b,f=v-x,h=d-S,g=1/Math.hypot(c,f,h),c*=g,f*=g,h*=g,i=m*h-w*f,s=w*c-p*h,o=p*f-m*c,g=Math.hypot(i,s,o),g?(g=1/g,i*=g,s*=g,o*=g):(i=0,s=0,o=0),a=f*o-h*s,l=h*i-c*o,u=c*s-f*i,g=Math.hypot(a,l,u),g?(g=1/g,a*=g,l*=g,u*=g):(a=0,l=0,u=0),t[0]=i,t[1]=a,t[2]=c,t[3]=0,t[4]=s,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=u,t[10]=h,t[11]=0,t[12]=-(i*_+s*v+o*d),t[13]=-(a*_+l*v+u*d),t[14]=-(c*_+f*v+h*d),t[15]=1,t)}function sR(){var t=new zi(4);return zi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function oR(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function B1(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,t}(function(){var t=sR();return function(e,n,r,i,s,o){var a,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}})();const r0=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),aR=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),lR=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),ei={};class ht extends XO{static get IDENTITY(){return ei.IDENTITY=ei.IDENTITY||Object.freeze(new ht(r0)),ei.IDENTITY}static get ZERO(){return ei.ZERO=ei.ZERO||Object.freeze(new ht(aR)),ei.ZERO}get INDICES(){return lR}get ELEMENTS(){return 16}get RANK(){return 4}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0);arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,i,s,o,a,l,u,c,f,h,g,_,v,d){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=u,this[9]=c,this[10]=f,this[11]=h,this[12]=g,this[13]=_,this[14]=v,this[15]=d,this.check()}setRowMajor(e,n,r,i,s,o,a,l,u,c,f,h,g,_,v,d){return this[0]=e,this[1]=s,this[2]=u,this[3]=g,this[4]=n,this[5]=o,this[6]=c,this[7]=_,this[8]=r,this[9]=a,this[10]=f,this[11]=v,this[12]=i,this[13]=l,this[14]=h,this[15]=d,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(r0)}fromQuaternion(e){return eR(this,e),this.check()}frustum({left:e,right:n,bottom:r,top:i,near:s,far:o}){return o===1/0?ht._computeInfinitePerspectiveOffCenter(this,e,n,r,i,s):tR(this,e,n,r,i,s,o),this.check()}static _computeInfinitePerspectiveOffCenter(e,n,r,i,s,o){const a=2*o/(r-n),l=2*o/(s-i),u=(r+n)/(r-n),c=(s+i)/(s-i),f=-1,h=-1,g=-2*o;return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=u,e[9]=c,e[10]=f,e[11]=h,e[12]=0,e[13]=0,e[14]=g,e[15]=0,e}lookAt(e,n,r){return arguments.length===1&&({eye:e,center:n,up:r}=e),n=n||[0,0,0],r=r||[0,1,0],iR(this,e,n,r),this.check()}ortho({left:e,right:n,bottom:r,top:i,near:s=.1,far:o=500}){return rR(this,e,n,r,i,s,o),this.check()}orthographic({fovy:e=45*Math.PI/180,aspect:n=1,focalDistance:r=1,near:i=.1,far:s=500}){if(e>Math.PI*2)throw Error("radians");const o=e/2,a=r*Math.tan(o),l=a*n;return new ht().ortho({left:-l,right:l,bottom:-a,top:a,near:i,far:s})}perspective({fovy:e=void 0,fov:n=45*Math.PI/180,aspect:r=1,near:i=.1,far:s=500}={}){if(e=e||n,e>Math.PI*2)throw Error("radians");return nR(this,e,r,i,s),this.check()}determinant(){return KO(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=null){const r=this.getScale(n||[-0,-0,-0]),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e=[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=null){const r=this.getScale(n||[-0,-0,-0]),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return ZO(this,this),this.check()}invert(){return qO(this,this),this.check()}multiplyLeft(e){return n0(this,e,this),this.check()}multiplyRight(e){return n0(this,this,e),this.check()}rotateX(e){return U1(this,this,e),this.check()}rotateY(e){return JO(this,this,e),this.check()}rotateZ(e){return j1(this,this,e),this.check()}rotateXYZ([e,n,r]){return this.rotateX(e).rotateY(n).rotateZ(r)}rotateAxis(e,n){return QO(this,this,e,n),this.check()}scale(e){return Array.isArray(e)?Qf(this,this,e):Qf(this,this,[e,e,e]),this.check()}translate(e){return Kf(this,this,e),this.check()}transform(e,n){return e.length===4?(n=B1(n||[-0,-0,-0,-0],e,this),Oc(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;switch(r){case 2:n=LO(n||[-0,-0],e,this);break;case 3:n=F1(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Oc(n,e.length),n}transformAsVector(e,n){switch(e.length){case 2:n=NO(n||[-0,-0],e,this);break;case 3:n=D1(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Oc(n,e.length),n}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}transformPoint(e,n){return Rc("Matrix4.transformPoint","3.0"),this.transformAsPoint(e,n)}transformVector(e,n){return Rc("Matrix4.transformVector","3.0"),this.transformAsPoint(e,n)}transformDirection(e,n){return Rc("Matrix4.transformDirection","3.0"),this.transformAsVector(e,n)}}const uR=new Uint8Array([0,255,255,255]),cR={pickingSelectedColor:null,pickingHighlightColor:uR,pickingActive:!1,pickingAttribute:!1};function fR(t=cR){const e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=Boolean(t.pickingActive),e.picking_uAttribute=Boolean(t.pickingAttribute)),e}const hR=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,dR=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,pR={name:"picking",vs:hR,fs:dR,getUniforms:fR},gR=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,mR={name:"transform",vs:gR,fs:null};class Zo{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new Zo(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(e={}){const{vs:n="",fs:r="",defines:i={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=e,u=this._getModuleList(e.modules),c=this._getHash(n),f=this._getHash(r),h=u.map(w=>this._getHash(w.name)).sort(),g=o.map(w=>this._getHash(w)),_=Object.keys(i).sort(),v=Object.keys(s).sort(),d=[],p=[];for(const w of _)d.push(this._getHash(w)),d.push(this._getHash(i[w]));for(const w of v)p.push(this._getHash(w)),p.push(this._getHash(s[w]));const m=`${c}/${f}D${d.join("/")}M${h.join("/")}I${p.join("/")}V${g.join("/")}H${this.stateHash}B${a}${l?"T":""}`;if(!this._programCache[m]){const w=aO(this.gl,{vs:n,fs:r,modules:u,inject:s,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[m]=new S1(this.gl,{hash:m,vs:w.vs,fs:w.fs,varyings:o,bufferMode:a}),this._getUniforms[m]=w.getUniforms||(b=>{}),this._useCounts[m]=0}return this._useCounts[m]++,this._programCache[m]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(e=[]){const n=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],l=a.name;n[i++]=a,r[l]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],l=a.name;r[l]||(n[i++]=a,r[l]=!0)}return n.length=i,n}}const yR={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function _R(t,e,n){const r={};let i=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=vR(s,n);if(s==="indices")i=o;else if(o.constant)r[a]=o.value;else{const l=o.value,u=A({},o);delete u.value,r[a]=[new ge(t,l),u],ER(s,u)}}if(i){const s=i.value||i;V(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};r.indices=[new ge(t,{data:s,target:34963}),o]}return r}function vR(t,e){const{attributeMap:n=yR}=e||{};return n&&n[t]||t}function ER(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}V(Number.isFinite(e.size),`attribute ${t} needs size`)}const ti=2,wR=1e4,bR="Model needs drawMode and vertexCount",i0=()=>{},TR={};class kd{constructor(e,n={}){const{id:r=ar("model")}=n;V(xu(e)),this.id=r,this.gl=e,this.id=n.id||ar("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||Zo.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},V(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),bR)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:u,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return V(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return V(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=_R(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(e={}){if(Fi(e))return this;const n={};for(const r in e){const i=e[r];n[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(n),this}setUniforms(e={}){return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return Rd(this.program.gl,e),this}draw(e={}){this._checkProgram();const{moduleSettings:n=null,framebuffer:r,uniforms:i={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(i);let u;Y.priority>=ti&&(u=this._logDrawCallStart(ti));const c=this.vertexArray.getDrawParams(),{isIndexed:f=c.isIndexed,indexType:h=c.indexType,indexOffset:g=c.indexOffset,vertexArrayInstanced:_=c.isInstanced}=this.props;_&&!this.isInstanced&&Y.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:v,instanceCount:d}=this,{onBeforeRender:p=i0,onAfterRender:m=i0}=this.props;p(),this.program.setUniforms(this.uniforms);const w=this.program.draw(Object.assign(TR,e,{logPriority:u,uniforms:null,framebuffer:r,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:f,indexType:h,isInstanced:v,instanceCount:d,offset:f?g:0}));return m(),Y.priority>=ti&&this._logDrawCallEnd(u,l,r),w}transform(e={}){const{discard:n=!0,feedbackBuffers:r,unbindModels:i=[]}=e;let{parameters:s}=e;r&&this._setFeedbackBuffers(r),n&&(s=Object.assign({},s,{[35977]:n})),i.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{i.forEach(o=>o.vertexArray.bindBuffers())}return this}render(e={}){return Y.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:u,transpileToGLSL100:c}=this.programProps;n=this.programManager.get({vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:u,transpileToGLSL100:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}V(n instanceof S1,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new b3(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof ge&&n.delete()}}_setAnimationProps(e){this.animated&&V(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(e={}){if(Fi(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new x1(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:wR;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),Y.group(ti,`>>> DRAWING MODEL ${this.id}`,{collapsed:Y.level<=2})(),e}_logDrawCallEnd(e,n,r,i){if(e===void 0)return;const s=x3({vertexArray:n,header:`${this.id} attributes`,attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=$m({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:u,count:c}=$m({header:`${this.id} uniforms`,program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});c>0&&Y.log("MISSING UNIFORMS",Object.keys(u))(),l>0&&Y.log("UNUSED UNIFORMS",Object.keys(a))();const f=P3(this.vertexArray.configuration);Y.table(e,s)(),Y.table(e,o)(),Y.table(e+1,f)(),i&&i.log({logLevel:ti,message:`Rendered to ${i.id}`}),Y.groupEnd(ti,`>>> DRAWING MODEL ${this.id}`)()}}class SR{constructor(e,n={}){this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(e={}){const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(e={}){const n=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=n;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(e={}){this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],r=e?n[e]:null;return r?r instanceof ge?r:r.buffer:null}getData(e={}){const{varyingName:n}=e,r=this.getBuffer(n);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(e={}){this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&V(ae(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const s=this.feedbackMap[i];i in n&&(r[s]=i)}Object.assign(r,e.feedbackBuffers);for(const i in r){const s=r[i];if(typeof s=="string"){const o=n[s],{byteLength:a,usage:l,accessor:u}=o;r[i]=this._createNewBuffer(i,{byteLength:a,usage:l,accessor:u})}}return r}_setupBuffers(e={}){const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}_setupTransformFeedback(e,{model:n}){const{program:r}=n;e.transformFeedback=new x1(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const s=this.feedbackMap[i];n[i]=e.feedbackBuffers[s],r[s]=e.sourceBuffers[i],V(r[s]instanceof ge)}return{sourceBuffers:n,feedbackBuffers:r}}_createNewBuffer(e,n){const r=new ge(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}const xR="transform_uSampler_",Il="transform_uSize_",s0="transform_position";function AR({vs:t,sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}){let s=Object.keys(e).length,o=null;const a={};let l=t,u={};if(s>0||n){const c=l.split(`
`),f=c.slice();if(c.forEach((h,g,_)=>{if(s>0){const v=MR(h,e);if(v){const{updatedLine:d,inject:p}=v;f[g]=d,u=Yf([u,p]),Object.assign(a,v.samplerTextureMap),s--}}n&&!o&&(o=RR(h,n))}),n){V(r);const h=`${Il}${n}`,g=`uniform vec2 ${h};
`,_=`     vec2 ${s0} = transform_getPos(${h});
     gl_Position = vec4(${s0}, 0, 1.);
`;u=Yf([u,{"vs:#decl":g,"vs:#main-start":_}])}l=f.join(`
`)}return{vs:l,targetTextureType:o,inject:u,samplerTextureMap:a}}function PR({sourceTextureMap:t,targetTextureVarying:e,targetTexture:n}){const r={};let i,s;e&&({width:i,height:s}=n,r[`${Il}${e}`]=[i,s]);for(const o in t)({width:i,height:s}=t[o]),r[`${Il}${o}`]=[i,s];return r}function CR(t){return I1(t,["attribute","in"])}function OR(t){const e=`${xR}${t}`,n=`${Il}${t}`,r=`  uniform sampler2D ${e};
  uniform vec2 ${n};`;return{samplerName:e,sizeName:n,uniformDeclerations:r}}function RR(t,e){const n=I1(t,["varying","out"]);return n&&n.name===e?n.type:null}function MR(t,e){const n={},r=CR(t);if(!r)return null;const{type:i,name:s}=r;if(s&&e[s]){const o=`// ${t} => Replaced by Transform with a sampler`,{samplerName:a,sizeName:l,uniformDeclerations:u}=OR(s),c=mO(i),f=`  ${i} ${s} = transform_getInput(${a}, ${l}).${c};
`;return n[a]=s,{updatedLine:o,inject:{"vs:#decl":u,"vs:#main-start":f},samplerTextureMap:n}}return null}const IR={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},LR="transform_output";class kR{constructor(e,n={}){this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(e={}){const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(e={}){const{sourceBuffers:n,sourceTextures:r,framebuffer:i,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),l=Object.assign({},e.parameters);let u=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap){const h=this.samplerTextureMap[f];a[f]=r[h]}this._setSourceTextureParameters();const c=PR({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,c)}return this.hasTargetTexture&&(u=!1,l.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:a,discard:u,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(e={}){this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData({packed:e=!1}={}){const{framebuffer:n}=this.bindings[this.currentIndex],r=Pu(n);if(!e)return r;const i=r.constructor,s=yO(this.targetTextureType),o=new i(r.length*s/4);let a=0;for(let l=0;l<r.length;l+=4)for(let u=0;u<s;u++)o[a++]=r[l+u];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(e={}){const{_targetTextureVarying:n,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:r}=e;if(r instanceof gt)return r;const i=n[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(e={}){const{sourceBuffers:n,_sourceTextures:r={},_targetTexture:i}=e,s=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:r,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((r,i,s)=>{s[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new ge(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}_updateBinding(e,n){const{sourceBuffers:r,sourceTextures:i,targetTexture:s}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:l}=e;l?(l.update({attachments:{[36064]:s},resizeAttachments:!1}),l.resize({width:o,height:a})):e.framebuffer=new ke(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{[36064]:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const r in n)n[r].setParameters(IR)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;const r=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:r}}_createNewTexture(e){const n=E1(e,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(e={}){const{sourceTextures:n,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=AR({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),u=Yf([e.inject||{},a]);this.targetTextureType=o,this.samplerTextureMap=l;const c=e._fs||L1({version:b1(i),input:this.targetTextureVarying,inputType:o,output:LR}),f=this.hasSourceTextures||this.targetTextureVarying?[mR].concat(e.modules||[]):e.modules;return{vs:i,fs:c,modules:f,uniforms:s,inject:u}}}class Nd{static isSupported(e){return ae(e)}constructor(e,n={}){this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:r}=this;e&&e.delete(),n&&n.delete(),r&&r.delete()}run(e={}){const{clearRenderTarget:n=!0}=e,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=e||r.swap();V(e,"Nothing to swap")}getBuffer(e=null){return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(e={}){const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n){const i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(e={}){"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)r.update(e)}_initialize(e={}){const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new kd(n,Object.assign({},e,{fs:e.fs||L1({version:b1(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=i.updateModelProps(n);return n}_buildResourceTransforms(e,n){NR(n)&&(this.bufferTransform=new SR(e,n)),DR(n)&&(this.textureTransform=new kR(e,n)),V(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=Object.assign(n,i.getDrawOptions(n));return n}}function NR(t){return!!(!Fi(t.feedbackBuffers)||!Fi(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function DR(t){return!!(!Fi(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}const o0={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class z1{static get DRAW_MODE(){return o0}constructor(e={}){const{id:n=ar("geometry"),drawMode:r=o0.TRIANGLES,attributes:i={},indices:s=null,vertexCount:o=null}=e;this.id=n,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(i,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?A({indices:this.indices},this.attributes):this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const r in e){let i=e[r];i=ArrayBuffer.isView(i)?{value:i}:i,V(ArrayBuffer.isView(i.value),`${this._print(r)}: must be typed array or object with value as typed array`),(r==="POSITION"||r==="positions")&&!i.size&&(i.size=3),r==="indices"?(V(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const i in e){const s=e[i],{value:o,size:a,constant:l}=s;!l&&o&&a>=1&&(r=Math.min(r,o.length/a))}return V(Number.isFinite(r)),r}}let FR=1,UR=1;class V1{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,o=FR++,a={time:0,delay:n,duration:r,rate:i,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const i of n)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:s,channel:o}=i;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=UR++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}const jR=`
struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`,BR=`
#define SMOOTH_EDGE_RADIUS 0.5

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`;var zR={name:"geometry",vs:jR,fs:BR};const he={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(he,"IDENTITY",{get:()=>fe.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0});const ln={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Ll={common:0,meters:1,pixels:2},a0={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},qo={DRAW:"draw",MASK:"mask"},VR=Object.keys(he).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(he[t],";")).join(""),$R=Object.keys(ln).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(ln[t],";")).join(""),GR=Object.keys(Ll).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(Ll[t],";")).join("");var HR="".concat(VR,`
`).concat($R,`
`).concat(GR,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);
      return 1.0 / cos(radians(y));
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size(position_world.z),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`),Vi=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function l0(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],g=e[11],_=e[12],v=e[13],d=e[14],p=e[15],m=n*a-r*o,w=n*l-i*o,b=n*u-s*o,x=r*l-i*a,S=r*u-s*a,O=i*u-s*l,R=c*v-f*_,M=c*d-h*_,z=c*p-g*_,Q=f*d-h*v,W=f*p-g*v,q=h*p-g*d,$=m*q-w*W+b*Q+x*z-S*M+O*R;return $?($=1/$,t[0]=(a*q-l*W+u*Q)*$,t[1]=(i*W-r*q-s*Q)*$,t[2]=(v*O-d*S+p*x)*$,t[3]=(h*S-f*O-g*x)*$,t[4]=(l*z-o*q-u*M)*$,t[5]=(n*q-i*z+s*M)*$,t[6]=(d*b-_*O-p*w)*$,t[7]=(c*O-h*b+g*w)*$,t[8]=(o*W-a*z+u*R)*$,t[9]=(r*z-n*W-s*R)*$,t[10]=(_*S-v*b+p*m)*$,t[11]=(f*b-c*S-g*m)*$,t[12]=(a*M-o*Q-l*R)*$,t[13]=(n*Q-r*M+i*R)*$,t[14]=(v*w-_*x-d*m)*$,t[15]=(c*x-f*w+h*m)*$,t):null}function Zs(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],c=e[7],f=e[8],h=e[9],g=e[10],_=e[11],v=e[12],d=e[13],p=e[14],m=e[15],w=n[0],b=n[1],x=n[2],S=n[3];return t[0]=w*r+b*a+x*f+S*v,t[1]=w*i+b*l+x*h+S*d,t[2]=w*s+b*u+x*g+S*p,t[3]=w*o+b*c+x*_+S*m,w=n[4],b=n[5],x=n[6],S=n[7],t[4]=w*r+b*a+x*f+S*v,t[5]=w*i+b*l+x*h+S*d,t[6]=w*s+b*u+x*g+S*p,t[7]=w*o+b*c+x*_+S*m,w=n[8],b=n[9],x=n[10],S=n[11],t[8]=w*r+b*a+x*f+S*v,t[9]=w*i+b*l+x*h+S*d,t[10]=w*s+b*u+x*g+S*p,t[11]=w*o+b*c+x*_+S*m,w=n[12],b=n[13],x=n[14],S=n[15],t[12]=w*r+b*a+x*f+S*v,t[13]=w*i+b*l+x*h+S*d,t[14]=w*s+b*u+x*g+S*p,t[15]=w*o+b*c+x*_+S*m,t}function WR(t,e,n){var r=n[0],i=n[1],s=n[2],o,a,l,u,c,f,h,g,_,v,d,p;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],u=e[3],c=e[4],f=e[5],h=e[6],g=e[7],_=e[8],v=e[9],d=e[10],p=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=u,t[4]=c,t[5]=f,t[6]=h,t[7]=g,t[8]=_,t[9]=v,t[10]=d,t[11]=p,t[12]=o*r+c*i+_*s+e[12],t[13]=a*r+f*i+v*s+e[13],t[14]=l*r+h*i+d*s+e[14],t[15]=u*r+g*i+p*s+e[15]),t}function XR(t,e,n){var r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function YR(){var t=new Vi(4);return Vi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Dd(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,t}(function(){var t=YR();return function(e,n,r,i,s,o){var a,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}})();function ZR(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function Cu(t){let e={},n;return r=>{for(const i in r)if(!ZR(r[i],e[i])){n=t(r),e=r;break}return n}}const u0=[0,0,0,0],qR=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],KR=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],QR=[0,0,0],JR=[0,0,0],eM=Cu(rM);function $1(t,e,n=JR){n.length<3&&(n=[n[0],n[1],0]);let r=n,i,s=!0;switch(e===he.LNGLAT_OFFSETS||e===he.METER_OFFSETS?i=n:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case ln.WEB_MERCATOR:(e===he.LNGLAT||e===he.CARTESIAN)&&(i=[0,0,0],s=!1);break;case ln.WEB_MERCATOR_AUTO_OFFSET:e===he.LNGLAT?r=i:e===he.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case ln.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case ln.GLOBE:s=!1,i=null;break;default:s=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:s}}function tM(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,a=u0,l=u0,u=t.cameraPosition;const{geospatialOrigin:c,shaderCoordinateOrigin:f,offsetMode:h}=$1(t,e,n);return h&&(l=t.projectPosition(c||f),u=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],l[3]=1,a=Dd([],l,o),s=r||s,o=Zs([],i,s),o=Zs([],o,qR)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:u,shaderCoordinateOrigin:f,geospatialOrigin:c}}function nM({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=he.DEFAULT,coordinateOrigin:i,autoWrapLongitude:s=!1}={}){r===he.DEFAULT&&(r=t.isGeospatial?he.LNGLAT:he.CARTESIAN);const o=eM({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return o.project_uWrapLongitude=s,o.project_uModelMatrix=n||KR,o}function rM({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:u}=tM(t,n,r),c=t.getDistanceScales(),f=[t.width*e,t.height*e],h=Dd([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,g={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:o.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(t._pseudoMeters),project_uViewportSize:f,project_uDevicePixelRatio:e,project_uFocalDistance:h,project_uCommonUnitsPerMeter:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:QR,project_uScale:t.scale,project_uViewProjectionMatrix:s,project_uCameraPosition:a};if(u){const _=t.getDistanceScales(u);switch(n){case he.METER_OFFSETS:g.project_uCommonUnitsPerWorldUnit=_.unitsPerMeter,g.project_uCommonUnitsPerWorldUnit2=_.unitsPerMeter2;break;case he.LNGLAT:case he.LNGLAT_OFFSETS:t._pseudoMeters||(g.project_uCommonUnitsPerMeter=_.unitsPerMeter),g.project_uCommonUnitsPerWorldUnit=_.unitsPerDegree,g.project_uCommonUnitsPerWorldUnit2=_.unitsPerDegree2;break;case he.CARTESIAN:g.project_uCommonUnitsPerWorldUnit=[1,1,_.unitsPerMeter[2]],g.project_uCommonUnitsPerWorldUnit2=[0,0,_.unitsPerMeter2[2]];break}}return g}const iM={};function sM(t=iM){return t.viewport?nM(t):{}}var Fd={name:"project",dependencies:[EO,zR],vs:HR,getUniforms:sM};const oM=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`;var G1={name:"project32",dependencies:[Fd],vs:oM};function aM(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Pi(t,e){const n=B1([],e,t);return oR(n,n,1/n[3]),n}function c0(t,e){const n=t%e;return n<0?e+n:n}function lM(t,e,n){return n*e+(1-n)*t}function f0(t,e,n){return t<e?e:t>n?n:t}function uM(t){return Math.log(t)*Math.LOG2E}const Ud=Math.log2||uM;function Tn(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Xt=Math.PI,H1=Xt/4,Yt=Xt/180,Jf=180/Xt,yo=512,eh=4003e4,Ca=85.051129,cM=1.5;function h0(t){return Math.pow(2,t)}function W1(t){return Ud(t)}function $i([t,e]){Tn(Number.isFinite(t)),Tn(Number.isFinite(e)&&e>=-90&&e<=90,"invalid latitude");const n=t*Yt,r=e*Yt,i=yo*(n+Xt)/(2*Xt),s=yo*(Xt+Math.log(Math.tan(H1+r*.5)))/(2*Xt);return[i,s]}function Ur([t,e]){const n=t/yo*(2*Xt)-Xt,r=2*(Math.atan(Math.exp(e/yo*(2*Xt)-Xt))-H1);return[n*Jf,r*Jf]}function fM({latitude:t}){Tn(Number.isFinite(t));const e=Math.cos(t*Yt);return W1(eh*e)-9}function th({latitude:t,longitude:e,highPrecision:n=!1}){Tn(Number.isFinite(t)&&Number.isFinite(e));const r={},i=yo,s=Math.cos(t*Yt),o=i/360,a=o/s,l=i/eh/s;if(r.unitsPerMeter=[l,l,l],r.metersPerUnit=[1/l,1/l,1/l],r.unitsPerDegree=[o,a,l],r.degreesPerUnit=[1/o,1/a,1/l],n){const u=Yt*Math.tan(t*Yt)/s,c=o*u/2,f=i/eh*u,h=f/a*l;r.unitsPerDegree2=[0,c,f],r.unitsPerMeter2=[h,0,h]}return r}function X1(t,e){const[n,r,i]=t,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:u}=th({longitude:n,latitude:r,highPrecision:!0}),c=$i(t);c[0]+=s*(l[0]+u[0]*o),c[1]+=o*(l[1]+u[1]*o);const f=Ur(c),h=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[f[0],f[1],h]:f}function hM({height:t,pitch:e,bearing:n,altitude:r,scale:i,center:s=null}){const o=aM();return Kf(o,o,[0,0,-r]),U1(o,o,-e*Yt),j1(o,o,n*Yt),i/=t,Qf(o,o,[i,i,i]),s&&Kf(o,o,UO([],s)),o}function dM({width:t,height:e,fovy:n=kl(cM),altitude:r,pitch:i=0,nearZMultiplier:s=1,farZMultiplier:o=1}){r!==void 0&&(n=kl(r));const a=.5*n*Yt,l=Y1(n),u=i*Yt,c=Math.sin(a)*l/Math.sin(Math.min(Math.max(Math.PI/2-u-a,.01),Math.PI-.01)),f=Math.sin(u)*c+l;return{fov:2*a,aspect:t/e,focalDistance:l,near:s,far:f*o}}function kl(t){return 2*Math.atan(.5/t)*Jf}function Y1(t){return .5/Math.tan(.5*t*Yt)}function Z1(t,e){const[n,r,i=0]=t;return Tn(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),Pi(e,[n,r,i,1])}function Ou(t,e,n=0){const[r,i,s]=t;if(Tn(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return Pi(e,[r,i,s,1]);const o=Pi(e,[r,i,0,1]),a=Pi(e,[r,i,1,1]),l=o[2],u=a[2],c=l===u?0:((n||0)-l)/(u-l);return N1([],o,a,c)}function q1({width:t,height:e,bounds:n,minExtent:r=0,maxZoom:i=24,padding:s=0,offset:o=[0,0]}){const[[a,l],[u,c]]=n;if(Number.isFinite(s)){const S=s;s={top:S,bottom:S,left:S,right:S}}else Tn(Number.isFinite(s.top)&&Number.isFinite(s.bottom)&&Number.isFinite(s.left)&&Number.isFinite(s.right));const f=$i([a,f0(c,-Ca,Ca)]),h=$i([u,f0(l,-Ca,Ca)]),g=[Math.max(Math.abs(h[0]-f[0]),r),Math.max(Math.abs(h[1]-f[1]),r)],_=[t-s.left-s.right-Math.abs(o[0])*2,e-s.top-s.bottom-Math.abs(o[1])*2];Tn(_[0]>0&&_[1]>0);const v=_[0]/g[0],d=_[1]/g[1],p=(s.right-s.left)/2/v,m=(s.bottom-s.top)/2/d,w=[(h[0]+f[0])/2+p,(h[1]+f[1])/2+m],b=Ur(w),x=Math.min(i,Ud(Math.abs(Math.min(v,d))));return Tn(Number.isFinite(x)),{longitude:b[0],latitude:b[1],zoom:x}}const d0=Math.PI/180;function pM(t,e=0){const{width:n,height:r,unproject:i}=t,s={targetZ:e},o=i([0,r],s),a=i([n,r],s);let l,u;const c=t.fovy?.5*t.fovy*d0:Math.atan(.5/t.altitude),f=(90-t.pitch)*d0;return c>f-.01?(l=p0(t,0,e),u=p0(t,n,e)):(l=i([0,0],s),u=i([n,0],s)),[o,a,u,l]}function p0(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=Pi(r,[e,0,1,1]),s=Pi(r,[e,t.height,1,1]),a=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2]),l=N1([],i,s,a),u=Ur(l);return u[2]=n,u}const g0=512;function gM({width:t,height:e,longitude:n,latitude:r,zoom:i,pitch:s=0,bearing:o=0}){(n<-180||n>180)&&(n=c0(n+180,360)-180),(o<-180||o>180)&&(o=c0(o+180,360)-180);const a=Ud(e/g0);if(i<=a)i=a,r=0;else{const l=e/2/Math.pow(2,i),u=Ur([0,l])[1];if(r<u)r=u;else{const c=Ur([0,g0-l])[1];r>c&&(r=c)}}return{width:t,height:e,longitude:n,latitude:r,zoom:i,pitch:s,bearing:o}}const K1=.01,mM=["longitude","latitude","zoom"],Q1={curve:1.414,speed:1.2};function yM(t,e,n,r={}){const i={},{startZoom:s,startCenterXY:o,uDelta:a,w0:l,u1:u,S:c,rho:f,rho2:h,r0:g}=J1(t,e,r);if(u<K1){for(const x of mM){const S=t[x],O=e[x];i[x]=lM(S,O,n)}return i}const _=n*c,v=Math.cosh(g)/Math.cosh(g+f*_),d=l*((Math.cosh(g)*Math.tanh(g+f*_)-Math.sinh(g))/h)/u,p=1/v,m=s+W1(p),w=MO([],a,d);OO(w,w,o);const b=Ur(w);return i.longitude=b[0],i.latitude=b[1],i.zoom=m,i}function _M(t,e,n={}){n=Object.assign({},Q1,n);const{screenSpeed:r,speed:i,maxDuration:s}=n,{S:o,rho:a}=J1(t,e,n),l=1e3*o;let u;return Number.isFinite(r)?u=l/(r/a):u=l/i,Number.isFinite(s)&&u>s?0:u}function J1(t,e,n){n=Object.assign({},Q1,n);const r=n.curve,i=t.zoom,s=[t.longitude,t.latitude],o=h0(i),a=e.zoom,l=[e.longitude,e.latitude],u=h0(a-i),c=$i(s),f=$i(l),h=kO([],f,c),g=Math.max(t.width,t.height),_=g/u,v=IO(h)*o,d=Math.max(v,K1),p=r*r,m=(_*_-g*g+p*p*d*d)/(2*g*p*d),w=(_*_-g*g-p*p*d*d)/(2*_*p*d),b=Math.log(Math.sqrt(m*m+1)-m),x=Math.log(Math.sqrt(w*w+1)-w),S=(x-b)/r;return{startZoom:i,startCenterXY:c,uDelta:h,w0:g,u1:v,S,rho:r,rho2:p,r0:b,r1:x}}const vM=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,EM=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,wM=Cu(AM),bM=Cu(PM),TM=[0,0,0,1],SM=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function xM(t,e){const[n,r,i]=t,s=Ou([n,r,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}function AM({viewport:t,center:e}){return new ht(t.viewProjectionMatrix).invert().transform(e)}function PM({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,s=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>xM(o,r));for(const o of e){const a=o.clone().translate(new xt(t.center).negate()),l=s.map(c=>a.transform(c)),u=new ht().ortho({left:Math.min(...l.map(c=>c[0])),right:Math.max(...l.map(c=>c[0])),bottom:Math.min(...l.map(c=>c[1])),top:Math.max(...l.map(c=>c[1])),near:Math.min(...l.map(c=>-c[2])),far:Math.max(...l.map(c=>-c[2]))});n.push(u.multiplyRight(o))}return n}function CM(t={},e={}){const n={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||TM,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=wM({viewport:t.viewport,center:e.project_uCenter}),i=[],s=bM({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let o=0;o<t.shadowMatrices.length;o++){const a=s[o],l=a.clone().translate(new xt(t.viewport.center).negate());e.project_uCoordinateSystem===he.LNGLAT&&e.project_uProjectionMode===ln.WEB_MERCATOR?(s[o]=l,i[o]=r):(s[o]=a.clone().multiplyRight(SM),i[o]=l.transform(r))}for(let o=0;o<s.length;o++)n["shadow_uViewProjectionMatrices[".concat(o,"]")]=s[o],n["shadow_uProjectCenters[".concat(o,"]")]=i[o],t.shadowMaps&&t.shadowMaps.length>0?n["shadow_uShadowMap".concat(o)]=t.shadowMaps[o]:n["shadow_uShadowMap".concat(o)]=t.dummyShadowMap;return n}var Ic={name:"shadow",dependencies:[Fd],vs:vM,fs:EM,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>{if(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0){const{shadowEnabled:n=!0}=t;return n&&t.shadowMatrices&&t.shadowMatrices.length>0?CM(t,e):{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}}return{}}},eE=A({inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}}},pR);const OM=[Fd],RM=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function MM(t){const e=Zo.getDefaultProgramManager(t);for(const n of OM)e.addDefaultModule(n);for(const n of RM)e.addShaderHook(n);return e}const IM=[255,255,255],LM=1;let kM=0;class NM{constructor(e={}){const{color:n=IM}=e,{intensity:r=LM}=e;this.id=e.id||"ambient-".concat(kM++),this.color=n,this.intensity=r,this.type="ambient"}}const DM=[255,255,255],FM=1,UM=[0,0,-1];let jM=0;class m0{constructor(e={}){const{color:n=DM}=e,{intensity:r=FM}=e,{direction:i=UM}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(jM++),this.color=n,this.intensity=r,this.type="directional",this.direction=new xt(i).normalize().toArray(),this.shadow=s}getProjectedLight(){return this}}class jd{constructor(e={}){I(this,"id",void 0),I(this,"props",void 0),I(this,"useInPicking",void 0);const{id:n="effect"}=e;this.id=n,this.props=A({},e),this.useInPicking=!1}preRender(){}getModuleParameters(e){}cleanup(){}}class BM{constructor(e,n={id:"pass"}){I(this,"id",void 0),I(this,"gl",void 0),I(this,"props",void 0);const{id:r}=n;this.id=r,this.gl=e,this.props=A({},n)}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class Ru extends BM{render(e){const n=this.gl;return Pn(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:r,viewports:i,views:s,onViewportActive:o,clearCanvas:a=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;a&&VM(l);const u=[];for(const c of i){const f=s&&s[c.id];o(c);const h=this._getDrawLayerParams(c,e),g=c.subViewports||[c];for(const _ of g){const v=this._drawLayersInViewport(l,{target:n,moduleParameters:r,viewport:_,view:f,pass:e.pass,layers:e.layers},h);u.push(v)}}return u}_getDrawLayerParams(e,{layers:n,pass:r,layerFilter:i,effects:s,moduleParameters:o}){const a=[],l=tE(),u={layer:n[0],viewport:e,isPicking:r.startsWith("picking"),renderPass:r},c={};for(let f=0;f<n.length;f++){const h=n[f],g=this._shouldDrawLayer(h,u,i,c),_=l(h,g),v={shouldDrawLayer:g,layerRenderIndex:_};g&&(v.moduleParameters=this._getModuleParameters(h,s,r,o),v.layerParameters=this.getLayerParameters(h,f,e)),a[f]=v}return a}_drawLayersInViewport(e,{layers:n,moduleParameters:r,pass:i,target:s,viewport:o,view:a},l){const u=zM(e,{moduleParameters:r,target:s,viewport:o});if(a&&a.props.clear){const f=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;Ft(e,{scissorTest:!0,scissor:u},()=>Rd(e,f))}const c={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};Pn(e,{viewport:u});for(let f=0;f<n.length;f++){const h=n[f],{shouldDrawLayer:g,layerRenderIndex:_,moduleParameters:v,layerParameters:d}=l[f];if(g&&h.props.pickable&&c.pickableCount++,h.isComposite)c.compositeCount++;else if(g){c.visibleCount++,v.viewport=o;try{h.drawLayer({moduleParameters:v,uniforms:{layerIndex:_},parameters:d})}catch(p){h.raiseError(p,"drawing ".concat(h," to ").concat(i))}}}return c}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,i){if(!(this.shouldDrawLayer(e)&&e.props.visible))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(r){const a=n.layer.id;if(a in i||(i[a]=r(n)),!i[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,i){const s=Object.assign(Object.create(e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Di(this.gl)});if(n)for(const o of n)Object.assign(s,o.getModuleParameters(e));return Object.assign(s,this.getModuleParameters(e,n),i)}}function tE(t=0,e={}){const n={},r=(i,s)=>{const o=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let u;if(l&&!(l in e)&&r(i.parent,!1),l in n){const c=n[l]=n[l]||tE(e[l],e);u=c(i,s),n[a]=c}else Number.isFinite(o)?(u=o+(e[l]||0),n[a]=null):u=t;return s&&u>=t&&(t=u+1),e[a]=u,u};return r}function zM(t,{moduleParameters:e,target:n,viewport:r}){const i=n&&n.id!=="default-framebuffer",s=e&&e.devicePixelRatio||Di(t),o=i?n.height:t.drawingBufferHeight,a=r;return[a.x*s,o-(a.y+a.height)*s,a.width*s,a.height*s]}function VM(t){const e=t.drawingBufferWidth,n=t.drawingBufferHeight;Pn(t,{viewport:[0,0,e,n]}),t.clear(16640)}class $M extends Ru{constructor(e,n){super(e,n);I(this,"shadowMap",void 0),I(this,"depthBuffer",void 0),I(this,"fbo",void 0),this.shadowMap=new gt(e,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new gi(e,{format:33189,width:1,height:1}),this.fbo=new ke(e,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(e){const n=this.fbo;Ft(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],i=Di(this.gl),s=r.width*i,o=r.height*i;(s!==n.width||o!==n.height)&&n.resize({width:s,height:o}),super.render(K(A({},e),{target:n,pass:"shadow"}))})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const GM={color:[255,255,255],intensity:1},y0=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],HM=[0,0,0,200/255];class nE extends jd{constructor(e){super(e);this.ambientLight=null,this.directionalLights=[],this.pointLights=[],this.shadowColor=HM,this.shadowPasses=[],this.shadowMaps=[],this.dummyShadowMap=null,this.shadow=!1,this.programManager=null;for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow)}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o}){if(!!this.shadow){this.shadowMatrices=this._createLightMatrix(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=Zo.getDefaultProgramManager(e),Ic&&this.programManager.addDefaultModule(Ic)),this.dummyShadowMap||(this.dummyShadowMap=new gt(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(Ic),this.programManager=null)}_createLightMatrix(){const e=[];for(const n of this.directionalLights){const r=new ht().lookAt({eye:new xt(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new $M(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new NM(GM),this.directionalLights.push(new m0(y0[0]),new m0(y0[1])))}}class WM{constructor(e){this._pool=[],this.props={overAlloc:2,poolSize:100},this.setProps(e)}setProps(e){Object.assign(this.props,e)}allocate(e,n,{size:r=1,type:i,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:l}){const u=i||e&&e.constructor||Float32Array,c=n*r+s;if(ArrayBuffer.isView(e)){if(c<=e.length)return e;if(c*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new u(e.buffer,0,c)}let f;l&&(f=l*r+s);const h=this._allocate(u,c,a,f);return e&&o?h.set(e):a||h.fill(0,0,4),this._release(e),h}release(e){this._release(e)}_allocate(e,n,r,i){let s=Math.max(Math.ceil(n*this.props.overAlloc),1);s>i&&(s=i);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,l=o.findIndex(u=>u.byteLength>=a);if(l>=0){const u=new e(o.splice(l,1)[0],0,s);return r&&u.fill(0),u}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:i}=r,s=n.findIndex(o=>o.byteLength>=i);s<0?n.push(r):(s>0||n.length<this.props.poolSize)&&n.splice(s,0,r),n.length>this.props.poolSize&&n.shift()}}var _o=new WM;function Rs(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function XM(t,e){const n=t%e;return n<0?e+n:n}function YM(t){return[t[12],t[13],t[14]]}function ZM(t){return{left:ni(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:ni(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:ni(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:ni(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:ni(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:ni(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const _0=new xt;function ni(t,e,n,r){_0.set(t,e,n);const i=_0.len();return{distance:r/i,normal:new xt(-t/i,-e/i,-n/i)}}function qM(t){return t-Math.fround(t)}let ws;function Lc(t,e){const{size:n=1,startIndex:r=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,s=(i-r)/n;ws=_o.allocate(ws,s,{type:Float32Array,size:n*2});let o=r,a=0;for(;o<i;){for(let l=0;l<n;l++){const u=t[o++];ws[a+l]=u,ws[a+l+n]=qM(u)}a+=n*2}return ws.subarray(0,s*n*2)}const KM=Math.PI/180,QM=Rs(),kc=[0,0,0],JM=0,eI={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class lr{constructor(e={}){const{id:n=null,x:r=0,y:i=0,width:s=1,height:o=1}=e;this.id=n||this.constructor.displayName||"viewport",this.x=r,this.y=i,this.width=s||1,this.height=o||1,this._frustumPlanes={},this._initViewMatrix(e),this._initProjectionMatrix(e),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?ln.WEB_MERCATOR:ln.WEB_MERCATOR_AUTO_OFFSET:ln.IDENTITY}equals(e){return e instanceof lr?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Bi(e.projectionMatrix,this.projectionMatrix)&&Bi(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),i=Z1(r,this.pixelProjectionMatrix),[s,o]=i,a=n?o:this.height-o;return e.length===2?[s,a]:[s,a,i[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,s,o]=e,a=n?s:this.height-s,l=r&&r*this.distanceScales.unitsPerMeter[2],u=Ou([i,a,o],this.pixelUnprojectionMatrix,l),[c,f,h]=this.unprojectPosition(u);return Number.isFinite(o)?[c,f,h]:Number.isFinite(r)?[c,f,r]:[c,f]}projectPosition(e){const[n,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,i]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,i]}projectFlat(e){return this.isGeospatial?$i(e):e}unprojectFlat(e){return this.isGeospatial?Ur(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),i=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(r[0],i[0],s[0],o[0]),Math.min(r[1],i[1],s[1],o[1]),Math.max(r[0],i[0],s[0],o[0]),Math.max(r[1],i[1],s[1],o[1])]}getDistanceScales(e=null){return e?th({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:i=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,ZM(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}getCameraPosition(){return this.cameraPosition}getCameraDirection(){return this.cameraDirection}getCameraUp(){return this.cameraUp}_createProjectionMatrix({orthographic:e,fovyRadians:n,aspect:r,focalDistance:i,near:s,far:o}){return e?new ht().orthographic({fovy:n,aspect:r,focalDistance:i,near:s,far:o}):new ht().perspective({fovy:n,aspect:r,near:s,far:o})}_initViewMatrix(e){const{viewMatrix:n=QM,longitude:r=null,latitude:i=null,zoom:s=null,position:o=null,modelMatrix:a=null,focalDistance:l=1,distanceScales:u=null}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(r),this.zoom=s,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?fM({latitude:i})+Math.log2(l):JM);const c=Math.pow(2,this.zoom);this.scale=c,this.distanceScales=this.isGeospatial?th({latitude:i,longitude:r}):u||eI,this.focalDistance=l,this.distanceScales.metersPerUnit=new xt(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new xt(this.distanceScales.unitsPerMeter),this.position=kc,this.meterOffset=kc,o&&(this.position=o,this.modelMatrix=a,this.meterOffset=a?a.transformVector(o):o),this.isGeospatial?(this.longitude=r,this.latitude=i,this.center=this._getCenterInWorld({longitude:r,latitude:i})):this.center=o?this.projectPosition(o):[0,0,0],this.viewMatrixUncentered=n,this.viewMatrix=new ht().multiplyRight(this.viewMatrixUncentered).translate(new xt(this.center||kc).negate())}_getCenterInWorld({longitude:e,latitude:n}){const{meterOffset:r,distanceScales:i}=this,s=new xt(this.projectPosition([e,n,0]));if(r){const o=new xt(r).scale(i.unitsPerMeter);s.add(o)}return s}_initProjectionMatrix(e){const{projectionMatrix:n=null,orthographic:r=!1,fovyRadians:i,fovy:s=75,near:o=.1,far:a=1e3,focalDistance:l=1}=e;this.projectionMatrix=n||this._createProjectionMatrix({orthographic:r,fovyRadians:i||s*KM,aspect:this.width/this.height,focalDistance:l,near:o,far:a})}_initPixelMatrices(){const e=Rs();Zs(e,e,this.projectionMatrix),Zs(e,e,this.viewMatrix),this.viewProjectionMatrix=e,this.viewMatrixInverse=l0([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=YM(this.viewMatrixInverse);const n=Rs(),r=Rs();XR(n,n,[this.width/2,-this.height/2,1]),WR(n,n,[1,-1,0]),Zs(r,n,this.viewProjectionMatrix),this.pixelProjectionMatrix=r,this.viewportMatrix=n,this.pixelUnprojectionMatrix=l0(Rs(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||fe.warn("Pixel project matrix not invertible")()}}lr.displayName="Viewport";function tI(){var t=new Vi(2);return Vi!=Float32Array&&(t[0]=0,t[1]=0),t}function Nl(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function rE(t,e){return t[0]=-e[0],t[1]=-e[1],t}(function(){var t=tI();return function(e,n,r,i,s,o){var a,l;for(n||(n=2),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}})();const nI=512,rI=4003e4,iI=Math.PI/180;function v0(t){const e=Math.cos(t*iI);return nI/rI/e}class ur extends lr{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=11,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,orthographic:u=!1,projectionMatrix:c,repeat:f=!1,worldOffset:h=0,legacyMeterSizes:g=!1}=e;let{width:_,height:v,altitude:d=1.5}=e;const p=Math.pow(2,i);_=_||1,v=v||1;let m,w=null;c?(d=c[5]/2,m=kl(d)):(e.fovy?(m=e.fovy,d=Y1(m)):m=kl(d),w=dM({width:_,height:v,pitch:s,fovy:m,nearZMultiplier:a,farZMultiplier:l}));let b=hM({height:v,pitch:s,bearing:o,scale:p,altitude:d});h&&(b=new ht().translate([512*h,0,0]).multiplyLeft(b));super(K(A(K(A({},e),{width:_,height:v,viewMatrix:b,longitude:r,latitude:n,zoom:i}),w),{fovy:m,focalDistance:d}));this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=s,this.bearing=o,this.altitude=d,this.fovy=m,this.orthographic=u,this._subViewports=f?[]:null,this._pseudoMeters=g,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=n;i<=r;i++){const s=i?new ur(K(A({},this),{worldOffset:i})):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),i=(e[2]||0)*v0(e[1]);return[n,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),i=(e[2]||0)/v0(r);return[n,r,i]}addMetersToLngLat(e,n){return X1(e,n)}panByPosition(e,n){const r=Ou(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=Nl([],i,rE([],r)),o=Nl([],this.center,s),[a,l]=this.unprojectFlat(o);return{longitude:a,latitude:l}}getBounds(e={}){const n=pM(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:i}=this,{longitude:s,latitude:o,zoom:a}=q1(A({width:r,height:i,bounds:e},n));return new ur({width:r,height:i,longitude:s,latitude:o,zoom:a})}}ur.displayName="WebMercatorViewport";function sI(){var t=new Vi(3);return Vi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function oI(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}var aI=oI;(function(){var t=sI();return function(e,n,r,i,s,o){var a,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();function Nc(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof ur){const[i,s,o=0]=t,a=e.getDistanceScales([i,s]);r[2]=o*a.unitsPerMeter[2]}return r}function lI(t){const e=A({},t);let{coordinateSystem:n}=t;const{viewport:r,coordinateOrigin:i,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return n===he.DEFAULT&&(n=r.isGeospatial?he.LNGLAT:he.CARTESIAN),s===void 0&&(e.fromCoordinateSystem=n),o===void 0&&(e.fromCoordinateOrigin=i),e.coordinateSystem=n,e}function iE(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:s}){let[o,a,l=0]=t;switch(n&&([o,a,l]=Dd([],[o,a,l,1],n)),r){case he.LNGLAT:return Nc([o,a,l],e,s);case he.LNGLAT_OFFSETS:return Nc([o+i[0],a+i[1],l+(i[2]||0)],e,s);case he.METER_OFFSETS:return Nc(X1(i,[o,a,l]),e,s);case he.CARTESIAN:default:return e.isGeospatial?[o+i[0],a+i[1],l+i[2]]:e.projectPosition([o,a,l])}}function uI(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=lI(e),{geospatialOrigin:l,shaderCoordinateOrigin:u,offsetMode:c}=$1(n,r,i),f=iE(t,{viewport:n,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:c});if(c){const h=n.projectPosition(l||u);aI(f,f,h)}return f}const ai={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},Dl=Symbol.for("component"),Ci=Symbol.for("asyncPropDefaults"),jr=Symbol.for("asyncPropOriginal"),$n=Symbol.for("asyncPropResolved");function sE(t,e=()=>!0){return Array.isArray(t)?oE(t,e,[]):e(t)?[t]:[]}function oE(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?oE(i,e,n):e(i)&&n.push(i)}return n}function cI({target:t,source:e,start:n=0,count:r=1}){const i=e.length,s=r*i;let o=0;for(let a=n;o<i;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}class fI{constructor(e,n,r){this.id=e,this.context=r,this._loadCount=0,this._subscribers=new Set,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let i=e;typeof e=="string"&&(i=Ol(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=null,this._content=s)}).catch(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=null,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class hI{constructor({gl:e,protocol:n}){this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}){let s=this._resources[e];s?s.setData(n,r):(s=new fI(e,n,this._context),this._resources[e]=s),s.persistent=i}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const i=n[r];i.resource&&i.resource.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:i="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(e=e.replace(o,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,i){const s=this._consumers,o=s[e]=s[e]||{},a=o[n]||{};a.resource&&(a.resource.unsubscribe(a),a.resource=null,this.prune()),r&&(o[n]=a,a.onChange=i,a.resource=r,r.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const dI="layerManager.setLayers",pI="layerManager.activateViewport",gI=Object.seal({layerManager:null,resourceManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}});class mI{constructor(e,{deck:n,stats:r,viewport:i,timeline:s}={}){this.lastRenderedLayers=[],this.layers=[],this.resourceManager=new hI({gl:e,protocol:"deck://"}),this.context=K(A({},gI),{layerManager:this,gl:e,deck:n,programManager:e&&MM(e),stats:r||new _d({id:"deck.gl"}),viewport:i||new lr({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new V1,resourceManager:this.resourceManager}),this._nextLayers=null,this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);n=n||i}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this.lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e=null}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){ot(dI,this,n,e),this.lastRenderedLayers=e,e=sE(e,Boolean);for(const r of e)r.context=this.context;return this._updateLayers(this.layers,e),this}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this.lastRenderedLayers,e)),this._nextLayers=null}activateViewport(e){return ot(pI,this,e),e&&(this.context.viewport=e),this}_handleError(e,n,r){r.raiseError(n,"".concat(e," of ").concat(r))}_updateLayers(e,n){const r={};for(const o of e)r[o.id]?fe.warn("Multiple old layers with same id ".concat(o.id))():r[o.id]=o;const i=[];this._updateSublayersRecursively(n,r,i),this._finalizeOldLayers(r);let s=!1;for(const o of i)if(o.hasUniformTransition()){s=!0;break}this._needsUpdate=s,this.layers=i}_updateSublayersRecursively(e,n,r){for(const i of e){i.context=this.context;const s=n[i.id];s===null&&fe.warn("Multiple new layers with same id ".concat(i.id))(),n[i.id]=null;let o=null;try{this._debug&&s!==i&&i.validateProps(),s?(this._transferLayerState(s,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),o=i.isComposite&&i.getSubLayers()}catch(a){this._handleError("matching",a,i)}o&&this._updateSublayersRecursively(o,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=ai.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=ai.MATCHED,n!==e&&(e.lifecycle=ai.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=ai.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=ai.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function Ko(t,e){if(t===e)return!0;if(!t||!e)return!1;for(const n in t){const r=t[n],i=e[n];if(!(r===i||Array.isArray(r)&&Array.isArray(i)&&Ko(r,i)))return!1}return!0}class yI{constructor(e={}){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return typeof e=="string"?this.views.find(n=>n.id===e):e}getViewState(e){const n=this.getView(e),r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let s=r.length-1;s>=0;--s){const o=r[s];if(o.containsPixel(i)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,n)}}return null}setProps(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=sE(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!Ko(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):fe.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){n.viewId=e,this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange(n)}_createController(e,n){const r=n.type;return new r(A({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>e._getViewport(s,{width:s.width,height:s.height})},n))}_updateController(e,n,r,i){let s=e.controller;return s?(s=K(A(A(A({},n),e.props),s),{id:e.id,x:r.x,y:r.y,width:r.width,height:r.height}),i?i.setProps(s):i=this._createController(e,s),i):null}_rebuildViewports(){const{width:e,height:n,views:r}=this,i=this.controllers;this._viewports=[],this.controllers={};let s=!1;for(let o=r.length;o--;){const a=r[o],l=this.getViewState(a),u=a.makeViewport({width:e,height:n,viewState:l});let c=i[a.id];a.controller&&!c&&(s=!0),(s||!a.controller)&&c&&(c.finalize(),c=null),this.controllers[a.id]=this._updateController(a,l,u,c),this._viewports.unshift(u)}for(const o in i)i[o]&&!this.controllers[o]&&i[o].finalize();this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,i)=>!e[i].equals(n[i]))}}const _I=/([0-9]+\.?[0-9]*)(%|px)/;function Oa(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=_I.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function Ra(t,e){return t.relative?Math.round(t.position*e):t.position}function Zt(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class Br{constructor(e={}){const{id:n=null,x:r=0,y:i=0,width:s="100%",height:o="100%",viewportInstance:a,type:l=lr}=e;Zt(!a||a instanceof lr),this.viewportInstance=a,this.id=n||this.constructor.displayName||"view",this.type=l,this.props=K(A({},e),{id:this.id}),this._parseDimensions({x:r,y:i,width:s,height:o}),this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):Ko(this.props,e.props)}makeViewport({width:e,height:n,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return this._getViewport(r,i)}getViewStateId(){switch(typeof this.props.viewState){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n=A({},e);for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){return{x:Ra(this._x,e),y:Ra(this._y,n),width:Ra(this._width,e),height:Ra(this._height,n)}}_getControllerProps(e){let n=this.props.controller;return n?n===!0?e:(typeof n=="function"&&(n={type:n}),A(A({},e),n)):null}_getViewport(e,n){const{type:r}=this;return new r(A(A(A({},e),this.props),n))}_parseDimensions({x:e,y:n,width:r,height:i}){this._x=Oa(e),this._y=Oa(n),this._width=Oa(r),this._height=Oa(i)}}function Ma(){}const vI={onStart:Ma,onUpdate:Ma,onInterrupt:Ma,onEnd:Ma};class Qo{constructor(e){this._inProgress=!1,this._handle=null,this.timeline=e,this.settings={}}get inProgress(){return this._inProgress}start(e){this.cancel(),this.settings=A(A({},vI),e),this._inProgress=!0,this.settings.onStart(this)}end(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}cancel(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){if(!this._inProgress)return!1;if(this._handle===null){const{timeline:e,settings:n}=this;this._handle=e.addChannel({delay:e.getTime(),duration:n.duration})}return this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const qs=()=>{},Fl={BREAK:1,SNAP_TO_END:2,IGNORE:3},E0={transitionEasing:t=>t,transitionInterruption:Fl.BREAK,onTransitionStart:qs,onTransitionInterrupt:qs,onTransitionEnd:qs};class EI{constructor(e,n={}){this.ControllerState=e,this.props=A(A({},E0),n),this.propsInTransition=null,this.transition=new Qo(n.timeline),this.onViewStateChange=n.onViewStateChange||qs,this.onStateChange=n.onStateChange||qs,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(e=A(A({},E0),e),this.props=e,this._shouldIgnoreViewportChange(r,e))return n;if(this._isTransitionEnabled(e)){const{interruption:i,endProps:s}=this.transition.settings,o=A(A({},r),i===Fl.SNAP_TO_END?s:this.propsInTransition||r);this._triggerTransition(o,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&Boolean(r)}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===Fl.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=new this.ControllerState(e),i=new this.ControllerState(n).shortestPathFrom(r),{transitionInterpolator:s}=n,o=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(o===0)return;const a=n.transitionInterpolator.initializeProps(e,i);this.propsInTransition={},this.duration=o,this.transition.start({duration:o,easing:n.transitionEasing,interpolator:n.transitionInterpolator,interruption:n.transitionInterruption,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)}),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e(n)}}_onTransitionUpdate(e){const{time:n,settings:{interpolator:r,startProps:i,endProps:s,duration:o,easing:a}}=e,l=a(n/o),u=r.interpolateProps(i,s,l);this.propsInTransition=new this.ControllerState(A(A({},this.props),u)).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}}class aE{constructor(e={}){Array.isArray(e)&&(e={compare:e,extract:e,required:e});const{compare:n,extract:r,required:i}=e;this._propsToCompare=n,this._propsToExtract=r,this._requiredProps=i}arePropsEqual(e,n){for(const r of this._propsToCompare||Object.keys(n))if(!(r in e)||!(r in n)||!Bi(e[r],n[r]))return!1;return!0}initializeProps(e,n){let r;if(this._propsToExtract){const i={},s={};for(const o of this._propsToExtract)i[o]=e[o],s[o]=n[o];r={start:i,end:s}}else r={start:e,end:n};return this._checkRequiredProps(r.start),this._checkRequiredProps(r.end),r}interpolateProps(e,n,r){return n}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){!this._requiredProps||this._requiredProps.forEach(n=>{const r=e[n];Zt(Number.isFinite(r)||Array.isArray(r),"".concat(n," is required for transition"))})}}const w0=["longitude","latitude","zoom","bearing","pitch"],wI=["longitude","latitude","zoom"];class b0 extends aE{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps;super(n||{compare:w0,extract:w0,required:wI});this.opts=e}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:i,around:s}=this.opts;if(i&&s){const o=i(e),a=i(n),l=o.unproject(s);r.start.around=s,Object.assign(r.end,{around:a.project(l),aroundPosition:l,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const i={};for(const s of this._propsToExtract)i[s]=mo(e[s]||0,n[s]||0,r);if(n.aroundPosition){const s=this.opts.makeViewport(A(A({},n),i));Object.assign(i,s.panByPosition(n.aroundPosition,mo(e.around,n.around,r)))}return i}}const kn={transitionDuration:0},bI={transitionDuration:300,transitionEasing:t=>t,transitionInterruption:Fl.BREAK},TI=300,Ia=t=>1-(1-t)*(1-t),ri={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]};class lE{constructor(e,n={}){I(this,"ControllerState",void 0),I(this,"controllerState",null),I(this,"controllerStateProps",null),I(this,"transitionManager",void 0),I(this,"_transition",void 0),I(this,"_events",null),I(this,"eventManager",null),I(this,"_interactionState",{isDragging:!1}),I(this,"_customEvents",[]),I(this,"onViewStateChange",null),I(this,"onStateChange",null),I(this,"makeViewport",void 0),I(this,"_eventStartBlocked",void 0),I(this,"_state",void 0),I(this,"_panMove",void 0),I(this,"invertPan",void 0),I(this,"dragMode","rotate"),I(this,"inertia",0),I(this,"scrollZoom",!0),I(this,"dragPan",!0),I(this,"dragRotate",!0),I(this,"doubleClickZoom",!0),I(this,"touchZoom",!0),I(this,"touchRotate",!1),I(this,"keyboard",!0),this.ControllerState=e,this.transitionManager=new EI(e,K(A({},n),{onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}));const r=this.linearTransitionProps;this._transition=r&&K(A({},bI),{transitionInterpolator:new b0({transitionProps:r})}),this.handleEvent=this.handleEvent.bind(this),this.setProps(n)}get linearTransitionProps(){return null}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.setProps(this.controllerStateProps)}finalize(){for(const e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}handleEvent(e){const{ControllerState:n}=this;this.controllerState=new n(A(A({makeViewport:this.makeViewport},this.controllerStateProps),this._state));const r=this._eventStartBlocked;switch(e.type){case"panstart":return r?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return r?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return r?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}getCenter(e){const{x:n,y:r}=this.controllerStateProps,{offsetCenter:i}=e;return[i.x-n,i.y-r]}isPointInBounds(e,n){const{width:r,height:i}=this.controllerStateProps;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return Boolean(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),"makeViewport"in e&&(this.makeViewport=e.makeViewport),"dragMode"in e&&(this.dragMode=e.dragMode),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);let{inertia:n}=e;n===!0&&(n=TI),this.inertia=n;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:u=!0}=e,c=Boolean(this.onViewStateChange);this.toggleEvents(ri.WHEEL,c&&r),this.toggleEvents(ri.PAN,c&&(i||s)),this.toggleEvents(ri.PINCH,c&&(a||l)),this.toggleEvents(ri.TRIPLE_PAN,c&&l),this.toggleEvents(ri.DOUBLE_TAP,c&&o),this.toggleEvents(ri.KEYBOARD,c&&u),this.scrollZoom=r,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=l,this.keyboard=u}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n={},r={}){const i=A(A({},e.getViewportProps()),n),s=this.controllerState!==e;if(this._state=e.getState(),this._setInteractionState(r),s){const o=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange&&(e.interactionState=this._interactionState,this.onViewStateChange(e))}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange&&this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton;(this.invertPan||this.dragMode==="pan")&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(i,kn,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,kn,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(s,K(A({},this._getTransitionProps()),{transitionDuration:n,transitionEasing:Ia}),{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,kn,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(s,K(A({},this._getTransitionProps()),{transitionDuration:n,transitionEasing:Ia}),{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.preventDefault();const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const{speed:r=.01,smooth:i=!1}=this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*r)));s<0&&o!==0&&(o=1/o);const a=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(a,K(A({},this._getTransitionProps({around:n})),{transitionDuration:i?250:1}),{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,kn,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,kn,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:i});this.updateViewport(s,K(A({},this._getTransitionProps()),{transitionDuration:n,transitionEasing:Ia}),{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return this._startPinchRotation=e.rotation,this._lastPinchEvent=e,this.updateViewport(r,kn,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);n=n.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:this._startPinchRotation-r})}return this.updateViewport(n,kn,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),this._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n,_lastPinchEvent:r}=this;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const i=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),l=Math.pow(2,o+a*n/2);s=s.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(s,K(A({},this._getTransitionProps({around:i})),{transitionDuration:n,transitionEasing:Ia}),{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return this._startPinchRotation=null,this._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard,{controllerState:a}=this;let l;const u={};switch(e.srcEvent.code){case"Minus":l=n?a.zoomOut(r).zoomOut(r):a.zoomOut(r),u.isZooming=!0;break;case"Equal":l=n?a.zoomIn(r).zoomIn(r):a.zoomIn(r),u.isZooming=!0;break;case"ArrowLeft":n?(l=a.rotateLeft(s),u.isRotating=!0):(l=a.moveLeft(i),u.isPanning=!0);break;case"ArrowRight":n?(l=a.rotateRight(s),u.isRotating=!0):(l=a.moveRight(i),u.isPanning=!0);break;case"ArrowUp":n?(l=a.rotateUp(o),u.isRotating=!0):(l=a.moveUp(i),u.isPanning=!0);break;case"ArrowDown":n?(l=a.rotateDown(o),u.isRotating=!0):(l=a.moveDown(i),u.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),u),!0}_getTransitionProps(e){const{_transition:n}=this;return n?e?K(A({},n),{transitionInterpolator:new b0(K(A({},e),{transitionProps:this.linearTransitionProps,makeViewport:this.controllerState.makeViewport}))}):n:kn}}class uE{constructor(e){I(this,"_viewportProps",void 0),I(this,"_state",void 0),this._viewportProps=this._applyConstraints(e)}getViewportProps(){return this._viewportProps}getState(){return this._state}shortestPathFrom(e){return this._viewportProps}_applyConstraints(e){return e}}const T0=5,SI=1.2,xI={pitch:0,bearing:0,altitude:1.5,minZoom:0,maxZoom:20,minPitch:0,maxPitch:60,position:[0,0,0]};class AI extends uE{constructor(e){e=A(A({},xI),e);const{makeViewport:n,width:r,height:i,latitude:s,longitude:o,zoom:a,bearing:l,pitch:u,altitude:c,position:f,maxZoom:h,minZoom:g,maxPitch:_,minPitch:v,startPanLngLat:d,startZoomLngLat:p,startRotatePos:m,startBearing:w,startPitch:b,startZoom:x,normalize:S}=e||{};Zt(Number.isFinite(o)),Zt(Number.isFinite(s)),Zt(Number.isFinite(a));super({width:r,height:i,latitude:s,longitude:o,zoom:a,bearing:l,pitch:u,altitude:c,maxZoom:h,minZoom:g,maxPitch:_,minPitch:v,normalize:S,position:f});this._state={startPanLngLat:d,startZoomLngLat:p,startRotatePos:m,startBearing:w,startPitch:b,startZoom:x},this.makeViewport=n}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this._state.startPanLngLat||this._unproject(n);if(!r)return this;const s=this.makeViewport(this._viewportProps).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:s,startPitch:o}=this._state;if(!i||!Number.isFinite(s)||!Number.isFinite(o))return this;let a;return e?a=this._calculateNewPitchAndBearing(K(A({},this._getRotationParams(e,i)),{startBearing:s,startPitch:o})):a={bearing:s+n,pitch:o+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomLngLat:s}=this._state;Number.isFinite(i)||(i=this._viewportProps.zoom,s=this._unproject(n)||this._unproject(e));const o=this._calculateNewZoom({scale:r,startZoom:i}),a=this.makeViewport(K(A({},this._viewportProps),{zoom:o}));return this._getUpdatedState(A({zoom:o},a.panByPosition(s,e)))}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this._viewportProps.bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this._viewportProps.bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this._viewportProps.pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this._viewportProps.pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r=A({},this._viewportProps),{bearing:i,longitude:s}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(s-n.longitude)>180&&(r.longitude=s<0?s+360:s-360),r}_zoomFromCenter(e){const{width:n,height:r}=this._viewportProps;return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this._viewportProps;return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor(A(A(A({makeViewport:this.makeViewport},this._viewportProps),this._state),e))}_applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=St(i,r,n);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=St(a,o,s);const{normalize:l=!0}=e;return l&&Object.assign(e,gM(e)),e}_unproject(e){const n=this.makeViewport(this._viewportProps);return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:r,minZoom:i}=this._viewportProps,s=n+Math.log2(e);return St(s,i,r)}_calculateNewPitchAndBearing({deltaScaleX:e,deltaScaleY:n,startBearing:r,startPitch:i}){n=St(n,-1,1);const{minPitch:s,maxPitch:o}=this._viewportProps,a=r+180*e;let l=i;return n>0?l=i+n*(o-i):n<0&&(l=i-n*(s-i)),{pitch:l,bearing:a}}_getRotationParams(e,n){const r=e[0]-n[0],i=e[1]-n[1],s=e[1],o=n[1],{width:a,height:l}=this._viewportProps,u=r/a;let c=0;return i>0?Math.abs(l-o)>T0&&(c=i/(o-l)*SI):i<0&&o>T0&&(c=1-s/o),c=Math.min(1,Math.max(-1,c)),{deltaScaleX:u,deltaScaleY:c}}}class PI extends lE{constructor(e){e.dragMode=e.dragMode||"pan";super(AI,e)}setProps(e){e.position=e.position||[0,0,0];const n=this.controllerStateProps;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState(A(A({makeViewport:this.makeViewport},this.controllerStateProps),this._state)))}get linearTransitionProps(){return["longitude","latitude","zoom","bearing","pitch","position"]}}class cE extends Br{constructor(e){super(K(A({},e),{type:ur}))}get controller(){return this._getControllerProps({type:PI})}}cE.displayName="MapView";class CI extends Ru{constructor(e,n){super(e,n);I(this,"maskMap",void 0),I(this,"fbo",void 0);const{mapSize:r=2048}=n;this.maskMap=new gt(e,{width:r,height:r,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.fbo=new ke(e,{id:"maskmap",width:r,height:r,attachments:{[36064]:this.maskMap}})}render(e){const n=this.gl,r=[!1,!1,!1,!1];return r[e.channel]=!0,Ft(n,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:r,depthTest:!1},()=>super.render(K(A({},e),{target:this.fbo,pass:"mask"})))}shouldDrawLayer(e){return e.props.operation===qo.MASK}delete(){this.fbo.delete(),this.maskMap.delete()}}const Nn={rotationX:0,rotationOrbit:0,zoom:0,target:[0,0,0],minRotationX:-90,maxRotationX:90,minZoom:-1/0,maxZoom:1/0};class OI extends uE{constructor({makeViewport:e,width:n,height:r,rotationX:i=Nn.rotationX,rotationOrbit:s=Nn.rotationOrbit,target:o=Nn.target,zoom:a=Nn.zoom,minRotationX:l=Nn.minRotationX,maxRotationX:u=Nn.maxRotationX,minZoom:c=Nn.minZoom,maxZoom:f=Nn.maxZoom,startPanPosition:h,startRotatePos:g,startRotationX:_,startRotationOrbit:v,startZoomPosition:d,startZoom:p}){super({width:n,height:r,rotationX:i,rotationOrbit:s,target:o,zoom:a,minRotationX:l,maxRotationX:u,minZoom:c,maxZoom:f});this._state={startPanPosition:h,startRotatePos:g,startRotationX:_,startRotationOrbit:v,startZoomPosition:d,startZoom:p},this.makeViewport=e}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:n}){const r=this._state.startPanPosition||n;if(!r)return this;const s=this.makeViewport(this._viewportProps).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startRotationX:s,startRotationOrbit:o}=this._state,{width:a,height:l}=this._viewportProps;if(!i||!Number.isFinite(s)||!Number.isFinite(o))return this;let u;if(e){let c=(e[0]-i[0])/a;const f=(e[1]-i[1])/l;(s<-90||s>90)&&(c*=-1),u={rotationX:s+f*180,rotationOrbit:o+c*180}}else u={rotationX:s+r,rotationOrbit:o+n};return this._getUpdatedState(u)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const n=e.getViewportProps(),r=A({},this._viewportProps),{rotationOrbit:i}=r;return Math.abs(i-n.rotationOrbit)>180&&(r.rotationOrbit=i<0?i+360:i-360),r}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this._viewportProps.zoom})}zoom({pos:e,startPos:n,scale:r}){const{zoom:i}=this._viewportProps;let{startZoom:s,startZoomPosition:o}=this._state;Number.isFinite(s)||(s=i,o=this._unproject(n)||this._unproject(e));const a=this._calculateNewZoom({scale:r,startZoom:s}),l=this.makeViewport(K(A({},this._viewportProps),{zoom:a}));return this._getUpdatedState(A({zoom:a},l.panByPosition(o,e)))}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this._viewportProps.rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this._viewportProps.rotationX+e})}_unproject(e){const n=this.makeViewport(this._viewportProps);return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:r,minZoom:i}=this._viewportProps;Number.isFinite(n)||(n=this._viewportProps.zoom);const s=n+Math.log2(e);return St(s,i,r)}_panFromCenter(e){const{width:n,height:r,target:i}=this._viewportProps;return this.pan({startPosition:i,pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor(A(A(A({},this._viewportProps),this._state),e))}_applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=St(i,r,n),e.rotationX=St(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=XM(a+180,360)-180),e}}class RI extends OI{constructor(e){super(e);I(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;return e.zoom=Array.isArray(i)?[St(i[0],r,n),St(i[1],r,n)]:St(i,r,n),e}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:r,minZoom:i}=this._viewportProps;!n&&n!==0&&(n=this._viewportProps.zoom);let s=Math.log2(e);if(Array.isArray(n)){let[o,a]=n;switch(this.zoomAxis){case"X":o=St(o+s,i,r);break;case"Y":a=St(a+s,i,r);break;default:let l=Math.min(o+s,a+s);l<i&&(s+=i-l),l=Math.max(o+s,a+s),l>r&&(s+=r-l),o+=s,a+=s}return[o,a]}return St(n+s,i,r)}}class MI extends lE{constructor(e){e.dragMode=e.dragMode||"pan";super(RI,e)}_onPanRotate(e){return!1}get linearTransitionProps(){return["target","zoom"]}}const II=new ht().lookAt({eye:[0,0,1]});function LI({width:t,height:e,near:n,far:r}){return t=t||1,e=e||1,new ht().ortho({left:-t/2,right:t/2,bottom:-e/2,top:e/2,near:n,far:r})}class kI extends lr{constructor(e){const{width:n,height:r,near:i=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],flipY:l=!0}=e,u=Array.isArray(o)?o[0]:o,c=Array.isArray(o)?o[1]:o,f=Math.min(u,c),h=Math.pow(2,f);let g;if(u!==c){const _=Math.pow(2,u),v=Math.pow(2,c);g={unitsPerMeter:[_/h,v/h,1],metersPerUnit:[h/_,h/v,1]}}super(K(A({},e),{longitude:null,position:a,viewMatrix:II.clone().scale([h,h*(l?-1:1),h]),projectionMatrix:LI({width:n,height:r,near:i,far:s}),zoom:f,distanceScales:g}))}projectFlat([e,n]){const{unitsPerMeter:r}=this.distanceScales;return[e*r[0],n*r[1]]}unprojectFlat([e,n]){const{metersPerUnit:r}=this.distanceScales;return[e*r[0],n*r[1]]}panByPosition(e,n){const r=Ou(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=Nl([],i,rE([],r)),o=Nl([],this.center,s);return{target:this.unprojectFlat(o)}}}class fE extends Br{constructor(e){super(K(A({},e),{type:kI}))}get controller(){return this._getControllerProps({type:MI})}}fE.displayName="OrthographicView";function NI({layers:t,viewport:e}){let n=null;for(const s of t){const o=s.getBounds();o&&(n?(n[0]=Math.min(n[0],o[0][0]),n[1]=Math.min(n[1],o[0][1]),n[2]=Math.max(n[2],o[1][0]),n[3]=Math.max(n[3],o[1][1])):n=[o[0][0],o[0][1],o[1][0],o[1][1]])}const r=e.getBounds();if(!n)return r;const i=FI(r);return n[2]-n[0]<i[2]-i[0]||n[3]-n[1]<i[3]-i[1]||(n[0]=Math.max(n[0],i[0]),n[1]=Math.max(n[1],i[1]),n[2]=Math.min(n[2],i[2]),n[3]=Math.min(n[3],i[3])),n}function DI({bounds:t,viewport:e,width:n,height:r}){if(t[2]<=t[0]||t[3]<=t[1])return null;const i=1;if(n-=i*2,r-=i*2,e instanceof ur){const{longitude:a,latitude:l,zoom:u}=q1({width:n,height:r,bounds:[[t[0],t[1]],[t[2],t[3]]],maxZoom:20});return new ur({longitude:a,latitude:l,zoom:u,x:i,y:i,width:n,height:r})}const s=[(t[0]+t[2])/2,(t[1]+t[3])/2,0],o=Math.min(20,n/(t[2]-t[0]),r/(t[3]-t[1]));return new fE({x:i,y:i}).makeViewport({width:n,height:r,viewState:{target:s,zoom:Math.log2(o)}})}function FI(t){const e={x:t[2]-t[0],y:t[3]-t[1]},n={x:t[0]+.5*e.x,y:t[1]+.5*e.y};return[n.x-e.x,n.y-e.y,n.x+e.x,n.y+e.y]}class UI extends jd{constructor(e){super(e);this.dummyMaskMap=null,this.useInPicking=!0,this.channels=[],this.masks=null}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o}){this.dummyMaskMap||(this.dummyMaskMap=new gt(e,{width:1,height:1}));const a=n.filter(f=>f.props.operation===qo.MASK&&f.props.visible);if(a.length===0){this.masks=null,this.channels.length=0;return}this.masks={},this.maskPass||(this.maskPass=new CI(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const l=this._sortMaskChannels(a),u=i[0],c=!this.lastViewport||!this.lastViewport.equals(u);for(const f in l)this._renderChannel(l[f],{layerFilter:r,onViewportActive:s,views:o,viewport:u,viewportChanged:c})}_renderChannel(e,{layerFilter:n,onViewportActive:r,views:i,viewport:s,viewportChanged:o}){const a=this.channels[e.index],l=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((u,c)=>u!==a.layerBounds[c]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(l||o)&&(this.lastViewport=s,e.bounds=NI({layers:e.layers,viewport:s}),l||!Bi(e.bounds,a.bounds))){const{maskPass:u,maskMap:c}=this,f=DI({bounds:e.bounds,viewport:s,width:c.width,height:c.height});e.maskBounds=f?f.getBounds():[0,0,1,1],u.render({channel:e.index,layers:e.layers,layerFilter:n,viewports:f?[f]:[],onViewportActive:r,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){const n={};let r=0;for(const i of e){const{id:s}=i.root;let o=n[s];if(!o){if(++r>4){fe.warn("Too many mask layers. The max supported is 4")();continue}o={id:s,index:this.channels.findIndex(a=>(a==null?void 0:a.id)===s),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},n[s]=o}o.layers.push(i),o.layerBounds.push(i.getBounds())}for(let i=0;i<4;i++){const s=this.channels[i];(!s||!(s.id in n))&&(this.channels[i]=null)}for(const i in n){const s=n[i];s.index<0&&(s.index=this.channels.findIndex(o=>!o),this.channels[s.index]=s)}return n}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=null),this.maskPass&&(this.maskPass.delete(),this.maskPass=null,this.maskMap=null),this.lastViewport=null,this.masks=null,this.channels.length=0}}const jI=new nE;class BI{constructor(){I(this,"effects",void 0),I(this,"_internalEffects",void 0),I(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!Ko(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new UI),e.some(n=>n instanceof nE)||this._internalEffects.push(jI)}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}}class zI extends Ru{shouldDrawLayer(e){return e.props.operation===qo.DRAW}}const S0={blendFunc:[1,0,32771,0],blendEquation:32774};class hE extends Ru{constructor(...e){super(...e);I(this,"pickZ",void 0),I(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:l,width:u,height:c},effects:f,pass:h="picking",pickZ:g}){const _=this.gl;this.pickZ=g;const v=g?null:{byLayer:new Map,byAlpha:[]};this._colors=v;const d=Ft(_,K(A({scissorTest:!0,scissor:[a,l,u,c],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},S0),{blend:!g}),()=>super.render({target:o,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,effects:f==null?void 0:f.filter(m=>m.useInPicking),pass:h}));return this._colors=null,{decodePickingColor:v&&$I.bind(null,v),stats:d}}shouldDrawLayer(e){return e.props.pickable&&e.props.operation===qo.DRAW}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,r){const i=A({},e.props.parameters);return this._colors?(Object.assign(i,S0),i.blend=!0,i.blendColor=VI(this._colors,e,r)):i.blend=!1,i}}function VI(t,e,n){const{byLayer:r,byAlpha:i}=t;let s,o=r.get(e);return o?(o.viewports.push(n),s=o.a):(s=r.size+1,s<=255?(o={a:s,layer:e,viewports:[n]},r.set(e,o),i[s]=o):(fe.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function $I(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const GI="deckRenderer.renderLayers";class HI{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new zI(e),this.pickLayersPass=new hE(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||ke.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const r=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,i=n.render(K(A({},e),{target:r}));this._postRender(e.effects,e),this.renderCount++,ot(GI,this,i,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){let r=null;for(const i of e)i.preRender(this.gl,n),i.postRender&&(r=i);r&&this._resizeRenderBuffers(),this.lastPostProcessEffect=r}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new ke(this.gl),new ke(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:r}=this,i={inputBuffer:r[0],swapBuffer:r[1],target:null};for(const s of e)if(s.postRender){if(s===this.lastPostProcessEffect){i.target=n.target,s.postRender(this.gl,i);break}const o=s.postRender(this.gl,i);i.inputBuffer=o,i.swapBuffer=o===r[0]?r[1]:r[0]}}}const WI={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function XI({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:s}){if(t){const{x:o,y:a,width:l,height:u}=s;let c=i*i,f=-1,h=0;for(let g=0;g<u;g++){const _=g+a-r,v=_*_;if(v>c)h+=4*l;else for(let d=0;d<l;d++){if(t[h+3]-1>=0){const m=d+o-n,w=m*m+v;w<=c&&(c=w,f=h)}h+=4}}if(f>=0){const g=t.slice(f,f+4),_=e(g);if(_){const v=Math.floor(f/4/l),d=f/4-v*l;return K(A({},_),{pickedColor:g,pickedX:o+d,pickedY:a+v})}fe.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return WI}function YI({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const s=t.slice(r,r+4),o=s.join(",");if(!n.has(o)){const a=e(s);a?n.set(o,K(A({},a),{pickedColor:s})):fe.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function dE({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:s}){let o=e[0];e.length>1&&(o=qI((t==null?void 0:t.pickedViewports)||e,{x:r,y:i}));const a=o&&o.unproject([r-o.x,i-o.y,s]);return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:null,pixelRatio:n}}function ZI(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if(r==="hover"){const f=n.index,h=n.layerId,g=o&&o.props.id;if(g!==h||a!==f){if(g!==h){const _=i.find(v=>v.props.id===h);_&&l.unshift(_)}n.layerId=g,n.index=a,n.info=null}}const u=dE(t),c=new Map;return c.set(null,u),l.forEach(f=>{let h=A({},u);f===o&&(h.color=s,h.index=a,h.picked=!0),h=pE({layer:f,info:h,mode:r}),f===o&&r==="hover"&&(n.info=h),c.set(h.layer.id,h),r==="hover"&&h.layer.updateAutoHighlight(h)}),c}function pE({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function qI(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class KI{constructor(e){this.gl=e,this.pickingFBO=null,this.pickLayersPass=new hE(e),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:i},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,l=o?r.find(h=>h.id===o):null,u=a&&i.find(h=>h.id===a)||i[0],c=u&&u.unproject([e-u.x,n-u.y]),f={x:e,y:n,viewport:u,coordinate:c,layer:l};return A(A({},s),f)}_resizeBuffer(){const{gl:e}=this;return this.pickingFBO||(this.pickingFBO=new ke(e),ke.isSupported(e,{colorBufferFloat:!0})&&(this.depthFBO=new ke(e),this.depthFBO.attach({[36064]:new gt(e,{format:ae(e)?34836:6408,type:5126})}))),this.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.depthFBO&&this.depthFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.pickingFBO}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>r.isPickable()&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:i,y:s,radius:o=0,depth:a=1,mode:l="query",unproject3D:u,onViewportActive:c,effects:f}){if(e=this._getPickable(e),!e)return{result:[],emptyInfo:dE({viewports:r,x:i,y:s})};this._resizeBuffer();const h=Di(this.gl),g=Ec(this.gl,[i,s],!0),_=[g.x+Math.floor(g.width/2),g.y+Math.floor(g.height/2)],v=Math.round(o*h),{width:d,height:p}=this.pickingFBO,m=this._getPickingRect({deviceX:_[0],deviceY:_[1],deviceRadius:v,deviceWidth:d,deviceHeight:p});let w;const b=[],x=new Set;for(let S=0;S<a;S++){const O=m&&this._drawAndSample({layers:e,views:n,viewports:r,onViewportActive:c,deviceRect:m,effects:f,pass:"picking:".concat(l),redrawReason:l}),R=XI(K(A({},O),{deviceX:_[0],deviceY:_[1],deviceRadius:v,deviceRect:m}));let M;R.pickedLayer&&u&&this.depthFBO&&(M=this._drawAndSample({layers:[R.pickedLayer],views:n,viewports:r,onViewportActive:c,deviceRect:{x:R.pickedX,y:R.pickedY,width:1,height:1},effects:f,pass:"picking:".concat(l),redrawReason:"pick-z",pickZ:!0}).pickedColors[0]),R.pickedLayer&&S+1<a&&(x.add(R.pickedLayer),R.pickedLayer.disablePickingIndex(R.pickedObjectIndex)),w=ZI({pickInfo:R,lastPickedInfo:this.lastPickedInfo,mode:l,layers:e,viewports:r,x:i,y:s,z:M,pixelRatio:h});for(const z of w.values())z.layer&&b.push(z);if(!R.pickedColor)break}for(const S of x)S.restorePickingColors();return{result:b,emptyInfo:w&&w.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:i,y:s,width:o=1,height:a=1,mode:l="query",maxObjects:u=null,onViewportActive:c,effects:f}){if(e=this._getPickable(e),!e)return[];this._resizeBuffer();const h=Di(this.gl),g=Ec(this.gl,[i,s],!0),_=g.x,v=g.y+g.height,d=Ec(this.gl,[i+o,s+a],!0),p=d.x+d.width,m=d.y,w={x:_,y:m,width:p-_,height:v-m},b=this._drawAndSample({layers:e,views:n,viewports:r,onViewportActive:c,deviceRect:w,effects:f,pass:"picking:".concat(l),redrawReason:l}),x=YI(b),S=new Map,O=Number.isFinite(u);for(let R=0;R<x.length&&!(O&&S.size>=u);R++){const M=x[R];let z={color:M.pickedColor,layer:null,index:M.pickedObjectIndex,picked:!0,x:i,y:s,width:o,height:a,pixelRatio:h};z=pE({layer:M.pickedLayer,info:z,mode:l}),S.has(z.object)||S.set(z.object,z)}return Array.from(S.values())}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:s,effects:o,pass:a,redrawReason:l,pickZ:u}){const c=u?this.depthFBO:this.pickingFBO,{decodePickingColor:f}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:c,deviceRect:s,effects:o,pass:a,redrawReason:l,pickZ:u}),{x:h,y:g,width:_,height:v}=s,d=new(u?Float32Array:Uint8Array)(_*v*4);return Pu(c,{sourceX:h,sourceY:g,sourceWidth:_,sourceHeight:v,target:d}),{pickedColors:d,decodePickingColor:f}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:s}){const o=Math.max(0,e-r),a=Math.max(0,n-r),l=Math.min(i,e+r+1)-o,u=Math.min(s,n+r+1)-a;return l<=0||u<=0?null:{x:o,y:a,width:l,height:u}}}const QI={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"};class JI{constructor(e){const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,QI),n.appendChild(this.el)),this.isVisible=!1}setTooltip(e,n,r){const i=this.el;if(typeof e=="string")i.innerText=e;else if(e)"text"in e&&(i.innerText=e.text),"html"in e&&(i.innerHTML=e.html),"className"in e&&(i.className=e.className),Object.assign(i.style,e.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(n,"px, ").concat(r,"px)")}remove(){this.el&&this.el.remove()}}var gE={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,r,i){var s=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),a="function",l=Math.round,u=Math.abs,c=Date.now;function f(y,E,T){return setTimeout(w(y,T),E)}function h(y,E,T){return Array.isArray(y)?(g(y,T[E],T),!0):!1}function g(y,E,T){var P;if(!!y)if(y.forEach)y.forEach(E,T);else if(y.length!==i)for(P=0;P<y.length;)E.call(T,y[P],P,y),P++;else for(P in y)y.hasOwnProperty(P)&&E.call(T,y[P],P,y)}function _(y,E,T){var P="DEPRECATED METHOD: "+E+`
`+T+` AT 
`;return function(){var D=new Error("get-stack-trace"),G=D&&D.stack?D.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",oe=e.console&&(e.console.warn||e.console.log);return oe&&oe.call(e.console,P,G),y.apply(this,arguments)}}var v;typeof Object.assign!="function"?v=function(E){if(E===i||E===null)throw new TypeError("Cannot convert undefined or null to object");for(var T=Object(E),P=1;P<arguments.length;P++){var D=arguments[P];if(D!==i&&D!==null)for(var G in D)D.hasOwnProperty(G)&&(T[G]=D[G])}return T}:v=Object.assign;var d=_(function(E,T,P){for(var D=Object.keys(T),G=0;G<D.length;)(!P||P&&E[D[G]]===i)&&(E[D[G]]=T[D[G]]),G++;return E},"extend","Use `assign`."),p=_(function(E,T){return d(E,T,!0)},"merge","Use `assign`.");function m(y,E,T){var P=E.prototype,D;D=y.prototype=Object.create(P),D.constructor=y,D._super=P,T&&v(D,T)}function w(y,E){return function(){return y.apply(E,arguments)}}function b(y,E){return typeof y==a?y.apply(E&&E[0]||i,E):y}function x(y,E){return y===i?E:y}function S(y,E,T){g(z(E),function(P){y.addEventListener(P,T,!1)})}function O(y,E,T){g(z(E),function(P){y.removeEventListener(P,T,!1)})}function R(y,E){for(;y;){if(y==E)return!0;y=y.parentNode}return!1}function M(y,E){return y.indexOf(E)>-1}function z(y){return y.trim().split(/\s+/g)}function Q(y,E,T){if(y.indexOf&&!T)return y.indexOf(E);for(var P=0;P<y.length;){if(T&&y[P][T]==E||!T&&y[P]===E)return P;P++}return-1}function W(y){return Array.prototype.slice.call(y,0)}function q(y,E,T){for(var P=[],D=[],G=0;G<y.length;){var oe=E?y[G][E]:y[G];Q(D,oe)<0&&P.push(y[G]),D[G]=oe,G++}return T&&(E?P=P.sort(function(We,st){return We[E]>st[E]}):P=P.sort()),P}function $(y,E){for(var T,P,D=E[0].toUpperCase()+E.slice(1),G=0;G<s.length;){if(T=s[G],P=T?T+D:E,P in y)return P;G++}return i}var ce=1;function mt(){return ce++}function je(y){var E=y.ownerDocument||y;return E.defaultView||E.parentWindow||e}var Be=/mobile|tablet|ip(ad|hone|od)|android/i,Mt="ontouchstart"in e,Kt=$(e,"PointerEvent")!==i,B=Mt&&Be.test(navigator.userAgent),k="touch",N="pen",j="mouse",X="kinect",C=25,Z=1,F=2,J=4,re=8,le=1,ee=2,xe=4,Ie=8,ie=16,pe=ee|xe,se=Ie|ie,Le=pe|se,Rn=["x","y"],Pe=["clientX","clientY"];function He(y,E){var T=this;this.manager=y,this.callback=E,this.element=y.element,this.target=y.options.inputTarget,this.domHandler=function(P){b(y.options.enable,[y])&&T.handler(P)},this.init()}He.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(je(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&O(this.element,this.evEl,this.domHandler),this.evTarget&&O(this.target,this.evTarget,this.domHandler),this.evWin&&O(je(this.element),this.evWin,this.domHandler)}};function mr(y){var E,T=y.options.inputClass;return T?E=T:Kt?E=Lu:B?E=ra:Mt?E=ku:E=na,new E(y,yt)}function yt(y,E,T){var P=T.pointers.length,D=T.changedPointers.length,G=E&Z&&P-D===0,oe=E&(J|re)&&P-D===0;T.isFirst=!!G,T.isFinal=!!oe,G&&(y.session={}),T.eventType=E,te(y,T),y.emit("hammer.input",T),y.recognize(T),y.session.prevInput=T}function te(y,E){var T=y.session,P=E.pointers,D=P.length;T.firstInput||(T.firstInput=Yr(E)),D>1&&!T.firstMultiple?T.firstMultiple=Yr(E):D===1&&(T.firstMultiple=!1);var G=T.firstInput,oe=T.firstMultiple,ze=oe?oe.center:G.center,We=E.center=zt(P);E.timeStamp=c(),E.deltaTime=E.timeStamp-G.timeStamp,E.angle=Iu(ze,We),E.distance=ta(ze,We),Ae(T,E),E.offsetDirection=ep(E.deltaX,E.deltaY);var st=Jd(E.deltaTime,E.deltaX,E.deltaY);E.overallVelocityX=st.x,E.overallVelocityY=st.y,E.overallVelocity=u(st.x)>u(st.y)?st.x:st.y,E.scale=oe?qE(oe.pointers,P):1,E.rotation=oe?ZE(oe.pointers,P):0,E.maxPointers=T.prevInput?E.pointers.length>T.prevInput.maxPointers?E.pointers.length:T.prevInput.maxPointers:E.pointers.length,ns(T,E);var Jt=y.element;R(E.srcEvent.target,Jt)&&(Jt=E.srcEvent.target),E.target=Jt}function Ae(y,E){var T=E.center,P=y.offsetDelta||{},D=y.prevDelta||{},G=y.prevInput||{};(E.eventType===Z||G.eventType===J)&&(D=y.prevDelta={x:G.deltaX||0,y:G.deltaY||0},P=y.offsetDelta={x:T.x,y:T.y}),E.deltaX=D.x+(T.x-P.x),E.deltaY=D.y+(T.y-P.y)}function ns(y,E){var T=y.lastInterval||E,P=E.timeStamp-T.timeStamp,D,G,oe,ze;if(E.eventType!=re&&(P>C||T.velocity===i)){var We=E.deltaX-T.deltaX,st=E.deltaY-T.deltaY,Jt=Jd(P,We,st);G=Jt.x,oe=Jt.y,D=u(Jt.x)>u(Jt.y)?Jt.x:Jt.y,ze=ep(We,st),y.lastInterval=E}else D=T.velocity,G=T.velocityX,oe=T.velocityY,ze=T.direction;E.velocity=D,E.velocityX=G,E.velocityY=oe,E.direction=ze}function Yr(y){for(var E=[],T=0;T<y.pointers.length;)E[T]={clientX:l(y.pointers[T].clientX),clientY:l(y.pointers[T].clientY)},T++;return{timeStamp:c(),pointers:E,center:zt(E),deltaX:y.deltaX,deltaY:y.deltaY}}function zt(y){var E=y.length;if(E===1)return{x:l(y[0].clientX),y:l(y[0].clientY)};for(var T=0,P=0,D=0;D<E;)T+=y[D].clientX,P+=y[D].clientY,D++;return{x:l(T/E),y:l(P/E)}}function Jd(y,E,T){return{x:E/y||0,y:T/y||0}}function ep(y,E){return y===E?le:u(y)>=u(E)?y<0?ee:xe:E<0?Ie:ie}function ta(y,E,T){T||(T=Rn);var P=E[T[0]]-y[T[0]],D=E[T[1]]-y[T[1]];return Math.sqrt(P*P+D*D)}function Iu(y,E,T){T||(T=Rn);var P=E[T[0]]-y[T[0]],D=E[T[1]]-y[T[1]];return Math.atan2(D,P)*180/Math.PI}function ZE(y,E){return Iu(E[1],E[0],Pe)+Iu(y[1],y[0],Pe)}function qE(y,E){return ta(E[0],E[1],Pe)/ta(y[0],y[1],Pe)}var KE={mousedown:Z,mousemove:F,mouseup:J},QE="mousedown",JE="mousemove mouseup";function na(){this.evEl=QE,this.evWin=JE,this.pressed=!1,He.apply(this,arguments)}m(na,He,{handler:function(E){var T=KE[E.type];T&Z&&E.button===0&&(this.pressed=!0),T&F&&E.which!==1&&(T=J),this.pressed&&(T&J&&(this.pressed=!1),this.callback(this.manager,T,{pointers:[E],changedPointers:[E],pointerType:j,srcEvent:E}))}});var ew={pointerdown:Z,pointermove:F,pointerup:J,pointercancel:re,pointerout:re},tw={2:k,3:N,4:j,5:X},tp="pointerdown",np="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(tp="MSPointerDown",np="MSPointerMove MSPointerUp MSPointerCancel");function Lu(){this.evEl=tp,this.evWin=np,He.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}m(Lu,He,{handler:function(E){var T=this.store,P=!1,D=E.type.toLowerCase().replace("ms",""),G=ew[D],oe=tw[E.pointerType]||E.pointerType,ze=oe==k,We=Q(T,E.pointerId,"pointerId");G&Z&&(E.button===0||ze)?We<0&&(T.push(E),We=T.length-1):G&(J|re)&&(P=!0),!(We<0)&&(T[We]=E,this.callback(this.manager,G,{pointers:T,changedPointers:[E],pointerType:oe,srcEvent:E}),P&&T.splice(We,1))}});var nw={touchstart:Z,touchmove:F,touchend:J,touchcancel:re},rw="touchstart",iw="touchstart touchmove touchend touchcancel";function rp(){this.evTarget=rw,this.evWin=iw,this.started=!1,He.apply(this,arguments)}m(rp,He,{handler:function(E){var T=nw[E.type];if(T===Z&&(this.started=!0),!!this.started){var P=sw.call(this,E,T);T&(J|re)&&P[0].length-P[1].length===0&&(this.started=!1),this.callback(this.manager,T,{pointers:P[0],changedPointers:P[1],pointerType:k,srcEvent:E})}}});function sw(y,E){var T=W(y.touches),P=W(y.changedTouches);return E&(J|re)&&(T=q(T.concat(P),"identifier",!0)),[T,P]}var ow={touchstart:Z,touchmove:F,touchend:J,touchcancel:re},aw="touchstart touchmove touchend touchcancel";function ra(){this.evTarget=aw,this.targetIds={},He.apply(this,arguments)}m(ra,He,{handler:function(E){var T=ow[E.type],P=lw.call(this,E,T);!P||this.callback(this.manager,T,{pointers:P[0],changedPointers:P[1],pointerType:k,srcEvent:E})}});function lw(y,E){var T=W(y.touches),P=this.targetIds;if(E&(Z|F)&&T.length===1)return P[T[0].identifier]=!0,[T,T];var D,G,oe=W(y.changedTouches),ze=[],We=this.target;if(G=T.filter(function(st){return R(st.target,We)}),E===Z)for(D=0;D<G.length;)P[G[D].identifier]=!0,D++;for(D=0;D<oe.length;)P[oe[D].identifier]&&ze.push(oe[D]),E&(J|re)&&delete P[oe[D].identifier],D++;if(!!ze.length)return[q(G.concat(ze),"identifier",!0),ze]}var uw=2500,ip=25;function ku(){He.apply(this,arguments);var y=w(this.handler,this);this.touch=new ra(this.manager,y),this.mouse=new na(this.manager,y),this.primaryTouch=null,this.lastTouches=[]}m(ku,He,{handler:function(E,T,P){var D=P.pointerType==k,G=P.pointerType==j;if(!(G&&P.sourceCapabilities&&P.sourceCapabilities.firesTouchEvents)){if(D)cw.call(this,T,P);else if(G&&fw.call(this,P))return;this.callback(E,T,P)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function cw(y,E){y&Z?(this.primaryTouch=E.changedPointers[0].identifier,sp.call(this,E)):y&(J|re)&&sp.call(this,E)}function sp(y){var E=y.changedPointers[0];if(E.identifier===this.primaryTouch){var T={x:E.clientX,y:E.clientY};this.lastTouches.push(T);var P=this.lastTouches,D=function(){var G=P.indexOf(T);G>-1&&P.splice(G,1)};setTimeout(D,uw)}}function fw(y){for(var E=y.srcEvent.clientX,T=y.srcEvent.clientY,P=0;P<this.lastTouches.length;P++){var D=this.lastTouches[P],G=Math.abs(E-D.x),oe=Math.abs(T-D.y);if(G<=ip&&oe<=ip)return!0}return!1}var op=$(o.style,"touchAction"),ap=op!==i,lp="compute",up="auto",Nu="manipulation",yr="none",rs="pan-x",is="pan-y",ia=dw();function Du(y,E){this.manager=y,this.set(E)}Du.prototype={set:function(y){y==lp&&(y=this.compute()),ap&&this.manager.element.style&&ia[y]&&(this.manager.element.style[op]=y),this.actions=y.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var y=[];return g(this.manager.recognizers,function(E){b(E.options.enable,[E])&&(y=y.concat(E.getTouchAction()))}),hw(y.join(" "))},preventDefaults:function(y){var E=y.srcEvent,T=y.offsetDirection;if(this.manager.session.prevented){E.preventDefault();return}var P=this.actions,D=M(P,yr)&&!ia[yr],G=M(P,is)&&!ia[is],oe=M(P,rs)&&!ia[rs];if(D){var ze=y.pointers.length===1,We=y.distance<2,st=y.deltaTime<250;if(ze&&We&&st)return}if(!(oe&&G)&&(D||G&&T&pe||oe&&T&se))return this.preventSrc(E)},preventSrc:function(y){this.manager.session.prevented=!0,y.preventDefault()}};function hw(y){if(M(y,yr))return yr;var E=M(y,rs),T=M(y,is);return E&&T?yr:E||T?E?rs:is:M(y,Nu)?Nu:up}function dw(){if(!ap)return!1;var y={},E=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(T){y[T]=E?e.CSS.supports("touch-action",T):!0}),y}var sa=1,It=2,Zr=4,Mn=8,dn=Mn,ss=16,Qt=32;function pn(y){this.options=v({},this.defaults,y||{}),this.id=mt(),this.manager=null,this.options.enable=x(this.options.enable,!0),this.state=sa,this.simultaneous={},this.requireFail=[]}pn.prototype={defaults:{},set:function(y){return v(this.options,y),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(y){if(h(y,"recognizeWith",this))return this;var E=this.simultaneous;return y=oa(y,this),E[y.id]||(E[y.id]=y,y.recognizeWith(this)),this},dropRecognizeWith:function(y){return h(y,"dropRecognizeWith",this)?this:(y=oa(y,this),delete this.simultaneous[y.id],this)},requireFailure:function(y){if(h(y,"requireFailure",this))return this;var E=this.requireFail;return y=oa(y,this),Q(E,y)===-1&&(E.push(y),y.requireFailure(this)),this},dropRequireFailure:function(y){if(h(y,"dropRequireFailure",this))return this;y=oa(y,this);var E=Q(this.requireFail,y);return E>-1&&this.requireFail.splice(E,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(y){return!!this.simultaneous[y.id]},emit:function(y){var E=this,T=this.state;function P(D){E.manager.emit(D,y)}T<Mn&&P(E.options.event+cp(T)),P(E.options.event),y.additionalEvent&&P(y.additionalEvent),T>=Mn&&P(E.options.event+cp(T))},tryEmit:function(y){if(this.canEmit())return this.emit(y);this.state=Qt},canEmit:function(){for(var y=0;y<this.requireFail.length;){if(!(this.requireFail[y].state&(Qt|sa)))return!1;y++}return!0},recognize:function(y){var E=v({},y);if(!b(this.options.enable,[this,E])){this.reset(),this.state=Qt;return}this.state&(dn|ss|Qt)&&(this.state=sa),this.state=this.process(E),this.state&(It|Zr|Mn|ss)&&this.tryEmit(E)},process:function(y){},getTouchAction:function(){},reset:function(){}};function cp(y){return y&ss?"cancel":y&Mn?"end":y&Zr?"move":y&It?"start":""}function fp(y){return y==ie?"down":y==Ie?"up":y==ee?"left":y==xe?"right":""}function oa(y,E){var T=E.manager;return T?T.get(y):y}function Vt(){pn.apply(this,arguments)}m(Vt,pn,{defaults:{pointers:1},attrTest:function(y){var E=this.options.pointers;return E===0||y.pointers.length===E},process:function(y){var E=this.state,T=y.eventType,P=E&(It|Zr),D=this.attrTest(y);return P&&(T&re||!D)?E|ss:P||D?T&J?E|Mn:E&It?E|Zr:It:Qt}});function aa(){Vt.apply(this,arguments),this.pX=null,this.pY=null}m(aa,Vt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Le},getTouchAction:function(){var y=this.options.direction,E=[];return y&pe&&E.push(is),y&se&&E.push(rs),E},directionTest:function(y){var E=this.options,T=!0,P=y.distance,D=y.direction,G=y.deltaX,oe=y.deltaY;return D&E.direction||(E.direction&pe?(D=G===0?le:G<0?ee:xe,T=G!=this.pX,P=Math.abs(y.deltaX)):(D=oe===0?le:oe<0?Ie:ie,T=oe!=this.pY,P=Math.abs(y.deltaY))),y.direction=D,T&&P>E.threshold&&D&E.direction},attrTest:function(y){return Vt.prototype.attrTest.call(this,y)&&(this.state&It||!(this.state&It)&&this.directionTest(y))},emit:function(y){this.pX=y.deltaX,this.pY=y.deltaY;var E=fp(y.direction);E&&(y.additionalEvent=this.options.event+E),this._super.emit.call(this,y)}});function Fu(){Vt.apply(this,arguments)}m(Fu,Vt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[yr]},attrTest:function(y){return this._super.attrTest.call(this,y)&&(Math.abs(y.scale-1)>this.options.threshold||this.state&It)},emit:function(y){if(y.scale!==1){var E=y.scale<1?"in":"out";y.additionalEvent=this.options.event+E}this._super.emit.call(this,y)}});function Uu(){pn.apply(this,arguments),this._timer=null,this._input=null}m(Uu,pn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[up]},process:function(y){var E=this.options,T=y.pointers.length===E.pointers,P=y.distance<E.threshold,D=y.deltaTime>E.time;if(this._input=y,!P||!T||y.eventType&(J|re)&&!D)this.reset();else if(y.eventType&Z)this.reset(),this._timer=f(function(){this.state=dn,this.tryEmit()},E.time,this);else if(y.eventType&J)return dn;return Qt},reset:function(){clearTimeout(this._timer)},emit:function(y){this.state===dn&&(y&&y.eventType&J?this.manager.emit(this.options.event+"up",y):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function ju(){Vt.apply(this,arguments)}m(ju,Vt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[yr]},attrTest:function(y){return this._super.attrTest.call(this,y)&&(Math.abs(y.rotation)>this.options.threshold||this.state&It)}});function Bu(){Vt.apply(this,arguments)}m(Bu,Vt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:pe|se,pointers:1},getTouchAction:function(){return aa.prototype.getTouchAction.call(this)},attrTest:function(y){var E=this.options.direction,T;return E&(pe|se)?T=y.overallVelocity:E&pe?T=y.overallVelocityX:E&se&&(T=y.overallVelocityY),this._super.attrTest.call(this,y)&&E&y.offsetDirection&&y.distance>this.options.threshold&&y.maxPointers==this.options.pointers&&u(T)>this.options.velocity&&y.eventType&J},emit:function(y){var E=fp(y.offsetDirection);E&&this.manager.emit(this.options.event+E,y),this.manager.emit(this.options.event,y)}});function la(){pn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}m(la,pn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Nu]},process:function(y){var E=this.options,T=y.pointers.length===E.pointers,P=y.distance<E.threshold,D=y.deltaTime<E.time;if(this.reset(),y.eventType&Z&&this.count===0)return this.failTimeout();if(P&&D&&T){if(y.eventType!=J)return this.failTimeout();var G=this.pTime?y.timeStamp-this.pTime<E.interval:!0,oe=!this.pCenter||ta(this.pCenter,y.center)<E.posThreshold;this.pTime=y.timeStamp,this.pCenter=y.center,!oe||!G?this.count=1:this.count+=1,this._input=y;var ze=this.count%E.taps;if(ze===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=dn,this.tryEmit()},E.interval,this),It):dn}return Qt},failTimeout:function(){return this._timer=f(function(){this.state=Qt},this.options.interval,this),Qt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==dn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function gn(y,E){return E=E||{},E.recognizers=x(E.recognizers,gn.defaults.preset),new zu(y,E)}gn.VERSION="2.0.7",gn.defaults={domEvents:!1,touchAction:lp,enable:!0,inputTarget:null,inputClass:null,preset:[[ju,{enable:!1}],[Fu,{enable:!1},["rotate"]],[Bu,{direction:pe}],[aa,{direction:pe},["swipe"]],[la],[la,{event:"doubletap",taps:2},["tap"]],[Uu]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var pw=1,hp=2;function zu(y,E){this.options=v({},gn.defaults,E||{}),this.options.inputTarget=this.options.inputTarget||y,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=y,this.input=mr(this),this.touchAction=new Du(this,this.options.touchAction),dp(this,!0),g(this.options.recognizers,function(T){var P=this.add(new T[0](T[1]));T[2]&&P.recognizeWith(T[2]),T[3]&&P.requireFailure(T[3])},this)}zu.prototype={set:function(y){return v(this.options,y),y.touchAction&&this.touchAction.update(),y.inputTarget&&(this.input.destroy(),this.input.target=y.inputTarget,this.input.init()),this},stop:function(y){this.session.stopped=y?hp:pw},recognize:function(y){var E=this.session;if(!E.stopped){this.touchAction.preventDefaults(y);var T,P=this.recognizers,D=E.curRecognizer;(!D||D&&D.state&dn)&&(D=E.curRecognizer=null);for(var G=0;G<P.length;)T=P[G],E.stopped!==hp&&(!D||T==D||T.canRecognizeWith(D))?T.recognize(y):T.reset(),!D&&T.state&(It|Zr|Mn)&&(D=E.curRecognizer=T),G++}},get:function(y){if(y instanceof pn)return y;for(var E=this.recognizers,T=0;T<E.length;T++)if(E[T].options.event==y)return E[T];return null},add:function(y){if(h(y,"add",this))return this;var E=this.get(y.options.event);return E&&this.remove(E),this.recognizers.push(y),y.manager=this,this.touchAction.update(),y},remove:function(y){if(h(y,"remove",this))return this;if(y=this.get(y),y){var E=this.recognizers,T=Q(E,y);T!==-1&&(E.splice(T,1),this.touchAction.update())}return this},on:function(y,E){if(y!==i&&E!==i){var T=this.handlers;return g(z(y),function(P){T[P]=T[P]||[],T[P].push(E)}),this}},off:function(y,E){if(y!==i){var T=this.handlers;return g(z(y),function(P){E?T[P]&&T[P].splice(Q(T[P],E),1):delete T[P]}),this}},emit:function(y,E){this.options.domEvents&&gw(y,E);var T=this.handlers[y]&&this.handlers[y].slice();if(!(!T||!T.length)){E.type=y,E.preventDefault=function(){E.srcEvent.preventDefault()};for(var P=0;P<T.length;)T[P](E),P++}},destroy:function(){this.element&&dp(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function dp(y,E){var T=y.element;if(!!T.style){var P;g(y.options.cssProps,function(D,G){P=$(T.style,G),E?(y.oldCssProps[P]=T.style[P],T.style[P]=D):T.style[P]=y.oldCssProps[P]||""}),E||(y.oldCssProps={})}}function gw(y,E){var T=n.createEvent("Event");T.initEvent(y,!0,!0),T.gesture=E,E.target.dispatchEvent(T)}v(gn,{INPUT_START:Z,INPUT_MOVE:F,INPUT_END:J,INPUT_CANCEL:re,STATE_POSSIBLE:sa,STATE_BEGAN:It,STATE_CHANGED:Zr,STATE_ENDED:Mn,STATE_RECOGNIZED:dn,STATE_CANCELLED:ss,STATE_FAILED:Qt,DIRECTION_NONE:le,DIRECTION_LEFT:ee,DIRECTION_RIGHT:xe,DIRECTION_UP:Ie,DIRECTION_DOWN:ie,DIRECTION_HORIZONTAL:pe,DIRECTION_VERTICAL:se,DIRECTION_ALL:Le,Manager:zu,Input:He,TouchAction:Du,TouchInput:ra,MouseInput:na,PointerEventInput:Lu,TouchMouseInput:ku,SingleTouchInput:rp,Recognizer:pn,AttrRecognizer:Vt,Tap:la,Pan:aa,Swipe:Bu,Pinch:Fu,Rotate:ju,Press:Uu,on:S,off:O,each:g,merge:p,extend:d,assign:v,inherit:m,bindFn:w,prefixed:$});var mw=typeof e!="undefined"?e:typeof self!="undefined"?self:{};mw.Hammer=gn,typeof i=="function"&&i.amd?i(function(){return gn}):t.exports?t.exports=gn:e[r]=gn})(window,document,"Hammer")})(gE);var Et=gE.exports;const mE=1,yE=2,nh=4,eL={mousedown:mE,mousemove:yE,mouseup:nh};function tL(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function nL(t){const e=t.prototype.handler;t.prototype.handler=function(r){const i=this.store;r.button>0&&r.type==="pointerdown"&&(tL(i,s=>s.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function rL(t){t.prototype.handler=function(n){let r=eL[n.type];r&mE&&n.button>=0&&(this.pressed=!0),r&yE&&n.which===0&&(r=nh),this.pressed&&(r&nh&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}nL(Et.PointerEventInput);rL(Et.MouseInput);const iL=Et.Manager,sL=Et?[[Et.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Et.Rotate,{enable:!1}],[Et.Pinch,{enable:!1}],[Et.Swipe,{enable:!1}],[Et.Pan,{threshold:0,enable:!1}],[Et.Press,{enable:!1}],[Et.Tap,{event:"doubletap",taps:2,enable:!1}],[Et.Tap,{event:"anytap",enable:!1}],[Et.Tap,{enable:!1}]]:null,x0={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},oL={doubletap:["tap"]},aL={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Bd={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},lL={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},A0={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},uL=typeof navigator!="undefined"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",mi=typeof window!="undefined"?window:global;let _E=!1;try{const t={get passive(){return _E=!0,!0}};mi.addEventListener("test",t,t),mi.removeEventListener("test",t,t)}catch{}const cL=uL.indexOf("firefox")!==-1,{WHEEL_EVENTS:fL}=Bd,P0="wheel",C0=4.000244140625,hL=40,dL=.25;class pL{constructor(e,n,r={}){this.element=e,this.callback=n,this.options=Object.assign({enable:!0},r),this.events=fL.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,_E?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===P0&&(this.options.enable=n)}handleEvent(e){if(!this.options.enable)return;let n=e.deltaY;mi.WheelEvent&&(cL&&e.deltaMode===mi.WheelEvent.DOM_DELTA_PIXEL&&(n/=mi.devicePixelRatio),e.deltaMode===mi.WheelEvent.DOM_DELTA_LINE&&(n*=hL));const r={x:e.clientX,y:e.clientY};n!==0&&n%C0===0&&(n=Math.floor(n/C0)),e.shiftKey&&n&&(n=n*dL),this._onWheel(e,-n,r)}_onWheel(e,n,r){this.callback({type:P0,center:r,delta:n,srcEvent:e,pointerType:"mouse",target:e.target})}}const{MOUSE_EVENTS:gL}=Bd,O0="pointermove",R0="pointerover",M0="pointerout",I0="pointerleave";class mL{constructor(e,n,r={}){this.element=e,this.callback=n,this.pressed=!1,this.options=Object.assign({enable:!0},r),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=gL.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===O0&&(this.enableMoveEvent=n),e===R0&&(this.enableOverEvent=n),e===M0&&(this.enableOutEvent=n),e===I0&&(this.enableLeaveEvent=n)}handleEvent(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this.callback({type:R0,srcEvent:e,pointerType:"mouse",target:e.target})}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this.callback({type:M0,srcEvent:e,pointerType:"mouse",target:e.target})}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this.callback({type:I0,srcEvent:e,pointerType:"mouse",target:e.target})}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this.callback({type:O0,srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1;break}}}const{KEY_EVENTS:yL}=Bd,L0="keydown",k0="keyup";class _L{constructor(e,n,r={}){this.element=e,this.callback=n,this.options=Object.assign({enable:!0},r),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=yL.concat(r.events||[]),this.handleEvent=this.handleEvent.bind(this),e.tabIndex=r.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===L0&&(this.enableDownEvent=n),e===k0&&(this.enableUpEvent=n)}handleEvent(e){const n=e.target||e.srcElement;n.tagName==="INPUT"&&n.type==="text"||n.tagName==="TEXTAREA"||(this.enableDownEvent&&e.type==="keydown"&&this.callback({type:L0,srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&e.type==="keyup"&&this.callback({type:k0,srcEvent:e,key:e.key,target:e.target}))}}const N0="contextmenu";class vL{constructor(e,n,r={}){this.element=e,this.callback=n,this.options=Object.assign({enable:!0},r),this.handleEvent=this.handleEvent.bind(this),e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===N0&&(this.options.enable=n)}handleEvent(e){!this.options.enable||this.callback({type:N0,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}const rh=1,Ul=2,ih=4,EL={pointerdown:rh,pointermove:Ul,pointerup:ih,mousedown:rh,mousemove:Ul,mouseup:ih},wL=1,bL=2,TL=3,SL=0,xL=1,AL=2,PL=1,CL=2,OL=4;function RL(t){const e=EL[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let s=!1,o=!1,a=!1;return e===ih||e===Ul&&!Number.isFinite(n)?(s=i===wL,o=i===bL,a=i===TL):e===Ul?(s=Boolean(n&PL),o=Boolean(n&OL),a=Boolean(n&CL)):e===rh&&(s=r===SL,o=r===xL,a=r===AL),{leftButton:s,middleButton:o,rightButton:a}}function ML(t,e){const{srcEvent:n}=t;if(!t.center&&!Number.isFinite(n.clientX))return null;const r=t.center||{x:n.clientX,y:n.clientY},i=e.getBoundingClientRect(),s=i.width/e.offsetWidth||1,o=i.height/e.offsetHeight||1,a={x:(r.x-i.left-e.clientLeft)/s,y:(r.y-i.top-e.clientTop)/o};return{center:r,offsetCenter:a}}const D0={srcElement:"root",priority:0};class IL{constructor(e){this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}isEmpty(){return!this._active}add(e,n,r,i=!1,s=!1){const{handlers:o,handlersByElement:a}=this;r&&(typeof r!="object"||r.addEventListener)&&(r={srcElement:r}),r=r?Object.assign({},D0,r):D0;let l=a.get(r.srcElement);l||(l=[],a.set(r.srcElement,l));const u={type:e,handler:n,srcElement:r.srcElement,priority:r.priority};i&&(u.once=!0),s&&(u.passive=!0),o.push(u),this._active=this._active||!u.passive;let c=l.length-1;for(;c>=0&&!(l[c].priority>=u.priority);)c--;l.splice(c+1,0,u)}remove(e,n){const{handlers:r,handlersByElement:i}=this;for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.type===e&&o.handler===n){r.splice(s,1);const a=i.get(o.srcElement);a.splice(a.indexOf(o),1),a.length===0&&i.delete(o.srcElement)}}this._active=r.some(s=>!s.passive)}handleEvent(e){if(this.isEmpty())return;const n=this._normalizeEvent(e);let r=e.srcEvent.target;for(;r&&r!==n.rootElement;){if(this._emit(n,r),n.handled)return;r=r.parentNode}this._emit(n,"root")}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let i=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,i=!0},a=[];for(let l=0;l<r.length;l++){const{type:u,handler:c,once:f}=r[l];if(c(Object.assign({},e,{type:u,stopPropagation:s,stopImmediatePropagation:o})),f&&a.push(r[l]),i)break}for(let l=0;l<a.length;l++){const{type:u,handler:c}=a[l];this.remove(u,c)}}}_normalizeEvent(e){const n=this.eventManager.element;return Object.assign({},e,RL(e),ML(e,n),{handled:!1,rootElement:n})}}const LL={events:null,recognizers:null,recognizerOptions:{},Manager:iL,touchAction:"none",tabIndex:0};class kL{constructor(e=null,n={}){this.options=Object.assign({},LL,n),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(e);const{events:r}=n;r&&this.on(r)}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||sL}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(x0).forEach(i=>{const s=this.manager.get(i);s&&x0[i].forEach(o=>{s.recognizeWith(o)})});for(const i in n.recognizerOptions){const s=this.manager.get(i);if(s){const o=n.recognizerOptions[i];delete o.enable,s.set(o)}}this.wheelInput=new pL(e,this._onOtherEvent,{enable:!1}),this.moveInput=new mL(e,this._onOtherEvent,{enable:!1}),this.keyInput=new _L(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new vL(e,this._onOtherEvent,{enable:!1});for(const[i,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(i,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==n){i.set({enable:n});const s=oL[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=r.get(o);n?(a.requireFailure(e),i.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,i,s){if(typeof e!="string"){r=n;for(const c in e)this._addEventHandler(c,e[c],r,i,s);return}const{manager:o,events:a}=this,l=A0[e]||e;let u=a.get(l);u||(u=new IL(this),a.set(l,u),u.recognizerName=lL[l]||l,o&&o.on(l,u.handleEvent)),u.add(e,n,r,i,s),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:r}=this,i=A0[e]||e,s=r.get(i);if(!!s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const l of r.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}_onBasicInput(e){const{srcEvent:n}=e,r=aL[n.type];r&&this.manager.emit(r,e)}_onOtherEvent(e){this.manager.emit(e.type,e)}}function vr(){}const NL=({isDragging:t})=>t?"grabbing":"grab";function DL(t){return{id:t.string,width:t.oneOfType([t.number,t.string]),height:t.oneOfType([t.number,t.string]),layers:t.oneOfType([t.object,t.array]),layerFilter:t.func,views:t.oneOfType([t.object,t.array]),viewState:t.object,effects:t.arrayOf(t.instanceOf(jd)),controller:t.oneOfType([t.func,t.bool,t.object]),gl:t.object,glOptions:t.object,parameters:t.object,pickingRadius:t.number,useDevicePixels:t.oneOfType([t.bool,t.number]),touchAction:t.string,eventRecognizerOptions:t.object,onWebGLInitialized:t.func,onResize:t.func,onViewStateChange:t.func,onInteractionStateChange:t.func,onBeforeRender:t.func,onAfterRender:t.func,onLoad:t.func,onError:t.func,debug:t.bool,drawPickingColors:t.bool,_framebuffer:t.object,_animate:t.bool,_pickable:t.bool,_typedArrayManagerProps:t.object}}const vE={id:"",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},onWebGLInitialized:vr,onResize:vr,onViewStateChange:vr,onInteractionStateChange:vr,onBeforeRender:vr,onAfterRender:vr,onLoad:vr,onError:(t,e)=>fe.error(t)(),_onMetrics:null,getCursor:NL,debug:!1,drawPickingColors:!1};class es{constructor(e){e=A(A({},vE),e),this.props={},this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=null,this.interactiveState={isHovering:!1,isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),e.viewState&&e.initialViewState&&fe.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),wd()==="IE"&&fe.warn("IE 11 support will be deprecated in v8.0")(),e.gl||typeof document!="undefined"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new _d({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&_o.setProps(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null,this.viewManager.finalize(),this.viewManager=null,this.effectManager.finalize(),this.effectManager=null,this.deckRenderer.finalize(),this.deckRenderer=null,this.deckPicker.finalize(),this.deckPicker=null,this.eventManager.destroy(),this.eventManager=null,this.tooltip.remove(),this.tooltip=null),!this.props.canvas&&!this.props.gl&&this.canvas&&(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&fe.removed("onLayerHover","onHover")(),"onLayerClick"in e&&fe.removed("onLayerClick","onClick")(),e.initialViewState&&!Ko(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||r||i||s||o,n}redraw(e){if(!this.layerManager)return;const n=e||this.needsRedraw({clearRedrawFlags:!0});!n||(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}getViews(){return this.viewManager.views}getViewports(e){return this.viewManager.getViewports(e)}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_pick(e,n,r){const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(n).timeStart();const s=this.deckPicker[e](A({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects()},r));return i.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),Zt(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;let{width:n,height:r}=e;(n||n===0)&&(n=Number.isFinite(n)?"".concat(n,"px"):n,this.canvas.style.width=n),(r||r===0)&&(r=Number.isFinite(r)?"".concat(r,"px"):r,this.canvas.style.position="absolute",this.canvas.style.height=r)}_updateCanvasSize(){if(this._checkForCanvasSizeChange()){const{width:e,height:n}=this;this.viewManager.setProps({width:e,height:n}),this.props.onResize({width:this.width,height:this.height})}}_checkForCanvasSizeChange(){const{canvas:e}=this;if(!e)return!1;const n=e.clientWidth||e.width,r=e.clientHeight||e.height;return n!==this.width||r!==this.height?(this.width=n,this.height=r,!0):!1}_createAnimationLoop(e){const{width:n,height:r,gl:i,glOptions:s,debug:o,onError:a,onBeforeRender:l,onAfterRender:u,useDevicePixels:c,autoResizeDrawingBuffer:f}=e;return new O3({width:n,height:r,useDevicePixels:c,autoResizeDrawingBuffer:f,autoResizeViewport:!1,gl:i,onCreateContext:h=>u1(K(A(A({},s),h),{canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()})),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:u,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new cE({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_onPointerMove(e){const{_pickRequest:n}=this;if(e.type==="pointerleave")n.x=-1,n.y=-1,n.radius=0;else{if(e.leftButton||e.rightButton)return;{const r=e.offsetCenter;if(!r)return;n.x=r.x,n.y=r.y,n.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:n.x,y:n.y}),n.event=e,n.mode="hover"}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:n,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.interactiveState.isHovering=n.length>0;let i=r,s=!1;for(const o of n)i=o,s=o.layer.onHover(o,e.event);if(!s&&this.props.onHover&&this.props.onHover(i,e.event),this.props.getTooltip){const o=this.props.getTooltip(i);this.tooltip.setTooltip(o,i.x,i.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.interactiveState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,Cd(e,{enable:!0,copyState:!0})),this.tooltip=new JI(this.canvas),Pn(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new V1;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new kL(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in a0)this.eventManager.on(i,this._onEvent);this.viewManager=new yI({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new mI(e,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new BI,this.deckRenderer=new HI(e),this.deckPicker=new KI(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:r}=this.layerManager.context;Pn(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers(A({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects()},n)),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),fe.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState=K(A({},this.viewState),{[e.viewId]:n}),this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.interactiveState.isDragging=e.isDragging,this.props.onInteractionStateChange(e)}_onEvent(e){const n=a0[e.type],r=e.offsetCenter;if(!n||!r)return;const i=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:i,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:o}=s,a=o&&(o[n.handler]||o.props[n.handler]),l=this.props[n.handler];let u=!1;a&&(u=a.call(o,s,e)),!u&&l&&l(s,e)}_onPointerDown(e){const n=e.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:n.x,y:n.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=Or.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}es.getPropTypes=DL;es.defaultProps=vE;es.VERSION=LP.VERSION;class Dc{constructor(e,n){this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:r}=this.source,{size:i}=n;let s=r;if(r&&r.length!==i){s=new Float32Array(i);const o=n.elementOffset||0;for(let a=0;a<i;++a)s[a]=r[o+a]}return s}getAccessor(){return A(A({},this.source.getAccessor()),this.opts)}}function FL(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function qa(t){return t.stride||t.size*t.bytesPerElement}function EE(t,e){e.offset&&fe.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=qa(t),r="vertexOffset"in e?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,s=r*n+i*t.bytesPerElement+(t.offset||0);return K(A({},e),{offset:s,stride:n})}function UL(t,e){const n=EE(t,e);return{high:n,low:K(A({},n),{offset:n.offset+t.size*4})}}class jL{constructor(e,n){this.gl=e,this.id=n.id,this.size=n.size;const r=n.logicalType||n.type,i=r===5130;let{defaultValue:s}=n;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0),n.defaultValue=s;let o=r;i?o=5126:!o&&n.isIndexed?o=e&&oC(e,be.ELEMENT_INDEX_UINT32)?5125:5123:o||(o=5126),n.logicalType=r,n.type=o;let a=FL(r||o||5126);this.shaderAttributes={},this.doublePrecision=i,i&&n.fp64===!1&&(a=Float32Array),n.bytesPerElement=a.BYTES_PER_ELEMENT,this.defaultType=a,this.value=null,this.settings=n,this.state={externalBuffer:null,bufferAccessor:n,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null,this.setData(n)}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new ge(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*qa(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),_o.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const r={},i=this.value instanceof Float64Array,s=UL(this.getAccessor(),n||{});return r[e]=new Dc(this,s.high),r["".concat(e,"64Low")]=i?new Dc(this,s.low):new Float32Array(this.size),r}if(n){const r=EE(this.getAccessor(),n);return{[e]:new Dc(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant){const n=this.value.slice();e=[n,n]}else{const{value:n,numInstances:r,size:i}=this,s=r*i;if(n&&s&&n.length>=s){const o=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let l=0;l<s;)for(let u=0;u<i;u++){const c=n[l++];c<o[u]&&(o[u]=c),c>a[u]&&(a[u]=c)}e=[o,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;ArrayBuffer.isView(e)?e={value:e}:e instanceof ge&&(e={buffer:e});const r=A(A({},this.settings),e);if(n.bufferAccessor=r,n.bounds=null,e.constant){let i=e.value;if(i=this._normalizeValue(i,[],0),this.settings.normalized&&(i=this._normalizeConstant(i)),!(!n.constant||!this._areValuesEqual(i,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=i}else if(e.buffer){const i=e.buffer;n.externalBuffer=i,n.constant=!1,this.value=e.value;const s=e.value instanceof Float64Array;r.type=e.type||i.accessor.type,r.bytesPerElement=i.accessor.BYTES_PER_ELEMENT*(s?2:1),r.stride=qa(r)}else if(e.value){this._checkExternalBuffer(e);let i=e.value;n.externalBuffer=null,n.constant=!1,this.value=i,r.bytesPerElement=i.BYTES_PER_ELEMENT,r.stride=qa(r);const{buffer:s,byteOffset:o}=this;this.doublePrecision&&i instanceof Float64Array&&(i=Lc(i,r));const a=i.byteLength+o+r.stride*2;s.byteLength<a&&s.reallocate(a),s.setAccessor(null),s.subData({data:i,offset:o}),r.type=e.type||s.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const{value:n}=this,{startOffset:r=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?Lc(n,{size:this.size,startIndex:r,endIndex:i}):n.subarray(r,i),offset:r*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate({numInstances:e,copy:n=!1}){const{state:r}=this,i=r.allocatedValue,s=_o.allocate(i,e+1,{size:this.size,type:this.defaultType,copy:n});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),n&&i&&o.subData({data:i instanceof Float64Array?Lc(i,this):i,offset:a})),r.allocatedValue=s,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!e.constant&&n){const r=this.defaultType;let i=!1;if(this.doublePrecision&&(i=n.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&fe.warn("Attribute ".concat(this.id," is normalized"))()}}_normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:i,size:s}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e)return n[r]=i[0],n;switch(s){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let o=s;for(;--o>=0;)n[r+o]=Number.isFinite(e[o])?e[o]:i[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==n[i])return!1;return!0}}const F0=[],U0=[];function wE(t,e=0,n=1/0){let r=F0;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(U0.length=t.length,r=U0):r=F0,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function bE(t){return t&&t[Symbol.asyncIterator]}function BL(t,e){const{size:n,stride:r,offset:i,startIndices:s,nested:o}=e,a=t.BYTES_PER_ELEMENT,l=r?r/a:n,u=i?i/a:0,c=Math.floor((t.length-u)/l);return(f,{index:h,target:g})=>{if(!s){const p=h*l+u;for(let m=0;m<n;m++)g[m]=t[p+m];return g}const _=s[h],v=s[h+1]||c;let d;if(o){d=new Array(v-_);for(let p=_;p<v;p++){const m=p*l+u;g=new Array(n);for(let w=0;w<n;w++)g[w]=t[m+w];d[p-_]=g}}else if(l===n)d=t.subarray(_*n+u,v*n+u);else{d=new t.constructor((v-_)*n);let p=0;for(let m=_;m<v;m++){const w=m*l+u;for(let b=0;b<n;b++)d[p++]=t[w+b]}}return d}}const zL=[],Ka=[[0,1/0]];function VL(t,e){if(t===Ka||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let i=0;for(let s=0;s<r;s++){const o=t[s];o[1]<e[0]?(n.push(o),i=s+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(i,0,e),n}function Fc(t){const{source:e,target:n,start:r=0,size:i,getData:s}=t,o=t.end||n.length,a=e.length,l=o-r;if(a>l){n.set(e.subarray(0,l),r);return}if(n.set(e,r),!s)return;let u=a;for(;u<l;){const c=s(u,e);for(let f=0;f<i;f++)n[r+u]=c[f]||0,u++}}function $L({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:s}){if(!Array.isArray(s))return Fc({source:t,target:e,size:n,getData:r}),e;let o=0,a=0;const l=r&&((c,f)=>r(c+a,f)),u=Math.min(i.length,s.length);for(let c=1;c<u;c++){const f=i[c]*n,h=s[c]*n;Fc({source:t.subarray(o,f),target:e,start:a,end:h,size:n,getData:l}),o=f,a=h}return a<e.length&&Fc({source:[],target:e,start:a,size:n,getData:l}),e}const GL={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function TE(t,e){return t?(Number.isFinite(t)&&(t={duration:t}),t.type=t.type||"interpolation",A(A(A({},GL[t.type]),e),t)):null}function SE(t,e){return e.getBuffer()?[e.getBuffer(),{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function xE(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function AE(t){t.push(t.shift())}function zd(t,e){const{doublePrecision:n,settings:r,value:i,size:s}=t,o=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*s)*o}function PE({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:i,getData:s=o=>o}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*o,l=n.byteOffset,u=n.startIndices,c=i&&u,f=zd(n,e),h=n.state.constant;if(!c&&r>=f)return;const g=h?n.value:n.getBuffer().getData({srcByteOffset:l});if(n.settings.normalized&&!h){const p=s;s=(m,w)=>n._normalizeConstant(p(m,w))}const _=h?(p,m)=>s(g,m):(p,m)=>s(g.subarray(p,p+a),m),v=t.getData({length:r}),d=new Float32Array(f);$L({source:v,target:d,sourceStartIndices:i,targetStartIndices:u,size:a,getData:_}),t.byteLength<d.byteLength+l&&t.reallocate(d.byteLength+l),t.subData({data:d,offset:l})}class Vd extends jL{constructor(e,n={}){super(e,n);const{transition:r=!1,noAlloc:i=!1,update:s=null,accessor:o=null,transform:a=null,startIndices:l=null}=n;Object.assign(this.settings,{transition:r,noAlloc:i,update:s||o&&this._autoUpdater,accessor:o,transform:a}),Object.assign(this.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:Ka,startIndices:l}),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,i=Array.isArray(n)?e[n.find(s=>e[s])]:e[n];return TE(i,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:i=1/0}=n;this.state.updateRanges=VL(this.state.updateRanges,[r,i])}else this.state.updateRanges=Ka}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=zL}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}update(e){this.setData(e)}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate({numInstances:e,copy:n.updateRanges!==Ka}),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let l=!0;if(o){for(const[u,c]of s)o.call(i,this,{data:n,startRow:u,endRow:c,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[u,c]of s){const f=Number.isFinite(u)?this.getVertexOffset(u):0,h=Number.isFinite(c)?this.getVertexOffset(c):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:f,endOffset:h})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),ArrayBuffer.isView(e)&&(e={value:e}),i.transform||n!==this.startIndices){Zt(ArrayBuffer.isView(e.value),"invalid ".concat(i.accessor));const o=e.size&&e.size!==this.size;return r.binaryAccessor=BL(e.value,{size:e.size||this.size,stride:e.stride,offset:e.offset,startIndices:n,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?n[e]:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const r in e)Object.assign(n,super.getShaderAttributes(r,e[r]));return n}_autoUpdater(e,{data:n,startRow:r,endRow:i,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:l,value:u,size:c,startIndices:f}=e,{accessor:h,transform:g}=a,_=l.binaryAccessor||(typeof h=="function"?h:s[h]);Zt(typeof _=="function",'accessor "'.concat(h,'" is not a function'));let v=e.getVertexOffset(r);const{iterable:d,objectInfo:p}=wE(n,r,i);for(const m of d){p.index++;let w=_(m,p);if(g&&(w=g.call(this,w)),f){const b=(p.index<f.length-1?f[p.index+1]:o)-f[p.index];if(w&&Array.isArray(w[0])){let x=v;for(const S of w)e._normalizeValue(S,u,x),x+=c}else w&&w.length>c?u.set(w,v):(e._normalizeValue(w,p.target,0),cI({target:u,source:p.target,start:v,count:b}));v+=b*c}else e._normalizeValue(w,u,v),v+=c}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class HL{constructor({gl:e,attribute:n,timeline:r}){this.gl=e,this.type="interpolation",this.transition=new Qo(r),this.attribute=n,this.attributeInTransition=new Vd(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=XL(e,n);const i={byteLength:0,usage:35050};this.buffers=[new ge(e,i),new ge(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}const{gl:r,buffers:i,attribute:s}=this;AE(i);const o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)PE(A({buffer:a},o));this.currentStartIndices=s.startIndices,this.currentLength=zd(s,n),this.attributeInTransition.update({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:i[0],aTo:SE(r,s)},feedbackBuffers:{vCurrent:i[1]}})}update(){const e=this.transition.update();if(e){const{time:n,settings:{duration:r,easing:i}}=this.transition,s=i(n/r);this.transform.run({uniforms:{time:s}})}return e}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}}const WL=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function XL(t,e){const n=xE(e.size);return new Nd(t,{vs:WL,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}class YL{constructor({gl:e,attribute:n,timeline:r}){this.gl=e,this.type="spring",this.transition=new Qo(r),this.attribute=n,this.attributeInTransition=new Vd(e,K(A({},n.settings),{normalized:!1})),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=qL(e),this.framebuffer=KL(e,this.texture),this.transform=ZL(e,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new ge(e,i),new ge(e,i),new ge(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){const{gl:r,buffers:i,attribute:s}=this,o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)PE(A({buffer:a},o));this.currentStartIndices=s.startIndices,this.currentLength=zd(s,n),this.attributeInTransition.update({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:SE(r,s)}})}update(){const{buffers:e,transform:n,framebuffer:r,transition:i}=this;return i.update()?(n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:i.settings.stiffness,damping:i.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),AE(e),this.attributeInTransition.update({buffer:e[1],value:this.attribute.value}),Pu(r)[0]>0||i.end(),!0):!1}cancel(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}}function ZL(t,e,n){const r=xE(e.size);return new Nd(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function qL(t){return new gt(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function KL(t,e){return new ke(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:e}})}const QL={interpolation:HL,spring:YL};class JL{constructor(e,{id:n,timeline:r}){this.id=n,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=Nd.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const i in e){const s=e[i],o=s.getTransitionSetting(n);!o||this._updateAttribute(i,s,o)}for(const i in this.transitions){const s=e[i];(!s||!s.getTransitionSetting(n))&&this._removeTransition(i)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,r){const i=this.transitions[e];let s=!i||i.type!==r.type;if(s){if(!this.isSupported){fe.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);const o=QL[r.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,gl:this.gl}):(fe.error("unsupported transition type '".concat(r.type,"'"))(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const j0="attributeManager.invalidate",ek="attributeManager.updateStart",tk="attributeManager.updateEnd",nk="attribute.updateStart",rk="attribute.allocate",ik="attribute.updateEnd";class sk{constructor(e,{id:n="attribute-manager",stats:r,timeline:i}={}){this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new JL(e,{id:"".concat(n,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(e=!0){return this.needsRedraw=!0,this}add(e,n){this._add(e,n)}addInstanced(e,n){this._add(e,n,{instanced:1})}remove(e){for(let n=0;n<e.length;n++){const r=e[n];this.attributes[r]!==void 0&&(this.attributes[r].delete(),delete this.attributes[r])}}invalidate(e,n){const r=this._invalidateTrigger(e,n);ot(j0,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);ot(j0,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:i,props:s={},buffers:o={},context:a={}}={}){let l=!1;ot(ek,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const u in this.attributes){const c=this.attributes[u],f=c.settings.accessor;c.startIndices=r,c.numInstances=n,s[u]&&fe.removed("props.".concat(u),"data.attributes.".concat(u))(),c.setExternalBuffer(o[u])||c.setBinaryValue(o[f],e.startIndices)||!o[f]&&c.setConstantValue(s[f])||c.needsUpdate()&&(l=!0,this._updateAttribute({attribute:c,numInstances:n,data:e,props:s,context:a})),this.needsRedraw|=c.needsRedraw()}l&&ot(tk,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,i=A({},r.getAttributes());for(const s in n){const o=n[s];o.needsRedraw(e)&&!r.hasAttribute(s)&&(i[s]=o)}return i}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const r={};for(const i in e)n[i]||Object.assign(r,e[i].getShaderAttributes());return r}getAccessors(){return this.updateTriggers}_add(e,n,r={}){n&&fe.warn("AttributeManager.add({updaters}) - updater map no longer supported")();for(const i in e){const s=e[i];this.attributes[i]=this._createAttribute(i,s,r)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,r){const i=K(A({},n),{id:e,isIndexed:n.isIndexed||n.elements||!1,constant:n.constant||!1,size:n.elements&&1||n.size||1,value:n.value||null,divisor:n.instanced||r.instanced?1:n.divisor||0});return new Vd(this.gl,i)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:i}=this,s=i[e];return s&&s.forEach(o=>{const a=r[o];a&&a.setNeedsUpdate(a.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(ot(nk,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&ot(rk,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,ot(ik,n,r))}}class ok extends Qo{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:i,easing:s}}=this,o=s(e/i);this._value=mo(n,r,o)}}const B0=1e-5;function z0(t,e,n,r,i){const s=e-t,a=(n-e)*i,l=-s*r;return a+l+s+e}function ak(t,e,n,r,i){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;o++)s[o]=z0(t[o],e[o],n[o],r,i);return s}return z0(t,e,n,r,i)}function V0(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}class lk extends Qo{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:i}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=ak(s,o,n,r,i);const l=V0(a,n),u=V0(a,o);l<B0&&u<B0&&(a=n,this.end()),this._prevValue=o,this._currValue=a}}const uk={interpolation:ok,spring:lk};class ck{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,i){const{transitions:s}=this;if(s.has(e)){const l=s.get(e),{value:u=l.settings.fromValue}=l;n=u,this.remove(e)}if(i=TE(i),!i)return;const o=uk[i.type];if(!o){fe.error("unsupported transition type '".concat(i.type,"'"))();return}const a=new o(this.timeline);a.start(K(A({},i),{fromValue:n,toValue:r})),s.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function fk(t){const e=$d(t);for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function hk(t,e){const n=CE({newProps:t,oldProps:e,propTypes:$d(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=pk(t,e);let i=!1;return r||(i=gk(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:mk(t,e),transitionsChanged:dk(t,e)}}function dk(t,e){if(!t.transitions)return null;const n={},r=$d(t);for(const i in t.transitions){const s=r[i],o=s&&s.type;(o==="number"||o==="color"||o==="array")&&sh(t[i],e[i],s)&&(n[i]=!0)}return n}function CE({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return null;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return"".concat(i,".").concat(s," added");const o=sh(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return"".concat(i,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const o=sh(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}}return null}function sh(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function pk(t,e){if(e===null)return"oldProps is null, initial diff";let n=null;const{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}function gk(t,e){if(e===null)return"oldProps is null, initial diff";if("all"in t.updateTriggers&&$0(t,e,"all"))return{all:!0};const n={};let r=!1;for(const i in t.updateTriggers)i!=="all"&&$0(t,e,i)&&(n[i]=!0,r=n);return r}function mk(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function $0(t,e,n){let r=t.updateTriggers[n];r=r==null?{}:r;let i=e.updateTriggers[n];return i=i==null?{}:i,CE({oldProps:i,newProps:r,triggerName:n})}function $d(t){const e=t[Dl],n=e&&e.constructor;return n?n._propTypes:{}}const yk="count(): argument not an object",_k="count(): argument not a container";function vk(t){if(!wk(t))throw new Error(yk);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(Ek(t))return Object.keys(t).length;throw new Error(_k)}function Ek(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function wk(t){return t!==null&&typeof t=="object"}function bk(t,e){if(!e)return t;const n=A(A({},t),e);if("defines"in e&&(n.defines=A(A({},t.defines),e.defines)),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(i=>i.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r=A({},t.inject);for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];n.inject=r}return n}const Tk={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},oh={};function Sk(t,e){const n=t.context&&t.context.gl;if(!n||!e)return null;if(e instanceof gt)return e;e.constructor&&e.constructor.name!=="Object"&&(e={data:e});let r=null;e.compressed&&(r={[10241]:e.data.length>1?9985:9729});const i=new gt(n,K(A({},e),{parameters:A(A(A({},Tk),r),t.props.textureParameters)}));return oh[i.id]=!0,i}function xk(t){!t||!(t instanceof gt)||oh[t.id]&&(t.delete(),delete oh[t.id])}const Ak={boolean:{validate(t,e){return!0},equal(t,e,n){return Boolean(t)===Boolean(e)}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||vo(t)&&(t.length===3||t.length===4)},equal(t,e,n){return Uc(t,e)}},accessor:{validate(t,e){const n=jl(t);return n==="function"||n===jl(e.value)},equal(t,e,n){return typeof e=="function"?!0:Uc(t,e)}},array:{validate(t,e){return e.optional&&!t||vo(t)},equal(t,e,n){return n.compare?Uc(t,e):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare||t===e}},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>Sk(n,t),release:t=>{xk(t)}}};function Uc(t,e){if(t===e)return!0;if(!vo(t)||!vo(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Pk(t){const e={},n={},r={};for(const[i,s]of Object.entries(t)){const o=s==null?void 0:s.deprecatedFor;if(o)r[i]=Array.isArray(o)?o:[o];else{const a=Ck(i,s);e[i]=a,n[i]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function Ck(t,e){switch(jl(e)){case"object":return bs(t,e);case"array":return bs(t,{type:"array",value:e,compare:!1});case"boolean":return bs(t,{type:"boolean",value:e});case"number":return bs(t,{type:"number",value:e});case"function":return bs(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function bs(t,e){return"type"in e?A(A({name:t},Ak[e.type]),e):"value"in e?A({name:t,type:jl(e.value)},e):{name:t,type:"object",value:e}}function vo(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function jl(t){return vo(t)?"array":t===null?"null":typeof t}function Ok(t,e){const n=OE(t.constructor),r=Object.create(n);r[Dl]=t,r[jr]={},r[$n]={};for(let i=0;i<e.length;++i){const s=e[i];for(const o in s)r[o]=s[o]}return Object.freeze(r),r}function OE(t){const e=Bl(t,"_mergedDefaultProps");return e||(Rk(t),t._mergedDefaultProps)}function Rk(t){if(!t.prototype)return;const n=Object.getPrototypeOf(t),r=OE(n),i=Bl(t,"defaultProps")||{},s=Pk(i),o=Mk(s.defaultProps,r,t),a=A(A({},n._propTypes),s.propTypes);Lk(o,a);const l=A(A({},n._deprecatedProps),s.deprecatedProps);Ik(o,l),t._mergedDefaultProps=o,t._propTypes=a,t._deprecatedProps=l}function Mk(t,e,n){const r=Object.create(null);Object.assign(r,e,t);const i=Nk(n);return delete t.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}function Ik(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const i="".concat(this.id,": ").concat(n);for(const s of e[n])RE(this,s)||(this[s]=r);fe.deprecated(i,e[n].join("/"))()}})}function Lk(t,e){const n={},r={};for(const i in e){const s=e[i],{name:o,value:a}=s;s.async&&(n[o]=a,r[o]=kk(o))}t[Ci]=n,t[jr]={},Object.defineProperties(t,r)}function kk(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||bE(e)?this[jr][t]=e:this[$n][t]=e},get(){if(this[$n]){if(t in this[$n])return this[$n][t]||this[Ci][t];if(t in this[jr]){const e=this[Dl]&&this[Dl].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[Ci][t]}}return this[Ci][t]}}}function RE(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Bl(t,e){return RE(t,e)&&t[e]}function Nk(t){const e=Bl(t,"layerName")||Bl(t,"componentName");return e||fe.once(0,"".concat(t.name,".componentName not specified"))(),e||t.name}const Dk=Object.freeze({});class ME{constructor(e){I(this,"component",void 0),I(this,"onAsyncPropUpdated",void 0),I(this,"asyncProps",void 0),I(this,"oldProps",void 0),I(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||Dk}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return Boolean(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){const n=e[$n]||{},r=e[jr]||e,i=e[Ci]||{};for(const s in n){const o=n[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o),n[s]=this.getAsyncProp(s)}for(const s in r){const o=r[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o)}}_fetch(e,n){return n}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(!!this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(bE(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=n,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const i=r.pendingLoadCount;n.then(s=>{s=this._postProcessValue(r,s),this._setAsyncPropValue(e,s,i),this._onResolve(e,s)}).catch(s=>{this._onError(e,s)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const i=r.pendingLoadCount;let s=[],o=0;for await(const a of n){const{dataTransform:l}=this.component.props;l?s=l(a,s):s=s.concat(a),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:o,endRow:s.length}]}),o=s.length,this._setAsyncPropValue(e,s,i)}this._onResolve(e,s)}_postProcessValue(e,n){const r=e.type;return r&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const i=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}let Fk=0;class Gd{constructor(...e){I(this,"id",void 0),I(this,"props",void 0),I(this,"count",void 0),I(this,"lifecycle",void 0),I(this,"parent",void 0),I(this,"context",void 0),I(this,"state",void 0),I(this,"internalState",void 0),this.props=Ok(this,e),this.id=this.props.id,this.count=Fk++,this.lifecycle=ai.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}clone(e){const{props:n}=this,r={};for(const i in n[Ci])i in n[$n]?r[i]=n[$n][i]:i in n[jr]&&(r[i]=n[jr][i]);return new this.constructor(A(A(A({},n),r),e))}_initState(){this.internalState=new ME(this)}}I(Gd,"componentName","Component");I(Gd,"defaultProps",{});class Uk extends ME{constructor({attributeManager:e,layer:n}){super(n);I(this,"attributeManager",void 0),I(this,"needsRedraw",void 0),I(this,"subLayers",void 0),I(this,"usesPickingColorCache",void 0),this.attributeManager=e,this.needsRedraw=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,n){const r=this.component.props.fetch;return r?r(n,{propName:e,layer:this.layer}):super._fetch(e,n)}_onResolve(e,n){const r=this.component.props.onDataLoad;e==="data"&&r&&r(n,{propName:e,layer:this.layer})}_onError(e,n){this.layer.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const jk="layer.changeFlag",Bk="layer.initialize",zk="layer.update",Vk="layer.finalize",$k="layer.matched",G0=2**24-1,Gk=Object.freeze([]),Hk=Cu(({oldViewport:t,viewport:e})=>t.equals(e));let tn=new Uint8ClampedArray(0);const Wk={data:{type:"data",value:Gk,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:s})=>{const{resourceManager:o}=n.context;if(i=i||n.getLoadOptions(),r=r||n.props.loaders,s){var a;i=K(A({},i),{fetch:K(A({},(a=i)===null||a===void 0?void 0:a.fetch),{signal:s})})}let l=o.contains(t);return!l&&!i&&(o.add({resourceId:t,data:Ol(t,r),persistent:!1}),l=!0),l?o.subscribe({resourceId:t,onChange:u=>n.internalState.reloadAsyncProp(e,u),consumerId:n.id,requestId:e}):Ol(t,r,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:qo.DRAW,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:he.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Jo extends Gd{toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}raiseError(e,n){var r,i;if(n&&(e.message="".concat(n,": ").concat(e.message)),!((r=(i=this.props).onError)!==null&&r!==void 0&&r.call(i,e))){var s,o;(s=this.context)===null||s===void 0||(o=s.onError)===null||o===void 0||o.call(s,e,this)}}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(e=!0){this.internalState&&(this.internalState.needsRedraw=e)}setNeedsUpdate(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}hasUniformTransition(){return this.internalState.uniformTransitions.active}get isLoaded(){return this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}project(e){const{viewport:n}=this.context,r=iE(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,s,o]=Z1(r,n.pixelProjectionMatrix);return e.length===2?[i,s]:[i,s,o]}unproject(e){const{viewport:n}=this.context;return n.unproject(e)}projectPosition(e,n){return uI(e,A({viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem},n))}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===he.DEFAULT||e===he.LNGLAT||e===he.CARTESIAN}onHover(e,n){return this.props.onHover?this.props.onHover(e,n):!1}onClick(e,n){return this.props.onClick?this.props.onClick(e,n):!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){Zt(e instanceof Uint8Array);const[n,r,i]=e;return n+r*256+i*65536-1}initializeState(){throw new Error("Layer ".concat(this," has not defined initializeState"))}getShaders(e){for(const n of this.props.extensions)e=bk(e,n.getShaders.call(this,n));return e}getBounds(){var e;const n=this.getAttributeManager();if(!n)return null;const{positions:r,instancePositions:i}=n.attributes;return(e=r||i)===null||e===void 0?void 0:e.getBounds()}shouldUpdateState({oldProps:e,props:n,context:r,changeFlags:i}){return i.propsOrDataChanged}updateState({oldProps:e,props:n,context:r,changeFlags:i}){const s=this.getAttributeManager();if(i.dataChanged&&s){const{dataChanged:l}=i;if(Array.isArray(l))for(const u of l)s.invalidateAll(u);else s.invalidateAll()}const o=Number.isInteger(e.highlightedObjectIndex)||e.pickable,a=Number.isInteger(n.highlightedObjectIndex)||n.pickable;if(o!==a&&s){const{pickingColors:l,instancePickingColors:u}=s.attributes,c=l||u;c&&(a&&c.constant&&(c.constant=!1,s.invalidate(c.id)),!c.value&&!a&&(c.constant=!0,c.value=[0,0,0]))}}finalizeState(){for(const n of this.getModels())n.delete();const e=this.getAttributeManager();e&&e.finalize(),this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState.uniformTransitions.clear(),this.internalState.finalize()}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}activateViewport(e){const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!Hk({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all",n=""){const r=this.getAttributeManager();!r||(e==="all"?r.invalidateAll():r.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(e){const n=this.getAttributeManager();if(!n)return;const r=this.getNumInstances(e),i=this.getStartIndices(e);n.update({data:e.data,numInstances:r,startIndices:i,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this,ignoreUnknownAttributes:!0});const s=n.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const i in n)Object.defineProperty(r,i,{value:n[i]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(tn.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>G0&&fe.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),tn=_o.allocate(tn,n,{size:3,copy:!0,maxCount:Math.max(n,G0)});const i=Math.floor(tn.length/3),s=[];for(let o=r;o<i;o++)this.encodePickingColor(o,s),tn[o*3+0]=s[0],tn[o*3+1]=s[1],tn[o*3+2]=s[2]}e.value=tn.subarray(0,n*3)}_setModelAttributes(e,n){const r=this.getAttributeManager(),i=e.userData.excludeAttributes||{},s=r.getShaderAttributes(n,i);e.setAttributes(s)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r,s=i.getVertexOffset(e),o=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;this.internalState.usesPickingColorCache&&r.value.buffer!==tn.buffer&&(r.value=tn.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0})}getNumInstances(e){return e=e||this.props,e.numInstances!==void 0?e.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:vk(e.data)}getStartIndices(e){return e=e||this.props,e.startIndices!==void 0?e.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}_initialize(){ot(Bk,this),this._initState(),this.initializeState(this.context);for(const e of this.props.extensions)e.initializeState.call(this,this.context,e);this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}_update(){const e=this.needsUpdate();ot(zk,this,e),e&&this._updateState()}_updateState(){const e=this.props,n=this.context.viewport,r=this._updateUniformTransition();this.internalState.propsInTransition=r,this.context.viewport=this.internalState.viewport||n,this.props=r;try{const i=this._getUpdateParams(),s=this.getModels();if(this.context.gl)this.updateState(i);else try{this.updateState(i)}catch{}for(const a of this.props.extensions)a.updateState.call(this,i,a);const o=this.getModels()[0]!==s[0];this._updateModules(i,o),this.isComposite?this._renderLayers(i):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances()))}finally{this.context.viewport=n,this.props=e,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}}_finalize(){ot(Vk,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}drawLayer({moduleParameters:e=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();const i=this.props;this.props=this.internalState.propsInTransition||i;const{opacity:s}=this.props;n.opacity=Math.pow(s,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:o}=this.props,a=o&&o(n)||[0,0];Pn(this.context.gl,{polygonOffset:a}),Ft(this.context.gl,r,()=>{const l={moduleParameters:e,uniforms:n,parameters:r,context:this.context};for(const u of this.props.extensions)u.draw.call(this,l,u);this.draw(l)})}finally{this.props=i}}getChangeFlags(){return this.internalState.changeFlags}setChangeFlags(e){const{changeFlags:n}=this.internalState;for(const i in e)if(e[i]){let s=!1;switch(i){case"dataChanged":Array.isArray(n[i])&&(n[i]=Array.isArray(e[i])?n[i].concat(e[i]):e[i],s=!0);default:n[i]||(n[i]=e[i],s=!0)}s&&ot(jk,this,i,e)}const r=n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged;n.propsOrDataChanged=r,n.somethingChanged=r||e.viewportChanged||e.stateChanged}clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}diffProps(e,n){const r=hk(e,n);if(r.updateTriggersChanged)for(const i in r.updateTriggersChanged)r.updateTriggersChanged[i]&&this.invalidateAttribute(i);if(r.transitionsChanged)for(const i in r.transitionsChanged)this.internalState.uniformTransitions.add(i,n[i],e[i],e.transitions[i]);return this.setChangeFlags(r)}validateProps(){fk(this.props)}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.pickingHighlightColor=r(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_updateModules({props:e,oldProps:n},r){const{autoHighlight:i,highlightedObjectIndex:s,highlightColor:o}=e;if(r||n.autoHighlight!==i||n.highlightedObjectIndex!==s||n.highlightColor!==o){const a={};i||(a.pickingSelectedColor=null),Array.isArray(o)&&(a.pickingHighlightColor=o),Number.isInteger(s)&&(a.pickingSelectedColor=s>=0?this.encodePickingColor(s):null),this.setModuleParameters(a)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const r=this.getAttributeManager(),i=r&&r.getNeedsRedraw(e);return n=n||i,n}_getAttributeManager(){return new sk(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}_initState(){Zt(!this.internalState&&!this.state),Zt(isFinite(this.props.coordinateSystem));const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Uk({attributeManager:e,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(fe.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new ck(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}_transferState(e){ot($k,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.internalState.layer=this,this.state=n,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}_onAsyncPropUpdated(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}Jo.layerName="Layer";Jo.defaultProps=Wk;const Xk=["bearing","pitch"],Yk={speed:1.2,curve:1.414};class ID extends aE{constructor(e={}){super({compare:["longitude","latitude","zoom","bearing","pitch"],extract:["width","height","longitude","latitude","zoom","bearing","pitch"],required:["width","height","latitude","longitude","zoom"]});this.props=A(A({},Yk),e)}interpolateProps(e,n,r){const i=yM(e,n,r,this.props);for(const s of Xk)i[s]=mo(e[s]||0,n[s]||0,r);return i}getDuration(e,n){let{transitionDuration:r}=n;return r==="auto"&&(r=_M(e,n,this.props)),r}}var Zk=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,qk=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;const Kk=1024,Qk=4,H0=()=>{},Jk={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071};function eN(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function tN(t,e,n,r){return n===e.width&&r===e.height?e:(t.canvas.height=r,t.canvas.width=n,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,n,r),t.canvas)}function Eo(t){return t&&(t.id||t.url)}function nN(t,e,n,r){const i=e.width,s=e.height,o=E1(e,{width:n,height:r});return nC(e,o,{targetY:0,width:i,height:s}),e.delete(),o}function W0(t,e,n){for(let r=0;r<e.length;r++){const{icon:i,xOffset:s}=e[r],o=Eo(i);t[o]=K(A({},i),{x:s,y:n})}}function rN({icons:t,buffer:e,mapping:n={},xOffset:r=0,yOffset:i=0,rowHeight:s=0,canvasWidth:o}){let a=[];for(let l=0;l<t.length;l++){const u=t[l],c=Eo(u);if(!n[c]){const{height:f,width:h}=u;r+h+e>o&&(W0(n,a,i),r=0,i=s+i+e,s=0,a=[]),a.push({icon:u,xOffset:r}),r=r+h+e,s=Math.max(s,f)}}return a.length>0&&W0(n,a,i),{mapping:n,rowHeight:s,xOffset:r,yOffset:i,canvasWidth:o,canvasHeight:eN(s+i+e)}}function iN(t,e,n){if(!t||!e)return null;n=n||{};const r={},{iterable:i,objectInfo:s}=wE(t);for(const o of i){s.index++;const a=e(o,s),l=Eo(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!r[l]&&(!n[l]||a.url!==n[l].url)&&(r[l]=K(A({},a),{source:o,sourceIndex:s.index}))}return r}class sN{constructor(e,{onUpdate:n=H0,onError:r=H0}){this.gl=e,this.onUpdate=n,this.onError=r,this._loadOptions=null,this._getIcon=null,this._texture=null,this._externalTexture=null,this._mapping={},this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=Qk,this._canvasWidth=Kk,this._canvasHeight=0,this._canvas=null}finalize(){var e;(e=this._texture)===null||e===void 0||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?Eo(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:r,iconMapping:i,data:s,getIcon:o}){e&&(this._loadOptions=e),n!==void 0&&(this._autoPacking=n),o&&(this._getIcon=o),i&&(this._mapping=i),r&&this._updateIconAtlas(r),this._autoPacking&&(s||o)&&typeof document!="undefined"&&(this._canvas=this._canvas||document.createElement("canvas"),this._updateAutoPacking(s))}get isLoaded(){return this._pendingCount===0}_updateIconAtlas(e){var n;(n=this._texture)===null||n===void 0||n.delete(),this._texture=null,this._externalTexture=e,this.onUpdate()}_updateAutoPacking(e){const n=Object.values(iN(e,this._getIcon,this._mapping)||{});if(n.length>0){const{mapping:r,xOffset:i,yOffset:s,rowHeight:o,canvasHeight:a}=rN({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=o,this._mapping=r,this._xOffset=i,this._yOffset=s,this._canvasHeight=a,this._texture||(this._texture=new gt(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:Jk})),this._texture.height!==this._canvasHeight&&(this._texture=nN(this.gl,this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._loadIcons(n)}}_loadIcons(e){const n=this._canvas.getContext("2d");for(const r of e)this._pendingCount++,Ol(r.url,r1,this._loadOptions).then(i=>{const s=Eo(r),{x:o,y:a,width:l,height:u}=this._mapping[s],c=tN(n,i,l,u);this._texture.setSubImageData({data:c,x:o,y:a,width:l,height:u}),this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:r.url,source:r.source,sourceIndex:r.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const IE=[0,0,0,255],oN={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:IE},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class LE extends Jo{getShaders(){return super.getShaders({vs:Zk,fs:qk,modules:[G1,eE]})}initializeState(){this.state={iconManager:new sN(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:IE},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState({oldProps:e,props:n,changeFlags:r}){super.updateState({props:n,oldProps:e,changeFlags:r});const i=this.getAttributeManager(),{iconAtlas:s,iconMapping:o,data:a,getIcon:l}=n,{iconManager:u}=this.state;u.setProps({loadOptions:n.loadOptions});let c=!1;if(s||this.internalState.isAsyncPropLoading("iconAtlas")?(e.iconAtlas!==n.iconAtlas&&u.setProps({iconAtlas:s,autoPacking:!1}),e.iconMapping!==n.iconMapping&&(u.setProps({iconMapping:o}),c=!0)):u.setProps({autoPacking:!0}),(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&u.setProps({data:a,getIcon:l}),c&&(i.invalidate("instanceOffsets"),i.invalidate("instanceIconFrames"),i.invalidate("instanceColorModes")),r.extensionsChanged){var h;const{gl:g}=this.context;(h=this.state.model)===null||h===void 0||h.delete(),this.state.model=this._getModel(g),i.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(){super.finalizeState(),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,sizeUnits:s,billboard:o,alphaCutoff:a}=this.props,{iconManager:l}=this.state,u=l.getTexture();u&&this.state.model.setUniforms(e).setUniforms({iconsTexture:u,iconsTextureDim:[u.width,u.height],sizeUnits:Ll[s],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,billboard:o,alphaCutoff:a}).draw()}_getModel(e){const n=[-1,-1,-1,1,1,1,1,-1];return new kd(e,K(A({},this.getShaders()),{id:this.props.id,geometry:new z1({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0}))}_onUpdate(){this.setNeedsRedraw()}_onError(e){const{onIconError:n}=this.getCurrentLayer().props;n?n(e):fe.error(e.error)()}getInstanceOffset(e){const n=this.state.iconManager.getIconMapping(e);return[n.width/2-n.anchorX||0,n.height/2-n.anchorY||0]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const n=this.state.iconManager.getIconMapping(e);return[n.x||0,n.y||0,n.width||0,n.height||0]}}LE.layerName="IconLayer";LE.defaultProps=oN;var aN=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec3 splitLine(vec3 a, vec3 b, float x) {
  float t = (x - a.x) / (b.x - a.x);
  return vec3(x, mix(a.yz, b.yz, t));
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;

  if (useShortestPath > 0.5 || useShortestPath < -0.5) {
    source_world.x = mod(source_world.x + 180., 360.0) - 180.;
    target_world.x = mod(target_world.x + 180., 360.0) - 180.;
    float deltaLng = target_world.x - source_world.x;

    if (deltaLng * useShortestPath > 180.) {
      source_world.x += 360. * useShortestPath;
      source_world = splitLine(source_world, target_world, 180. * useShortestPath);
      source_world_64low = vec3(0.0);
    } else if (deltaLng * useShortestPath < -180.) {
      target_world.x += 360. * useShortestPath;
      target_world = splitLine(source_world, target_world, 180. * useShortestPath);
      target_world_64low = vec3(0.0);
    } else if (useShortestPath < 0.) {
      gl_Position = vec4(0.);
      return;
    }
  }
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,lN=`#define SHADER_NAME line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;const uN=[0,0,0,255],cN={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getColor:{type:"accessor",value:uN},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class kE extends Jo{getShaders(){return super.getShaders({vs:aN,fs:lN,modules:[G1,eE]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState({props:e,oldProps:n,changeFlags:r}){if(super.updateState({props:e,oldProps:n,changeFlags:r}),r.extensionsChanged){var i;const{gl:s}=this.context;(i=this.state.model)===null||i===void 0||i.delete(),this.state.model=this._getModel(s),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{widthUnits:n,widthScale:r,widthMinPixels:i,widthMaxPixels:s,wrapLongitude:o}=this.props;this.state.model.setUniforms(e).setUniforms({widthUnits:Ll[n],widthScale:r,widthMinPixels:i,widthMaxPixels:s,useShortestPath:o?1:0}).draw(),o&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(e){const n=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new kd(e,K(A({},this.getShaders()),{id:this.props.id,geometry:new z1({drawMode:5,attributes:{positions:new Float32Array(n)}}),isInstanced:!0}))}}kE.layerName="LineLayer";kE.defaultProps=cN;const fN=L.exports.createContext(null);function X0(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function Y0(t,e){const n=e.viewState||e;let r=!1;if("longitude"in n&&"latitude"in n){const i=t.center;t.center=new i.constructor(n.longitude,n.latitude),r=r||i!==t.center}if("zoom"in n){const i=t.zoom;t.zoom=n.zoom,r=r||i!==t.zoom}if("bearing"in n){const i=t.bearing;t.bearing=n.bearing,r=r||i!==t.bearing}if("pitch"in n){const i=t.pitch;t.pitch=n.pitch,r=r||i!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}const hN=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Z0(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map(r=>{const i=e[r.ref];let s=null;if("interactive"in r&&(s=A({},r),delete s.interactive),i){s=s||A({},r),delete s.ref;for(const o of hN)o in i&&(s[o]=i[o])}return s||r});return K(A({},t),{layers:n})}function dN(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===s}function Un(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Un(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n)if(!e.hasOwnProperty(i)||!Un(t[i],e[i]))return!1;return!0}return!1}const q0={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},jc={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},K0={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},pN=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],gN=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Gi{constructor(e,n,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=i=>{const s=this.props[K0[i.type]];s&&s(i)},this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const s=this.props[q0[i.type]];if(s){if(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"){const o=this._hoveredFeatures||this._map.queryRenderedFeatures(i.point,{layers:this.props.interactiveLayerIds});if(!o.length)return;i.features=o}s(i),delete i.features}},this._onCameraEvent=i=>{if(!this._internalUpdate){const s=this.props[jc[i.type]];s&&s(i)}i.type in this._deferredEvents&&(this._deferredEvents[i.type]=!1)},this._MapClass=e,this.props=n,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const r=this._updateSettings(e,n);r&&(this._renderTransform=this._map.transform.clone());const i=this._updateSize(e),s=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(r||i||s&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const r=Gi.savedMaps.pop();if(!r)return null;const i=r.map,s=i.getContainer();for(n.className=s.className;s.childNodes.length>0;)n.appendChild(s.childNodes[0]);return i._container=n,e.initialViewState&&r._updateViewState(e.initialViewState,!1),i.resize(),r.setProps(K(A({},e),{styleDiffing:!1})),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),r}_initialize(e){const{props:n}=this,r=K(A(A({},n),n.initialViewState),{accessToken:n.mapboxAccessToken||mN()||null,container:e,style:Z0(n.mapStyle)}),i=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[i.longitude||0,i.latitude||0],zoom:i.zoom||0,pitch:i.pitch||0,bearing:i.bearing||0}),n.gl){const u=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=u,n.gl)}const s=new this._MapClass(r);i.padding&&s.setPadding(i.padding),n.cursor&&(s.getCanvas().style.cursor=n.cursor),this._renderTransform=s.transform.clone();const o=s._render;s._render=u=>{this._inRender=!0,o.call(s,u),this._inRender=!1};const a=s._renderTaskQueue.run;s._renderTaskQueue.run=u=>{a.call(s._renderTaskQueue,u),this._onBeforeRepaint()},s.on("render",()=>this._onAfterRepaint());const l=s.fire;s.fire=this._fireEvent.bind(this,l),s.on("resize",()=>{this._renderTransform.resize(s.transform.width,s.transform.height)}),s.on("styledata",()=>this._updateStyleComponents(this.props,{})),s.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const u in q0)s.on(u,this._onPointerEvent);for(const u in jc)s.on(u,this._onCameraEvent);for(const u in K0)s.on(u,this._onEvent);this._map=s}recycle(){Gi.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_updateSize(e){const{viewState:n}=e;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const r=this._map,i=this._renderTransform,{zoom:s,pitch:o,bearing:a}=i,l=Y0(i,A(A({},X0(r.transform)),e));if(l&&n){const u=this._deferredEvents;u.move=!0,u.zoom||(u.zoom=s!==i.zoom),u.rotate||(u.rotate=a!==i.bearing),u.pitch||(u.pitch=o!==i.pitch)}return r.isMoving()||Y0(r.transform,e),l}_updateSettings(e,n){const r=this._map;let i=!1;for(const s of pN)s in e&&!Un(e[s],n[s])&&(i=!0,r[`set${s[0].toUpperCase()}${s.slice(1)}`](e[s]));return i}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor),e.mapStyle!==n.mapStyle){const r={diff:e.styleDiffing};return"localIdeographFontFamily"in e&&(r.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(Z0(e.mapStyle),r),!0}return!1}_updateStyleComponents(e,n){const r=this._map;let i=!1;return r.style.loaded()&&("light"in e&&!Un(e.light,n.light)&&(i=!0,r.setLight(e.light)),"fog"in e&&!Un(e.fog,n.fog)&&(i=!0,r.setFog(e.fog)),"terrain"in e&&!Un(e.terrain,n.terrain)&&(!e.terrain||r.getSource(e.terrain.source))&&(i=!0,r.setTerrain(e.terrain),this._renderTransform.elevation=r.transform.elevation)),i}_updateHandlers(e,n){const r=this._map;let i=!1;for(const s of gN){const o=e[s];Un(o,n[s])||(i=!0,o?r[s].enable(o):r[s].disable())}return i}_updateHover(e){var i;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const s=e.type,o=((i=this._hoveredFeatures)==null?void 0:i.length)>0;let a;if(s==="mousemove")try{a=this._map.queryRenderedFeatures(e.point,{layers:n.interactiveLayerIds})}catch{a=[]}else a=[];const l=a.length>0;!l&&o&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,l&&!o&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=s}else this._hoveredFeatures=null}_fireEvent(e,n,r){const i=this._map,s=i.transform,o=typeof n=="string"?n:n.type;return o==="move"&&this._updateViewState(this.props,!1),o in jc&&(typeof n=="object"&&(n.viewState=X0(s)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,n,r),i.transform=s,i):(e.call(i,n,r),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&e.fire(r);this._internalUpdate=!1;const n=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=n}}}Gi.savedMaps=[];function mN(){let t=null;if(typeof location!="undefined"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||{}.MapboxAccessToken}catch{}try{t=t||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const yN=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function _N(t,e){if(!t)return null;const n=t.map,r={getMap:()=>n,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:i=>t.transform.locationPoint(e.LngLat.convert(i)),unproject:i=>t.transform.pointLocation(e.Point.convert(i))};for(const i of vN(n))!(i in r)&&!yN.includes(i)&&(r[i]=n[i].bind(n));return r}function vN(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof t[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}const EN=typeof document!="undefined"?L.exports.useLayoutEffect:L.exports.useEffect,wN=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function bN(t,e){for(const n of wN)n in e&&(t[n]=e[n]);e.RTLTextPlugin&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(e.RTLTextPlugin,n=>{n&&console.error(n)},!1)}const Mu=L.exports.createContext(null),TN={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:t=>console.error(t.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},NE=L.exports.forwardRef((t,e)=>{const n=L.exports.useContext(fN),[r,i]=L.exports.useState(null),s=L.exports.useRef(),{current:o}=L.exports.useRef({mapLib:null,map:null});L.exports.useEffect(()=>{const l=t.mapLib;let u=!0,c;return Promise.resolve(l||import("./mapbox-gl.192f8f45.js").then(function(f){return f.m})).then(f=>{if(!!u){if(f.Map||(f=f.default),!f||!f.Map)throw new Error("Invalid mapLib");if(f.supported(t))bN(f,t),t.reuseMaps&&(c=Gi.reuse(t,s.current)),c||(c=new Gi(f.Map,t,s.current)),o.map=_N(c,f),o.mapLib=f,i(c),n==null||n.onMapMount(o.map,t.id);else throw new Error("Map is not supported by this browser")}}).catch(f=>{t.onError({type:"error",target:null,originalEvent:null,error:f})}),()=>{u=!1,c&&(n==null||n.onMapUnmount(t.id),t.reuseMaps?c.recycle():c.destroy())}},[]),EN(()=>{r&&r.setProps(t)}),L.exports.useImperativeHandle(e,()=>o.map,[r]);const a=L.exports.useMemo(()=>A({position:"relative",width:"100%",height:"100%"},t.style),[t.style]);return L.exports.createElement("div",{id:t.id,ref:s,style:a},r&&L.exports.createElement(Mu.Provider,{value:o},t.children))});NE.displayName="Map";NE.defaultProps=TN;const SN=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Xr(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const i=e[r];Number.isFinite(i)&&!SN.test(r)?n[r]=`${i}px`:n[r]=i}}const xN={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function DE(t){const{map:e,mapLib:n}=L.exports.useContext(Mu),r=L.exports.useRef({props:t});r.current.props=t;const i=L.exports.useMemo(()=>{let s=!1;L.exports.Children.forEach(t.children,l=>{l&&(s=!0)});const o=K(A({},t),{element:s?document.createElement("div"):null}),a=new n.Marker(o).setLngLat([t.longitude,t.latitude]);return a.getElement().addEventListener("click",l=>{var u,c;(c=(u=r.current.props).onClick)==null||c.call(u,{type:"click",target:a,originalEvent:l})}),a.on("dragstart",l=>{var c,f;const u=l;u.lngLat=i.getLngLat(),(f=(c=r.current.props).onDragStart)==null||f.call(c,u)}),a.on("drag",l=>{var c,f;const u=l;u.lngLat=i.getLngLat(),(f=(c=r.current.props).onDrag)==null||f.call(c,u)}),a.on("dragend",l=>{var c,f;const u=l;u.lngLat=i.getLngLat(),(f=(c=r.current.props).onDragEnd)==null||f.call(c,u)}),a},[]);return L.exports.useEffect(()=>(i.addTo(e.getMap()),()=>{i.remove()}),[]),L.exports.useEffect(()=>{Xr(i.getElement(),t.style)},[t.style]),(i.getLngLat().lng!==t.longitude||i.getLngLat().lat!==t.latitude)&&i.setLngLat([t.longitude,t.latitude]),t.offset&&!dN(i.getOffset(),t.offset)&&i.setOffset(t.offset),i.isDraggable()!==t.draggable&&i.setDraggable(t.draggable),i.getRotation()!==t.rotation&&i.setRotation(t.rotation),i.getRotationAlignment()!==t.rotationAlignment&&i.setRotationAlignment(t.rotationAlignment),i.getPitchAlignment()!==t.pitchAlignment&&i.setPitchAlignment(t.pitchAlignment),i.getPopup()!==t.popup&&i.setPopup(t.popup),Ao.exports.createPortal(t.children,i.getElement())}DE.defaultProps=xN;L.exports.memo(DE);function Q0(t){return new Set(t?t.trim().split(/\s+/):[])}function AN(t){const{map:e,mapLib:n}=L.exports.useContext(Mu),r=L.exports.useMemo(()=>document.createElement("div"),[]),i=L.exports.useRef({props:t});i.current.props=t;const s=L.exports.useMemo(()=>{const o=A({},t),a=new n.Popup(o).setLngLat([t.longitude,t.latitude]);return a.on("open",l=>{var u,c;(c=(u=i.current.props).onOpen)==null||c.call(u,l)}),a.on("close",l=>{var u,c;(c=(u=i.current.props).onClose)==null||c.call(u,l)}),a},[]);if(L.exports.useEffect(()=>(s.setDOMContent(r).addTo(e.getMap()),()=>{s.isOpen()&&s.remove()}),[]),L.exports.useEffect(()=>{Xr(s.getElement(),t.style)},[t.style]),s.isOpen()&&((s.getLngLat().lng!==t.longitude||s.getLngLat().lat!==t.latitude)&&s.setLngLat([t.longitude,t.latitude]),t.offset&&!Un(s.options.offset,t.offset)&&s.setOffset(t.offset),(s.options.anchor!==t.anchor||s.options.maxWidth!==t.maxWidth)&&(s.options.anchor=t.anchor,s.setMaxWidth(t.maxWidth)),s.options.className!==t.className)){const o=Q0(s.options.className),a=Q0(t.className);for(const l of o)a.has(l)||s.removeClassName(l);for(const l of a)o.has(l)||s.addClassName(l);s.options.className=t.className}return Ao.exports.createPortal(t.children,r)}L.exports.memo(AN);function ea(t,e,n){const r=L.exports.useContext(Mu),i=L.exports.useMemo(()=>t(r),[]);return L.exports.useEffect(()=>{var o;const{map:s}=r;return s.hasControl(i)||s.addControl(i,(o=n||e)==null?void 0:o.position),()=>{typeof e=="function"&&e(r),s.hasControl(i)&&s.removeControl(i)}},[]),i}function PN(t){const e=ea(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return L.exports.useEffect(()=>{Xr(e._container,t.style)},[t.style]),null}L.exports.memo(PN);function CN(t){const e=ea(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return L.exports.useEffect(()=>{Xr(e._controlContainer,t.style)},[t.style]),null}L.exports.memo(CN);const FE=L.exports.forwardRef((t,e)=>{const n=L.exports.useRef({props:t}),r=ea(({mapLib:i})=>{const s=new i.GeolocateControl(t);return s.on("geolocate",o=>{var a,l;(l=(a=n.current.props).onGeolocate)==null||l.call(a,o)}),s.on("error",o=>{var a,l;(l=(a=n.current.props).onError)==null||l.call(a,o)}),s.on("outofmaxbounds",o=>{var a,l;(l=(a=n.current.props).onOutOfMaxBounds)==null||l.call(a,o)}),s.on("trackuserlocationstart",o=>{var a,l;(l=(a=n.current.props).onTrackUserLocationStart)==null||l.call(a,o)}),s.on("trackuserlocationend",o=>{var a,l;(l=(a=n.current.props).onTrackUserLocationEnd)==null||l.call(a,o)}),s},{position:t.position});return n.current.props=t,L.exports.useImperativeHandle(e,()=>({trigger:()=>r.trigger()}),[]),L.exports.useEffect(()=>{Xr(r._container,t.style)},[t.style]),null});FE.displayName="GeolocateControl";L.exports.memo(FE);function ON(t){const e=ea(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return L.exports.useEffect(()=>{Xr(e._container,t.style)},[t.style]),null}L.exports.memo(ON);const RN={unit:"metric",maxWidth:100};function UE(t){const e=ea(({mapLib:n})=>new n.ScaleControl(t),{position:t.position});return(e.options.unit!==t.unit||e.options.maxWidth!==t.maxWidth)&&(e.options.maxWidth=t.maxWidth,e.setUnit(t.unit)),L.exports.useEffect(()=>{Xr(e._container,t.style)},[t.style]),null}UE.defaultProps=RN;L.exports.memo(UE);const MN=typeof window!="undefined"?L.exports.useLayoutEffect:L.exports.useEffect;var IN=MN;function zl(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}function ah(t){return t&&(typeof t=="function"?L.exports.createElement(Br,{},t):Array.isArray(t)?t.map(ah):t.type===hr.Fragment?ah(t.props.children):(zl(t.type,Br),t))}function LN({children:t,layers:e,views:n}){const r=[],i=[],s={};return hr.Children.forEach(ah(t),o=>{if(o){const a=o.type;if(zl(a,Jo)){const l=kN(a,o.props);i.push(l)}else r.push(o);if(a!==Br&&zl(a,Br)&&o.props.id){const l=new a(o.props);s[l.id]=l}}}),Object.keys(s).length>0&&(Array.isArray(n)?n.forEach(o=>{s[o.id]=o}):n&&(s[n.id]=n),n=Object.values(s)),e=i.length>0?[...i,...e]:e,{layers:e,children:r,views:n}}function kN(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}const NN={position:"absolute",zIndex:-1};function jE(t,e){return t&&(typeof t=="function"?t(e):Array.isArray(t)?t.map(n=>jE(n,e)):DN(t)?(e.style=NN,L.exports.cloneElement(t,e)):FN(t)?L.exports.cloneElement(t,e):t)}function DN(t){const e=t&&t.type,n=e&&e.defaultProps;return n&&n.mapStyle}function FN(t){const e=t&&t.type;return e&&e.deckGLViewProps}function UN({children:t,deck:e,ContextProvider:n}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const i={},s=r.views[0].id;for(const o of t){let a=s,l=o;zl(o.type,Br)&&(a=o.props.id||s,l=o.props.children);const u=r.getViewport(a),c=r.getViewState(a);if(u){const{x:f,y:h,width:g,height:_}=u;l=jE(l,{x:f,y:h,width:g,height:_,viewport:u,viewState:c}),i[a]||(i[a]={viewport:u,children:[]}),i[a].children.push(l)}}return Object.keys(i).map(o=>{const{viewport:a,children:l}=i[o],{x:u,y:c,width:f,height:h}=a,g={position:"absolute",left:u,top:c,width:f,height:h},_="view-".concat(o),v=L.exports.createElement("div",{key:_,id:_,style:g},...l);if(n){const d={viewport:a,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:p=>{p.viewId=o,e._onViewStateChange(p)}};return L.exports.createElement(n,{key:_,value:d},v)}return v})}const jN={mixBlendMode:null};function BN({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(n)for(const s in n)s in jN?i[s]=n[s]:r[s]=n[s];return{containerStyle:r,canvasStyle:i}}function zN(t){const e={pickObject:n=>t.deck.pickObject(n),pickMultipleObjects:n=>t.deck.pickMultipleObjects(n),pickObjects:n=>t.deck.pickObjects(n)};return Object.defineProperty(e,"deck",{get:()=>t.deck}),e}function BE(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function VN(t,e){const n=e.Deck||es,r=new n(K(A({},e),{style:null,width:"100%",height:"100%",_customRender:i=>{t.redrawReason=i;const s=r.viewManager.getViewports();t.lastRenderedViewports!==s?t.forceUpdate(o=>o+1):BE(t)}}));return r}const Hd=L.exports.forwardRef((t,e)=>{const r=L.exports.useRef({}).current,[i,s]=L.exports.useState(0);r.forceUpdate=s;const o=L.exports.useRef(null),a=L.exports.useRef(null),l=L.exports.useMemo(()=>LN(t),[t.layers,t.views,t.children]);let u=!0;const c=S=>u&&t.viewState?(r.viewStateUpdateRequested=S,null):(r.viewStateUpdateRequested=null,t.onViewStateChange(S)),f=S=>{u?r.interactionStateUpdateRequested=S:(r.interactionStateUpdateRequested=null,t.onInteractionStateChange(S))},h=L.exports.useMemo(()=>{const S=K(A({},t),{style:null,width:"100%",height:"100%",layers:l.layers,views:l.views,onViewStateChange:c,onInteractionStateChange:f});return r.deck&&r.deck.setProps(S),S},[t]);L.exports.useEffect(()=>(r.deck=VN(r,K(A({},h),{parent:o.current,canvas:a.current})),()=>r.deck.finalize()),[]),IN(()=>{BE(r);const{viewStateUpdateRequested:S,interactionStateUpdateRequested:O}=r;S&&c(S),O&&f(O)}),L.exports.useImperativeHandle(e,()=>zN(r),[]);const{viewManager:g}=r.deck||{},_=g&&g.getViewports(),{ContextProvider:v,width:d,height:p,id:m,style:w}=t,{containerStyle:b,canvasStyle:x}=L.exports.useMemo(()=>BN({width:d,height:p,style:w}),[d,p,w]);if(!r.viewStateUpdateRequested&&r.lastRenderedViewports===_||r.version!==i){r.lastRenderedViewports=_,r.version=i;const S=UN({children:l.children,deck:r.deck,ContextProvider:v}),O=L.exports.createElement("canvas",{key:"canvas",id:m||"deckgl-overlay",ref:a,style:x});r.control=L.exports.createElement("div",{id:"".concat(m||"deckgl","-wrapper"),ref:o,style:b},[O,S])}return u=!1,r.control});Hd.propTypes=es.getPropTypes(RT);Hd.defaultProps=es.defaultProps;var LD=Hd;function Ht(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function cr(t){return!!t&&!!t[Te]}function fr(t){return!!t&&(function(e){if(!e||typeof e!="object")return!1;var n=Object.getPrototypeOf(e);if(n===null)return!0;var r=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return r===Object||typeof r=="function"&&Function.toString.call(r)===KN}(t)||Array.isArray(t)||!!t[sy]||!!t.constructor[sy]||Wd(t)||Xd(t))}function zr(t,e,n){n===void 0&&(n=!1),ts(t)===0?(n?Object.keys:Ri)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function ts(t){var e=t[Te];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Wd(t)?2:Xd(t)?3:0}function Oi(t,e){return ts(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function $N(t,e){return ts(t)===2?t.get(e):t[e]}function zE(t,e,n){var r=ts(t);r===2?t.set(e,n):r===3?(t.delete(e),t.add(n)):t[e]=n}function VE(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Wd(t){return ZN&&t instanceof Map}function Xd(t){return qN&&t instanceof Set}function br(t){return t.o||t.t}function Yd(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=GE(t);delete e[Te];for(var n=Ri(e),r=0;r<n.length;r++){var i=n[r],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function Zd(t,e){return e===void 0&&(e=!1),qd(t)||cr(t)||!fr(t)||(ts(t)>1&&(t.set=t.add=t.clear=t.delete=GN),Object.freeze(t),e&&zr(t,function(n,r){return Zd(r,!0)},!0)),t}function GN(){Ht(2)}function qd(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function fn(t){var e=fh[t];return e||Ht(18,t),e}function HN(t,e){fh[t]||(fh[t]=e)}function lh(){return wo}function Bc(t,e){e&&(fn("Patches"),t.u=[],t.s=[],t.v=e)}function Vl(t){uh(t),t.p.forEach(WN),t.p=null}function uh(t){t===wo&&(wo=t.l)}function J0(t){return wo={p:[],l:wo,h:t,m:!0,_:0}}function WN(t){var e=t[Te];e.i===0||e.i===1?e.j():e.O=!0}function zc(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.g||fn("ES5").S(e,t,r),r?(n[Te].P&&(Vl(e),Ht(4)),fr(t)&&(t=$l(e,t),e.l||Gl(e,t)),e.u&&fn("Patches").M(n[Te].t,t,e.u,e.s)):t=$l(e,n,[]),Vl(e),e.u&&e.v(e.u,e.s),t!==$E?t:void 0}function $l(t,e,n){if(qd(e))return e;var r=e[Te];if(!r)return zr(e,function(s,o){return ey(t,r,e,s,o,n)},!0),e;if(r.A!==t)return e;if(!r.P)return Gl(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Yd(r.k):r.o;zr(r.i===3?new Set(i):i,function(s,o){return ey(t,r,i,s,o,n)}),Gl(t,i,!1),n&&t.u&&fn("Patches").R(r,n,t.u,t.s)}return r.o}function ey(t,e,n,r,i,s){if(cr(i)){var o=$l(t,i,s&&e&&e.i!==3&&!Oi(e.D,r)?s.concat(r):void 0);if(zE(n,r,o),!cr(o))return;t.m=!1}if(fr(i)&&!qd(i)){if(!t.h.F&&t._<1)return;$l(t,i),e&&e.A.l||Gl(t,i)}}function Gl(t,e,n){n===void 0&&(n=!1),t.h.F&&t.m&&Zd(e,n)}function Vc(t,e){var n=t[Te];return(n?br(n):t)[e]}function ty(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function jn(t){t.P||(t.P=!0,t.l&&jn(t.l))}function $c(t){t.o||(t.o=Yd(t.t))}function ch(t,e,n){var r=Wd(e)?fn("MapSet").N(e,n):Xd(e)?fn("MapSet").T(e,n):t.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:lh(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,u=bo;o&&(l=[a],u=Ms);var c=Proxy.revocable(l,u),f=c.revoke,h=c.proxy;return a.k=h,a.j=f,h}(e,n):fn("ES5").J(e,n);return(n?n.A:lh()).p.push(r),r}function XN(t){return cr(t)||Ht(22,t),function e(n){if(!fr(n))return n;var r,i=n[Te],s=ts(n);if(i){if(!i.P&&(i.i<4||!fn("ES5").K(i)))return i.t;i.I=!0,r=ny(n,s),i.I=!1}else r=ny(n,s);return zr(r,function(o,a){i&&$N(i.t,o)===a||zE(r,o,e(a))}),s===3?new Set(r):r}(t)}function ny(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Yd(t)}function YN(){function t(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[Te];return bo.get(l,s)},set:function(l){var u=this[Te];bo.set(u,s,l)}},a}function e(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Te];if(!a.P)switch(a.i){case 5:r(a)&&jn(a);break;case 4:n(a)&&jn(a)}}}function n(s){for(var o=s.t,a=s.k,l=Ri(a),u=l.length-1;u>=0;u--){var c=l[u];if(c!==Te){var f=o[c];if(f===void 0&&!Oi(o,c))return!0;var h=a[c],g=h&&h[Te];if(g?g.t!==f:!VE(h,f))return!0}}var _=!!o[Te];return l.length!==Ri(o).length+(_?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};HN("ES5",{J:function(s,o){var a=Array.isArray(s),l=function(c,f){if(c){for(var h=Array(f.length),g=0;g<f.length;g++)Object.defineProperty(h,""+g,t(g,!0));return h}var _=GE(f);delete _[Te];for(var v=Ri(_),d=0;d<v.length;d++){var p=v[d];_[p]=t(p,c||!!_[p].enumerable)}return Object.create(Object.getPrototypeOf(f),_)}(a,s),u={i:a?5:4,A:o?o.A:lh(),P:!1,I:!1,D:{},l:o,t:s,k:l,o:null,O:!1,C:!1};return Object.defineProperty(l,Te,{value:u,writable:!0}),l},S:function(s,o,a){a?cr(o)&&o[Te].A===s&&e(s.p):(s.u&&function l(u){if(u&&typeof u=="object"){var c=u[Te];if(c){var f=c.t,h=c.k,g=c.D,_=c.i;if(_===4)zr(h,function(w){w!==Te&&(f[w]!==void 0||Oi(f,w)?g[w]||l(h[w]):(g[w]=!0,jn(c)))}),zr(f,function(w){h[w]!==void 0||Oi(h,w)||(g[w]=!1,jn(c))});else if(_===5){if(r(c)&&(jn(c),g.length=!0),h.length<f.length)for(var v=h.length;v<f.length;v++)g[v]=!1;else for(var d=f.length;d<h.length;d++)g[d]=!0;for(var p=Math.min(h.length,f.length),m=0;m<p;m++)h.hasOwnProperty(m)||(g[m]=!0),g[m]===void 0&&l(h[m])}}}}(s.p[0]),e(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var ry,wo,Kd=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",ZN=typeof Map!="undefined",qN=typeof Set!="undefined",iy=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",$E=Kd?Symbol.for("immer-nothing"):((ry={})["immer-nothing"]=!0,ry),sy=Kd?Symbol.for("immer-draftable"):"__$immer_draftable",Te=Kd?Symbol.for("immer-state"):"__$immer_state",KN=""+Object.prototype.constructor,Ri=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,GE=Object.getOwnPropertyDescriptors||function(t){var e={};return Ri(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},fh={},bo={get:function(t,e){if(e===Te)return t;var n=br(t);if(!Oi(n,e))return function(i,s,o){var a,l=ty(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!fr(r)?r:r===Vc(t.t,e)?($c(t),t.o[e]=ch(t.A.h,r,t)):r},has:function(t,e){return e in br(t)},ownKeys:function(t){return Reflect.ownKeys(br(t))},set:function(t,e,n){var r=ty(br(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=Vc(br(t),e),s=i==null?void 0:i[Te];if(s&&s.t===n)return t.o[e]=n,t.D[e]=!1,!0;if(VE(n,i)&&(n!==void 0||Oi(t.t,e)))return!0;$c(t),jn(t)}return t.o[e]===n&&typeof n!="number"&&(n!==void 0||e in t.o)||(t.o[e]=n,t.D[e]=!0,!0)},deleteProperty:function(t,e){return Vc(t.t,e)!==void 0||e in t.t?(t.D[e]=!1,$c(t),jn(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=br(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){Ht(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Ht(12)}},Ms={};zr(bo,function(t,e){Ms[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Ms.deleteProperty=function(t,e){return Ms.set.call(this,t,e,void 0)},Ms.set=function(t,e,n){return bo.set.call(this,t[0],e,n,t[0])};var QN=function(){function t(n){var r=this;this.g=iy,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(v){var d=this;v===void 0&&(v=a);for(var p=arguments.length,m=Array(p>1?p-1:0),w=1;w<p;w++)m[w-1]=arguments[w];return l.produce(v,function(b){var x;return(x=s).call.apply(x,[d,b].concat(m))})}}var u;if(typeof s!="function"&&Ht(6),o!==void 0&&typeof o!="function"&&Ht(7),fr(i)){var c=J0(r),f=ch(r,i,void 0),h=!0;try{u=s(f),h=!1}finally{h?Vl(c):uh(c)}return typeof Promise!="undefined"&&u instanceof Promise?u.then(function(v){return Bc(c,o),zc(v,c)},function(v){throw Vl(c),v}):(Bc(c,o),zc(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===$E&&(u=void 0),r.F&&Zd(u,!0),o){var g=[],_=[];fn("Patches").M(i,u,g,_),o(g,_)}return u}Ht(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,f=Array(c>1?c-1:0),h=1;h<c;h++)f[h-1]=arguments[h];return r.produceWithPatches(u,function(g){return i.apply(void 0,[g].concat(f))})};var o,a,l=r.produce(i,s,function(u,c){o=u,a=c});return typeof Promise!="undefined"&&l instanceof Promise?l.then(function(u){return[u,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){fr(n)||Ht(8),cr(n)&&(n=XN(n));var r=J0(this),i=ch(this,n,void 0);return i[Te].C=!0,uh(r),i},e.finishDraft=function(n,r){var i=n&&n[Te],s=i.A;return Bc(s,r),zc(void 0,s)},e.setAutoFreeze=function(n){this.F=n},e.setUseProxies=function(n){n&&!iy&&Ht(20),this.g=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=fn("Patches").$;return cr(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),Ct=new QN,JN=Ct.produce;Ct.produceWithPatches.bind(Ct);Ct.setAutoFreeze.bind(Ct);Ct.setUseProxies.bind(Ct);Ct.applyPatches.bind(Ct);Ct.createDraft.bind(Ct);Ct.finishDraft.bind(Ct);var Qa=JN;function oy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ay(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oy(Object(n),!0).forEach(function(r){I(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oy(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Je(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var ly=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Gc=function(){return Math.random().toString(36).substring(7).split("").join(".")},Hl={INIT:"@@redux/INIT"+Gc(),REPLACE:"@@redux/REPLACE"+Gc(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Gc()}};function eD(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function HE(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Je(0));if(typeof e=="function"&&typeof n=="undefined"&&(n=e,e=void 0),typeof n!="undefined"){if(typeof n!="function")throw new Error(Je(1));return n(HE)(t,e)}if(typeof t!="function")throw new Error(Je(2));var i=t,s=e,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function c(){if(l)throw new Error(Je(3));return s}function f(v){if(typeof v!="function")throw new Error(Je(4));if(l)throw new Error(Je(5));var d=!0;return u(),a.push(v),function(){if(!!d){if(l)throw new Error(Je(6));d=!1,u();var m=a.indexOf(v);a.splice(m,1),o=null}}}function h(v){if(!eD(v))throw new Error(Je(7));if(typeof v.type=="undefined")throw new Error(Je(8));if(l)throw new Error(Je(9));try{l=!0,s=i(s,v)}finally{l=!1}for(var d=o=a,p=0;p<d.length;p++){var m=d[p];m()}return v}function g(v){if(typeof v!="function")throw new Error(Je(10));i=v,h({type:Hl.REPLACE})}function _(){var v,d=f;return v={subscribe:function(m){if(typeof m!="object"||m===null)throw new Error(Je(11));function w(){m.next&&m.next(c())}w();var b=d(w);return{unsubscribe:b}}},v[ly]=function(){return this},v}return h({type:Hl.INIT}),r={dispatch:h,subscribe:f,getState:c,replaceReducer:g},r[ly]=_,r}function tD(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:Hl.INIT});if(typeof r=="undefined")throw new Error(Je(12));if(typeof n(void 0,{type:Hl.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(Je(13))})}function nD(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var s=Object.keys(n),o;try{tD(n)}catch(a){o=a}return function(l,u){if(l===void 0&&(l={}),o)throw o;for(var c=!1,f={},h=0;h<s.length;h++){var g=s[h],_=n[g],v=l[g],d=_(v,u);if(typeof d=="undefined")throw u&&u.type,new Error(Je(14));f[g]=d,c=c||d!==v}return c=c||s.length!==Object.keys(l).length,c?f:l}}function Wl(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function rD(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Je(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return s=Wl.apply(void 0,a)(i.dispatch),ay(ay({},i),{},{dispatch:s})}}}function WE(t){var e=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,t):o(a)}}};return e}var XE=WE();XE.withExtraArgument=WE;var uy=XE,iD=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();globalThis&&globalThis.__generator;var Xl=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},sD=Object.defineProperty,cy=Object.getOwnPropertySymbols,oD=Object.prototype.hasOwnProperty,aD=Object.prototype.propertyIsEnumerable,fy=function(t,e,n){return e in t?sD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},To=function(t,e){for(var n in e||(e={}))oD.call(e,n)&&fy(t,n,e[n]);if(cy)for(var r=0,i=cy(e);r<i.length;r++){var n=i[r];aD.call(e,n)&&fy(t,n,e[n])}return t},lD=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Wl:Wl.apply(null,arguments)};function uD(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var cD=function(t){iD(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Xl([void 0],n[0].concat(this)))):new(e.bind.apply(e,Xl([void 0],n.concat(this))))},e}(Array);function fD(t){return typeof t=="boolean"}function hD(){return function(e){return dD(e)}}function dD(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new cD;return n&&(fD(n)?r.push(uy):r.push(uy.withExtraArgument(n.extraArgument))),r}var pD=!0;function kD(t){var e=hD(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?e():s,a=n.devTools,l=a===void 0?!0:a,u=n.preloadedState,c=u===void 0?void 0:u,f=n.enhancers,h=f===void 0?void 0:f,g;if(typeof i=="function")g=i;else if(uD(i))g=nD(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var _=o;typeof _=="function"&&(_=_(e));var v=rD.apply(void 0,_),d=Wl;l&&(d=lD(To({trace:!pD},typeof l=="object"&&l)));var p=[v];Array.isArray(h)?p=Xl([v],h):typeof h=="function"&&(p=h(p));var m=d.apply(void 0,p);return HE(g,c,m)}function So(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var s=e.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return To(To({type:t,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function YE(t){var e={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return t(i),[e,n,r]}function gD(t){return typeof t=="function"}function mD(t,e,n,r){n===void 0&&(n=[]);var i=typeof e=="function"?YE(e):[e,n,r],s=i[0],o=i[1],a=i[2],l;if(gD(t))l=function(){return Qa(t(),function(){})};else{var u=Qa(t,function(){});l=function(){return u}}function c(f,h){f===void 0&&(f=l());var g=Xl([s[h.type]],o.filter(function(_){var v=_.matcher;return v(h)}).map(function(_){var v=_.reducer;return v}));return g.filter(function(_){return!!_}).length===0&&(g=[a]),g.reduce(function(_,v){if(v)if(cr(_)){var d=_,p=v(d,h);return typeof p=="undefined"?_:p}else{if(fr(_))return Qa(_,function(m){return v(m,h)});var p=v(_,h);if(typeof p=="undefined"){if(_===null)return _;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}return _},f)}return c.getInitialState=l,c}function yD(t,e){return t+"/"+e}function ND(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");var n=typeof t.initialState=="function"?t.initialState:Qa(t.initialState,function(){}),r=t.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],h=yD(e,c),g,_;"reducer"in f?(g=f.reducer,_=f.prepare):g=f,s[c]=g,o[h]=g,a[c]=_?So(h,_):So(h)});function l(){var c=typeof t.extraReducers=="function"?YE(t.extraReducers):[t.extraReducers],f=c[0],h=f===void 0?{}:f,g=c[1],_=g===void 0?[]:g,v=c[2],d=v===void 0?void 0:v,p=To(To({},h),o);return mD(n,p,_,d)}var u;return{name:e,reducer:function(c,f){return u||(u=l()),u(c,f)},actions:a,caseReducers:s,getInitialState:function(){return u||(u=l()),u.getInitialState()}}}var Qd="listenerMiddleware";So(Qd+"/add");So(Qd+"/removeAll");So(Qd+"/remove");YN();export{OD as B,LD as D,bD as F,LE as I,kE as L,NE as M,TD as P,AD as R,RD as W,jT as a,SD as b,xD as c,CD as d,ID as e,ND as f,_S as g,kD as h,ED as i,wD as j,hr as k,vD as l,L as r,MD as s,PD as u};
